% \iffalse meta-comment
%
% Copyright 1996-2010 de Hideo Umeki <latexgeometry@gmail.com>
%
% Extension LaTeX : Geometry
% --------------------------
%
% Ce travail peut être distribué et/ou modifié sous les conditions de la
% Licence Publique du Projet LaTeX, soit en version 1.3c de cette licence 
% ou (à votre convenance) en version ultérieure. La dernière version de 
% cette licence est précisée à l'adresse suivante :
%    http://www.latex-project.org/lppl.txt
% et les versions 1.3c ou suivantes font partie de toutes les distributions
% de LaTeX depuis la version 01/12/2005.
%
% Cette extension est "maintenue" (au sens de la maintenance dans la LPPL)
% par Hideo Umeki.
%
% Cette extension est composée du fichier geometry.dtx et des fichiers
% dérivés : geometry.{sty,ins,drv}, geometry-samples.tex.
%
% * Distribution
%    CTAN: macros/latex/contrib/geometry/README
%    CTAN: macros/latex/contrib/geometry/changes.txt
%    CTAN: macros/latex/contrib/geometry/geometry.ins
%    CTAN: macros/latex/contrib/geometry/geometry.dtx
%    CTAN: macros/latex/contrib/geometry/geometry.pdf
%
% * Voir README pour l'installation.
%        
%<*ignore>
\begingroup
  \def\x{LaTeX2e}
\expandafter\endgroup
\ifcase 0\ifx\install y1\fi\expandafter
         \ifx\csname processbatchFile\endcsname\relax\else1\fi
         \ifx\fmtname\x\else 1\fi\relax
\else\csname fi\endcsname
%</ignore>
%<package|driver>\NeedsTeXFormat{LaTeX2e}
%<package>\ProvidesPackage{geometry}
%<package>  [2010/09/12 v5.6 Page Geometry]
%<*install>
\input docstrip.tex
\Msg{************************************************************************}
\Msg{* Installation}
\Msg{* Package: geometry 2010/09/12 v5.6 Page Geometry}
\Msg{************************************************************************}

\keepsilent
\askforoverwritefalse
\preamble

Copyright (C) 1996-2010
de Hideo Umeki <latexgeometry@gmail.com>

Ce travail peut être distribué et/ou modifié sous les conditions de la
Licence Publique du Projet LaTeX, soit en version 1.3c de cette licence 
ou (à votre convenance) en version ultérieure. La dernière version de 
cette licence est précisée à l'adresse suivante :
   http://www.latex-project.org/lppl.txt
et les versions 1.3c ou suivantes font partie de toutes les distributions
de LaTeX depuis la version 01/12/2005.

Cette extension est "maintenue" (au sens de la maintenance dans la LPPL)
par Hideo Umeki.

Cette extension est composée du fichier geometry.dtx et des fichiers
dérivés : geometry.{sty,ins,drv}, geometry-samples.tex.


\endpreamble

\generate{%
  \file{geometry.ins}{\from{geometry.dtx}{install}}%
  \file{geometry.drv}{\from{geometry.dtx}{driver}}%
  \usedir{tex/latex/geometry}%
  \file{geometry.sty}{\from{geometry.dtx}{package}}%
  \file{geometry.cfg}{\from{geometry.dtx}{config}}%
  \file{geometry-samples.tex}{\from{geometry.dtx}{samples}}%
}

\obeyspaces
\Msg{************************************************************************}
\Msg{*}
\Msg{* To finish the installation you have to move the following}
\Msg{* file into a directory searched by LaTeX:}
\Msg{*}
\Msg{* \space\space geometry.sty}
\Msg{*}
\Msg{* To produce the documentation run the file `geometry.drv'}
\Msg{* through LaTeX.}
\Msg{*}
\Msg{* Happy TeXing!}
\Msg{*}
\Msg{************************************************************************}
\endbatchfile
%</install>
%<*ignore>
\fi
%</ignore>
%<*driver>
\ProvidesFile{geometry.drv}
\documentclass{ltxdoc}
\usepackage[colorlinks, linkcolor=blue]{hyperref}
\usepackage{graphicx}
\usepackage[a4paper, hmargin=2.5cm, vmargin=1cm, 
        includeheadfoot]{geometry}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[french]{babel}
% Bloc pour traduction
\usepackage{color}
\usepackage{pifont}
\definecolor{orange5}{RGB}{255,153,0} 
\newcommand{\trad}[1]{\textbf{\textcolor{orange5}{\noindent\ding{54} #1 \ding{54}}}}
% Fin du bloc qui doit être retiré une fois le travail achevé
\DeclareRobustCommand\XeTeX{%
      X\lower.5ex\hbox{\kern-.07em\reflectbox{E}}%
      \kern-.15em\TeX}
\DeclareRobustCommand\XeLaTeX{%
      X\lower.5ex\hbox{\kern-.07em\reflectbox{E}}%
      \kern-.15em\LaTeX}
\begin{document}
 \DocInput{geometry-fr.dtx}
\end{document}
%</driver>
% \fi
%
% \CheckSum{2681}
%
% \CharacterTable
%  {Upper-case    \A\B\C\D\E\F\G\H\I\J\K\L\M\N\O\P\Q\R\S\T\U\V\W\X\Y\Z
%   Lower-case    \a\b\c\d\e\f\g\h\i\j\k\l\m\n\o\p\q\r\s\t\u\v\w\x\y\z
%   Digits        \0\1\2\3\4\5\6\7\8\9
%   Exclamation   \!     Double quote  \"     Hash (number) \#
%   Dollar        \$     Percent       \%     Ampersand     \&
%   Acute accent  \'     Left paren    \(     Right paren   \)
%   Asterisk      \*     Plus          \+     Comma         \,
%   Minus         \-     Point         \.     Solidus       \/
%   Colon         \:     Semicolon     \;     Less than     \<
%   Equals        \=     Greater than  \>     Question mark \?
%   Commercial at \@     Left bracket  \[     Backslash     \\
%   Right bracket \]     Circumflex    \^     Underscore    \_
%   Grave accent  \`     Left brace    \{     Vertical bar  \|
%   Right brace   \}     Tilde         \~}
%
% \GetFileInfo{geometry.sty}
%
% \title{L'extension \textsf{geometry}}
% \date{\filedate\ \fileversion}
% \author{Hideo Umeki\\\texttt{latexgeometry@gmail.com}}
%
% \MakeShortVerb{|}
%
% \def\OpenB{{\ttfamily\char`\{}}
% \def\Comma{{\ttfamily\char`,}}
% \def\CloseB{{\ttfamily\char`\}}}
% \def\Gm{\textsf{geometry}}
% \newcommand\argii[2]{\OpenB\meta{#1}\Comma\meta{#2}\CloseB}
% \newcommand\argiii[3]{\OpenB\meta{#1}\Comma\meta{#2}\Comma\meta{#3}\CloseB}
% \newcommand\vargii[2]{\OpenB#1\Comma#2\CloseB}
% \newcommand\vargiii[3]{\OpenB#1\Comma#2\Comma#3\CloseB}
% \newcommand\OR{\ \strut\vrule width .4pt\ }
% \newcommand\gpart[1]{\textsf{\textsl{\color[rgb]{.0,.45,.7}#1}}}%
% \newcommand\glen[1]{\textsf{#1}}
% \newenvironment{key}[2]{\expandafter\macro\expandafter{`#2'}}{\endmacro}
% \newenvironment{Options}%
%  {\begin{list}{}{%
%   \renewcommand{\makelabel}[1]{\texttt{##1}\hfil}%
%   \setlength{\itemsep}{-.5\parsep}
%   \settowidth{\labelwidth}{\texttt{xxxxxxxxxxx\space}}%
%   \setlength{\leftmargin}{\labelwidth}%
%   \addtolength{\leftmargin}{\labelsep}}%
%   \raggedright}
%  {\end{list}}
% \newenvironment{Spec}%
%  {\begin{list}{}{%
%   \renewcommand{\makelabel}[1]{\fbox{##1}\hfil}%
%   \setlength{\itemsep}{-.5\parsep}
%   \settowidth{\labelwidth}{\texttt{S(x,x)}}%
%   \setlength{\leftmargin}{\labelwidth}%
%   \addtolength{\leftmargin}{\labelsep}%
%   \addtolength{\leftmargin}{2em}%
%   \setlength{\rightmargin}{2em}}%
%   \raggedright}
%  {\end{list}}
% \def\Ss(#1,#2){\textsf{S(#1,#2)}}%
% \def\Sp(#1,#2,#3){\mbox{|(#1,#2,#3)|}}%
% \def\onlypre{\llap{$^{\dagger\:}$}}%
%
% \maketitle
%
% \begin{abstract}
% Cette extension met à disposition une interface flexible et simple pour
% définir les dimensions associées aux pages. Vous pouvez ainsi changer la mise
% en page avec des paramètres intuitifs. Par exemple, si vous voulez fixer une
% marge de 2 cm à chaque bord de la feuille, vous avez juste à saisir 
% |\usepackage[margin=2cm]{geometry}|. L'aspect de la page peut également être
% changé en cours de document avec la commande |\newgeometry|.
% \end{abstract}
%
% \section{Préface à la version 5}
% 
%
% \begin{itemize}
%  \item \textbf{Changement de la mise en page en cours de document.}\par
%   Les nouvelles commandes \cs{newgeometry\{$\cdots$\}} et 
%   \cs{restoregeometry} permettent à l'utilisateur de changer les dimensions
%   de la page en cours de document. \cs{newgeometry} est assez similaire à 
%   \cs{geometry}, à ceci près que \cs{newgeometry} désactive toutes les
%   options indiquées dans le préambule mais conserve les options liées à la
%   taille du papier : |landscape|, |portrait| et les options de format
%   (telles que |papersize|, |paper=a4paper| et ainsi de suite).
%  \item \textbf{Un nouvel ensemble d'options pour spécifier le gabarit.}\par
%   Les options spécifiant le gabarit dans lequel sont calculées des dimensions
%   sont ajoutées : \textsf{layout}, \textsf{layoutsize}, 
%   \textsf{layoutwidth}, \textsf{layoutheight} et ainsi de suite.
%   Ces options aident à imprimer un gabarit (une mise en page) dans une autre
%   taille de papier. Par exemple, avec |a4paper| et |layout=a5paper|,
%   l'extension \Gm\ utilise une mise en page format A5 et calcule les marges
%   avec un papier format A4.
%  \item \textbf{Une nouvelle option de pilote |xetex|.}\par
%   Une nouvelle option de pilote, |xetex|, est ajoutée. La routine 
%   d'auto-détection des pilotes a été revue pour éviter une erreur avec les
%   commandes non définies. Notez que \og geometry.cfg \fg{} (dans 
%   \TeX{} Live), qui désactive la routine d'auto-détection et sélectionne 
%   |pdftex|, n'est plus nécessaire et ne crée plus de problème quand bien même
%   il existe toujours. Sélectionner |xetex| est fortement recommandé avec
%   \XeLaTeX{}.
%  \item \textbf{Nouveaux formats de papier prédéfinis pour les formats JIS B 
%  et les formats ISO C.}\par
%   Les formats de papier prédéfinis |b0j| à |b6j| pour les formats JIS 
%   (Japanese Industrial Standards) B et |c0paper| à |c6paper| pour les formats
%   ISO C (v5.4$\sim$) sont ajoutés.
%  \item \textbf{Changement des valeurs par défaut pour les marges 
%  sous-définies.}\par
%   Dans les versions précédentes, si une seule marge était spécifiée, 
%   |bottom=1cm| par exemple, alors \Gm\ fixait l'autre marge avec le ratio de
%   marge (1\string:1 par défaut pour les dimensions verticales) et obtenait
%   |top=1cm| dans ce cas. La version 5 fixe la taille du corps du texte avec
%   la valeur par défaut |scale| ($=0.7$) puis détermine la marge non spécifiée.
%   (Voir Section~\ref{sec:rules}) 
%  \item \textbf{Les options |showframe| et |showcrop| fonctionnent sur chaque 
%   page.}\par
%   Avec l'option |showframe|, le cadre de la page est affiché sur chaque page.
%   En complément, une nouvelle option |showcrop| affiche les traits de coupe
%   à chaque coin du gabarit sur chaque page. Notez que les
%   marques seront invisibles sans spécification d'une taille de gabarit
%   plus petite que la taille du papier. La version 5.4 introduit un nouveau 
%   processus de débordement |\shipout| utilisant l'extension \textsf{atbegshi}
%   impliquant le chargement de cette extension quand les options |showframe|
%   ou |showcrop| sont sélectionnées.
%  \item \textbf{Le chargement de geometry.cfg précède le traitement des
%  options de classe.}\par
%    La version antérieure chargeait \textsf{geometry.cfg} après avoir traité
%    les options de classe du document. Maintenant que le fichier de
%    configuration est chargé avant, vous pouvez changer le comportement
%    indiqué dans \textsf{geometry.cfg} en ajoutant des options dans 
%    |\documentclass| aussi bien que dans |\usepackage| et |\geometry|.
%  \item \textbf{Options supprimées: |compat2| et |twosideshift|.}\par
%    La version 5 n'est plus compatible avec les options |compat2| et 
%    |twosideshift| pour des raisons de simplification. 
% \end{itemize}
%
% \section{Introduction}
%
% Déterminer des dimensions d'une mise en page sous \LaTeX\ n'est pas immédiat.
% Vous devez ajuster plusieurs dimensions inhérentes à \LaTeX{} pour placer
% une zone de texte là où vous le souhaitez. Si vous voulez centrer la zone de
% texte dans un format de papier que vous utilisez, vous devez par exemple
% spécifier les dimensions fondamentales suivantes :
% \begin{quote}
%    |\usepackage{calc}|\\
%    |\setlength\textwidth{7in}|\\
%    |\setlength\textheight{10in}|\\
%    |\setlength\oddsidemargin{(\paperwidth-\textwidth)/2 - 1in}|\\
%    |\setlength\topmargin{(\paperheight-\textheight|\\
%    |                      -\headheight-\headsep-\footskip)/2 - 1in}|.
% \end{quote}
% Sans l'extension \textsl{calc}, l'exemple ci-dessus demanderait des réglages
% encore plus fastidieux. L'extension \Gm\ présente une façon simple de fixer
% des paramètres de mise en page. Dans l'exemple, ce que vous avez à faire est
% juste  
% \begin{quote}
%    |\usepackage[text={7in,10in},centering]{geometry}|. 
% \end{quote}
% Tout comme la question de centrer le texte, le réglage des marges par
% rapport à chaque bord de la feuille est problématique. Mais \Gm\
% simplifie aussi ce point. Si vous souhaitez fixer chaque marge à $3,8$ cm,
% vous pouvez saisir
% \begin{quote}
%    |\usepackage[margin=3.8cm]{geometry}| 
% \end{quote}
% De fait, l'extension \Gm\ dispose d'un mécanisme d'autocomplétion dans
% lequel les dimensions manquantes sont automatiquement déterminées.
% L'extension \Gm\ sera également utile lorsque vous avez à traiter la mise en
% page en suivant des instructions strictes. Par exemple,
% \begin{quote}\slshape
%   La largeur maximale de la zone de texte est de $16,5$ cm de large par 
%   $22,25$ cm de haut. La marge haute sur chaque page doit être de $3$ cm
%   depuis le bord haut de la feuille. La marge gauche doit être de $2,3$ cm
%   depuis le bord gauche. Le pied de page avec le numéro de la page doit être
%   en bas de la zone de texte.
 % \end{quote}
% Dans ce cas, avec \Gm\ vous saisissez
% \begin{quote}
% |\usepackage[total={16.5cm,22.25cm},|\\
% |            top=3cm, left=2.3cm, includefoot]{geometry}|.
% \end{quote}
%
% Définir une zone de texte sur papier dans un système de préparation de
% document présente certaines analogies avec le placement d'une fenêtre dans 
% l'environnement graphique d'un système d'exploitation. 
% Le nom \og geometry \fg{} provient de l'option |-geometry| utilisée pour
% spécifier la taille et la localisation d'une fenêtre dans l'environnement 
% X Window.
%
% \section{Anatomie d'une page}
%
% La Figure~\ref{fig:layout} montre les dimensions associées à la mise en page
% telle que définies par l'extension \Gm. Le gabarit\footnote{Les noms des
% fonctions présentées ci-après reprenant parfois les appellations anglaises, le
% terme gabarit se traduit par \emph{layout}, celui de corps total se
% traduit par \emph{total body}, celui d'en-tête par \emph{head} (ou 
% \emph{header}), celui de pied de page par \emph{foot} (ou \emph{footer}),
% celui de marge par \emph{margin}, celui de note marginale par \emph{marginal 
% note}.}  contient un % \gpart{corps total} (zone imprimable) et des 
% \gpart{marges}.
% Le \gpart{corps total} se compose d'un \gpart{corps} (zone de texte) et 
% d'éléments optionnels : un \gpart{en-tête}, un \gpart{pied de page} et une 
% note marginale (marginpar). Il y a quatre marges : \gpart{gauche}, 
% \gpart{droite}, \gpart{haute} and \gpart{basse}. Pour les documents en
% mode recto-verso, les marges horizontales devraient être appelées 
% \gpart{intérieure} et \gpart{extérieure}.

% \begin{quote}
%  \begin{tabular}{rcl}
%   \gpart{papier}&:&\gpart{corps total} et \gpart{marges}\\
%   \gpart{corps total}&:&\gpart{corps} (zone de texte)\quad
%             (\gpart{en-tête}, \gpart{pied de page} et 
%              \gpart{note marginale} optionnels)\\
%   \gpart{marges}&:&\gpart{gauche} (\gpart{intérieure}), 
%      \gpart{droite} (\gpart{extérieure}), \gpart{haute} et \gpart{basse}
%   \end{tabular}
% \end{quote}
% Chaque marge est mesurée à partir du bord associé du papier.
% Par exemple, la marge gauche (marge intérieure) correspond à la distance 
% horizontale entre le bord gauche (intérieur) du papier et celui du corps
% total. C'est pourquoi les marges gauche et haute définies dans \Gm\ diffèrent
% des dimensions usuelles \cs{leftmargin} et \cs{topmargin}.
% La taille du corps (zone de texte) peut être modifiée avec \cs{textwidth} et
% \cs{textheight}. Les dimensions du papier, du corps total et des marges
% ont les relations suivantes.
% \begin{eqnarray}
%  \label{eq:paperwidth}
%  |paperwidth| &=& |left|+|width|+|right| \\
%  |paperheight| &=& |top|+|height|+|bottom|
%  \label{eq:paperheight}
% \end{eqnarray}
%
% \begin{figure}
%  \centering\small
%  {\unitlength=.65pt
%  \begin{picture}(450,250)(0,-10)
%  \put(20,0){\framebox(170,230){}}
%  \put(20,235){\makebox(170,230)[br]{\gpart{papier}}}
%  \begingroup\thicklines
%  \put(40,30){\framebox(120,170){}}\endgroup
%  \put(40,30){\makebox(120,165)[tr]{\gpart{corps total}~}}
%  \put(45,30){\makebox(0,170)[l]{|height|}}
%  \put(40,35){\makebox(120,0)[bc]{|width|}}
%  \put(50,-20){\makebox(120,0)[bc]{|paperwidth|}}
%  \put(10,45){\makebox(0,170)[r]{|paperheight|}}
%  \put(90,200){\makebox(0,30)[lc]{|top|}}
%  \put(90,0){\makebox(0,30)[lc]{|bottom|}}
%  \put(10,70){\makebox(0,0)[r]{|left|}}
%  \put(10,55){\makebox(0,0)[r]{(|inner|)}}
%  \put(200,70){\makebox(0,0)[l]{|right|}}
%  \put(200,55){\makebox(0,0)[l]{(|outer|)}}
%  \put(80,230){\vector(0,-1){30}}\put(80,30){\vector(0,-1){30}}
%  \put(80,200){\vector(0,1){30}}\put(80,0){\vector(0,1){30}}
%  \put(20,70){\vector(1,0){20}}\put(40,70){\vector(-1,0){20}}
%  \put(160,70){\vector(1,0){30}}\put(190,70){\vector(-1,0){30}}
%  \multiput(160,30)(5,0){24}{\line(1,0){2}}
%  \multiput(160,200)(5,0){24}{\line(1,0){2}}
%  \begingroup\thicklines
%  \put(280,30){\framebox(120,170){}}\endgroup
%  \put(283,133){\makebox(0,12)[l]{|textheight|}}
%  \put(295,130){\vector(0,-1){100}}\put(295,150){\vector(0,1){50}}
%  \multiput(280,220)(5,0){24}{\line(1,0){3}}
%  \put(280,208){\makebox(120,20)[bc]{\gpart{en-tête}}}
%  \multiput(280,207)(5,0){24}{\line(1,0){3}}
%  \put(420,225){\makebox(0,0)[l]{|headheight|}}
%  \put(418,225){\line(-2,-1){20}}
%  \put(420,213){\makebox(0,0)[l]{|headsep|}}
%  \put(418,213){\line(-2,-1){20}}
%  \put(420,12){\makebox(0,0)[l]{|footskip|}}
%  \put(418,12){\line(-2,1){20}}
%  \put(280,40){\makebox(120,140)[c]{\gpart{corps}}}
%  \put(305,45){\vector(-1,0){25}}\put(375,45){\vector(1,0){25}}
%  \put(80,230){\vector(0,-1){30}}\put(80,30){\vector(0,-1){30}}
%  \put(280,48){\makebox(120,0)[c]{|textwidth|}}
%  \put(280,15){\makebox(120,10)[c]{\gpart{pied de page}}}
%  \multiput(280,14)(5,0){24}{\line(1,0){2}}
%  \put(410,30){\dashbox{3}(30,170){}}
%  \put(412,30){\makebox(30,170)[l]{\gpart{note marginale}}}
%  \put(425,45){\vector(-1,0){15}}\put(425,45){\vector(1,0){15}}
%  \put(450,70){\makebox(0,0)[l]{|marginparsep|}}
%  \put(448,70){\line(-3,-1){43}}
%  \put(450,45){\makebox(0,0)[l]{|marginparwidth|}}
%  \end{picture}}
%  \caption[Noms des dimensions avec \Gm]{%
%  \begin{minipage}[t]{.8\textwidth}\raggedright\small
%  Noms des dimensions utilisées dans l'extension \Gm.
%  |width| $=$ |textwidth| et |height| $=$ |textheight| par défaut.
%  |left|, |right|, |top| et |bottom| sont des marges. 
%  Si les marges des pages au verso sont interverties par l'option |twoside|,
%  les marges spécifiées par les options |left| et |right| sont utilisées
%  pour les marges intérieures et extérieures respectivement.
%  |inner| et |outer| sont des alias pour |left| et |right| respectivement.
%  \end{minipage}}
%  \label{fig:layout}
% \end{figure}
%
% La largeur |width| et la hauteur |height| du corps total sont définies par :
% \begin{eqnarray}
%  \label{eq:width}
%  |width| &:=& |textwidth| \quad( +\>  |marginparsep| + |marginparwidth| )\\
%  |height| &:=& |textheight| \quad(+\> |headheight| + |headsep| + |footskip| )
%  \label{eq:height}
% \end{eqnarray}
% Dans l'\'{E}quation (\ref{eq:width}), |width| égale |textwidth| par
% défaut, tandis que |marginparsep| et |marginparwidth| sont inclus dans 
% |width| si l'option |includemp| est fixée à |true|. 
% Dans l'\'{E}quation (\ref{eq:height}), |height| égale |textheight| par
% défaut. Si |includehead| est fixée à |true|, |headheight| et |headsep| sont 
% considérées comme des parties de |height|.
% De la même manière, |includefoot| place |footskip| dans |height|. 
% La Figure~\ref{fig:includes} montre comment ces options fonctionnent 
% verticalement.
% \begin{figure}
%  \centering\small
%  {\unitlength=.65pt
%  \begin{picture}(490,280)(0,-10)
%  \put(60,250){\makebox(120,0)[bl]{\textbf{(a)}~\textit{par défaut}}}%
%  \put(20,0){\framebox(170,230){}}
%  \put(20,230){\makebox(170,15)[r]{\gpart{papier}}}
%  \begingroup\thicklines
%  \put(40,30){\framebox(120,165){}}\endgroup
%  \put(70,165){\vector(0,1){30}}
%  \put(55,145){\makebox(0,20)[lc]{|textheight|}}
%  \put(70,145){\vector(0,-1){115}}
%  \multiput(40,203)(5,0){24}{\line(1,0){3}}
%  \multiput(40,213)(5,0){24}{\line(1,0){3}}
%  \multiput(40,10)(5,0){24}{\line(1,0){3}}
%  \put(40,203){\makebox(120,20)[bc]{\gpart{en-tête}}}
%  \put(40,40){\makebox(120,140)[c]{\gpart{corps}}}
%  \put(40,11){\makebox(120,10)[c]{\gpart{pied de page}}}
%  \put(150,230){\vector(0,-1){35}}\put(150,30){\vector(0,-1){30}}
%  \put(150,195){\vector(0,1){35}}\put(150,0){\vector(0,1){30}}
%  \put(160,197){\makebox(0,30)[lc]{|top|}}
%  \put(160,0){\makebox(0,30)[lc]{|bottom|}}
%  \multiput(160,30)(5,0){24}{\line(1,0){2}}
%  \multiput(160,195)(5,0){24}{\line(1,0){2}}
%  \put(255,250){\makebox(120,0)[bl]
%      {\textbf{(b)}~|includehead| et |includefoot|}}%
%  \put(260,0){\framebox(170,230){}}
%  \put(260,230){\makebox(170,15)[r]{\gpart{papier}}}
%  \begingroup\thicklines
%  \put(280,30){\framebox(120,165){}}\endgroup
%  \put(310,152){\vector(0,1){25}}
%  \put(295,130){\makebox(0,20)[lc]{|textheight|}}
%  \put(310,130){\vector(0,-1){80}}
%  \multiput(280,184)(5,0){24}{\line(1,0){3}}
%  \multiput(280,177)(5,0){24}{\line(1,0){3}}
%  \multiput(280,50)(5,0){24}{\line(1,0){3}}
%  \put(280,184){\makebox(120,10)[c]{\gpart{en-tête}}}
%  \put(280,40){\makebox(120,140)[c]{\gpart{corps}}}
%  \put(400,140){\line(1,1){45}}
%  \put(437,187){\makebox(50,10)[l]{\gpart{corps total}}}
%  \put(280,31){\makebox(120,10)[c]{\gpart{pied de page}}}
%  \put(370,230){\vector(0,-1){35}}\put(370,30){\vector(0,-1){30}}
%  \put(370,195){\vector(0,1){35}}\put(370,0){\vector(0,1){30}}
%  \put(380,197){\makebox(0,30)[lc]{|top|}}
%  \put(380,0){\makebox(0,30)[lc]{|bottom|}}
%  \end{picture}}
%  \caption[Effet de \texttt{includehead} et \texttt{includefoot}.]{%
%  \begin{minipage}[t]{.8\textwidth}\raggedright\small
%    |includehead| et |includefoot| incluent respectivement l'en-tête et le 
%    pied de page dans le \gpart{corps total}. \textbf{(a)} |height| $=$ 
%    |textheight| (par défaut).
%    \textbf{(b)} |height| $=$ |textheight| $+$ |headheight| $+$ |headsep| $+$ 
%    |footskip| si |includehead| et |includefoot| valent |true|. Si les marges
%    haute et basse sont spécifiées, |includehead| et |includefoot| conduisent 
%    à un |textheight| plus court.
%  \end{minipage}}
%  \label{fig:includes}
% \end{figure}
%
% Ainsi, le gabarit se décompose en trois parties (longueurs) dans
% chaque direction: un corps et deux marges. Si deux d'entre elles sont 
% explicitement spécifiées, l'autre longueur est alors évidente et n'a pas
% besoin d'être spécifiée. La Figure~\ref{fig:Labc} montre un modèle simple
% de dimensions d'une page. Quand une longueur |L| est donnée et est décomposée
% entre le corps |b|, les marges |a| et |c|, il est évident que
% \begin{equation}
%   |L|=|a|+|b|+|c|  \label{eq:Labc}
% \end{equation}
%
% Une spécification avec deux des trois longueurs (|a|,|b| et |c|) fixées 
% explicitement peut être résolue. Si deux longueurs ou plus sont non
% spécifiées ou \og sous-spécifiées \fg{}, l'\'{E}quation~(\ref{eq:Labc})
% ne peut être résolue sans une autre relation entre elles. Si elles sont 
% toutes spécifiées, autrement dit trop spécifiées ou \og sur-spécifiées 
% \fg{}, alors nous devons vérifier si elles satisfont ou pas 
% l'\'{E}quation~(\ref{eq:Labc}).
% \begin{figure}
%  \centering
%  {\unitlength=0.8pt
%  \begin{picture}(300,60)(0,-5)
%  \begingroup\linethickness{5pt}
%  \put(0,5){\textcolor{green}{\line(1,0){60}}}
%  \put(60,5){\textcolor{black}{\line(1,0){160}}}
%  \put(220,5){\textcolor{green}{\line(1,0){80}}}
%  \endgroup
%  \put(0,15){\makebox(60,10)[b]{|a|}}
%  \put(60,0){\line(0,1){20}}
%  \put(60,15){\makebox(160,10)[b]{|b|}}
%  \put(220,0){\line(0,1){20}}
%  \put(220,15){\makebox(80,10)[b]{|c|}}
%  \put(0,0){\line(0,1){50}}
%  \put(150,35){\vector(-1,0){150}}
%  \put(0,40){\makebox(300,10){|L|}}
%  \put(150,35){\vector(1,0){150}}
%  \put(300,0){\line(0,1){50}}
%  \end{picture}}
%  \caption{Un modèle simple des dimensions de la page.}
%  \label{fig:Labc}
% \end{figure}
%
% L'extension \Gm\ dispose d'un mécanisme d'autocomplétion qui évite les
% problèmes liés à la spécification des dimensions de la mise en page. Par
% exemple, vous pouvez retenir
% \begin{quote}
%  |\usepackage[width=14cm, left=3cm]{geometry}|
% \end{quote}
% sur papier A4. Dans ce cas, nous n'avez pas à définir la marge droite. Les
% détails de cette autocomplétion sont décrits dans la
% Section~\ref{sec:rules}.
%
% \section{Interface utilisateur}
%
% \subsection{Commandes}
%
% L'extension \Gm\ propose les commandes suivantes :
% \begin{itemize}\setlength{\itemsep}{-.5\parsep}
%  \item |\geometry{|\meta{options}|}|
%  \item |\newgeometry{|\meta{options}|}| et |\restoregeometry|
%  \item |\savegeometry{|\meta{nom}|}| et |\loadgeometry{|\meta{nom}|}|
% \end{itemize}
%
% |\geometry{|\meta{options}|}|
% change la mise en page selon les options spécifiées en argument. Cette 
% commande doit être placée uniquement dans le préambule (avant 
% |\begin{document}|).
% 
% L'extension \Gm\ peut être utilisée comme une partie d'une classe ou d'une
% autre extension que vous utilisez dans votre document. La commande
% \cs{geometry} peut écraser certains réglages dans l'en-tête. L'utilisation
% de plusieurs \cs{geometry} est autorisée et conduit à un traitement de 
% l'ensemble des options concaténées. Si \Gm\ n'est pas encore chargé, vous
% pouvez seulement utiliser 
% |\usepackage[|\meta{options}|]{geometry}| au lieu de \cs{geometry}.
%
% \medskip
% |\newgeometry{|\meta{options}|}|
% change la mise en page en cours de document. \cs{newgeometry} est
% similaire à \cs{geometry} à ceci près que \cs{newgeometry} annule toutes
% les options spécifiées par \cs{usepackage} et \cs{geometry} en préambule
% et ne gère pas les options liées à la taille du papier. 
% \cs{restoregeometry}
% restaure la mise en page spécifiée dans le préambule. Cette commande n'a pas
% d'argument. Voir la Section~\ref{sec:midchange} pour plus d'informations.
%
% \medskip
% |\savegeometry{|\meta{nom}|}|
% sauvegarde sous le nom \meta{nom} les dimensions de la page utilisées à
% l'endroit où la commande est placée.
% |\loadgeometry{|\meta{nom}|}|
% charge les dimensions de la page sauvegardées sous le nom \meta{nom}. Voir
% la Section~\ref{sec:midchange} pour plus d'informations.
%
% \subsection{Argument optionnel}
%
% L'extension \Gm\ adopte l'interface \textsf{keyval} 
% \og \meta{clé}=\meta{valeur} \fg{} pour l'argument optionnel de 
% \cs{usepackage}, \cs{geometry} et \cs{newgeometry}.
% 
% L'argument inclut une liste d'options \textsf{keyval} séparées par des
% virgules et a les règles de base suivantes :
% \begin{itemize}\setlength{\itemsep}{-.5\parsep}
% \item des lignes multiples sont autorisées mais pas les lignes vides ;
% \item les espaces entre les mots sont ignorés ;
% \item les options sont traitées indépendamment de leur ordre de saisie.
% (Il y a ici quelques exceptions. Voir la Section~\ref{sec:optionorder} pour
% plus d'informations.)
% \end{itemize}
%  Par exemple,
% \begin{quote}
% |\usepackage[ a5paper ,  hmargin = { 3cm,|\\
% |                .8in } , height|\\
% |         =  10in ]{geometry}|
% \end{quote}
% est équivalent à 
% \begin{quote}
%   |\usepackage[height=10in,a5paper,hmargin={3cm,0.8in}]{geometry}|
% \end{quote}
% Certaines options sont autorisées à présenter une sous-liste, par exemple
% |{3cm,0.8in}|. Notez que l'ordre des valeurs dans la sous-liste est 
% significatif. Le réglage ci-dessus est équivalent aux suivants :
% \begin{quote}
%   |\usepackage{geometry}|\\
%   |\geometry{height=10in,a5paper,hmargin={3cm,0.8in}}|
% \end{quote}
% ou 
% \begin{quote}
%   |\usepackage[a5paper]{geometry}|\\
%   |\geometry{hmargin={3cm,0.8in},height=8in}|\\
%   |\geometry{height=10in}|.
% \end{quote}
% Ainsi, l'utilisation de plusieurs \cs{geometry} cumule juste les options.
%
% \Gm\ supporte l'extension 
% \textsl{calc}\footnote{CTAN:~\texttt{macros/latex/required/tools}.}.
% Par exemple,
% \begin{quote}
%   |\usepackage{calc}|\\
%   |\usepackage[textheight=20\baselineskip+10pt]{geometry}|
% \end{quote}
%
% \subsection{Types d'option}
% Les options de \Gm\ sont réparties en quatre types :
%
% \begin{enumerate}\itemsep=0pt
% \item \textbf{Type booléen}
%
%    prend une valeur booléenne (vrai avec |true| ou faux avec |false|). En
%    l'absence de valeur, |true| est sélectionné par défaut.
%    \begin{quote}
%       \meta{clé}|=true|\OR|false|.\\
%       \meta{clé} sans valeur est équivalent à \meta{clé}|=true|.
%    \end{quote}
%    \textit{Exemples:}~ |verbose=true|, |includehead|, 
%    |twoside=false|.\\
%    Le format (ou nom) du papier est ici l'exception. Le format du papier 
%    désiré devrait être mis sans valeur. Quelle que soit la valeur donnée, 
%    elle est ignorée. Par exemple, |a4paper=XXX| est équivalent à |a4paper|.
%
% \item \textbf{Type à valeur unique}
%
%    prend une valeur obligatoire.
%    \begin{quote}
%    \meta{clé}|=|\meta{valeur}.
%    \end{quote}
%    \textit{Exemples:}~ |width=7in|, |left=1.25in|,
%    |footskip=1cm|, |height=.86\paperheight|.
%
% \item \textbf{Type à valeur double}
%
%    prend une paire de valeurs obligatoires séparées par une virgule et
%    regroupées entre accolades. Les deux valeurs peuvent être réduites à 
%    une valeur unique si elles sont identiques.
%    \begin{quote}
%    \meta{clé}|=|\argii{valeur1}{valeur2}.\\
%    \meta{clé}|=|\meta{valeur} est équivalent à 
%              \meta{clé}|=|\argii{valeur}{valeur}.
%    \end{quote}
%    \textit{Exemples:}~ |hmargin={1.5in,1in}|, |scale=0.8|,
%    |body={7in,10in}|.
%
% \item \textbf{Type à triple valeur}
%
%    prend trois valeurs obligatoires séparées par une virgule et
%    regroupées entre accolades.
%    \begin{quote}
%    \meta{clé}|=|\argiii{valeur1}{valeur2}{valeur3}
%    \end{quote}
%    Chaque valeur doit être une dimension ou être nulle. Quand vous indiquez
%    une valeur vide ou \og|*|\fg{}, cela laisse la valeur souhaitée aux bons
%    soins du mécanisme d'autocomplétion. Vous devez spécifier au moins une
%    dimension, typiquement deux dimensions. Vous pouvez indiquer des vides 
%    ou \og|*|\fg{} pour toutes les valeurs mais cela n'a pas de sens.
% \textit{Exemples:}\\
%    \hspace*{2em} |hdivide={2cm,*,1cm}|, |vdivide={3cm,19cm, }|,
%                   |divide={1in,*,1in}|.
% \end{enumerate}
%
% \section{Détail des options}
%
% Cette section décrit toutes les options disponibles dans \Gm. Les options
% avec une dague $^\dagger$ ne sont pas disponibles comme argument de 
% \cs{newgeometry} (voir la Section~\ref{sec:midchange}).
%
% \subsection{Taille du papier}\label{sec:paper}
% 
% Les options ci-dessous définissent la taille du papier/médium et son
% orientation.
% \begin{Options}
% \item[\onlypre paper\OR papername] ~\\ 
%  spécifie la taille du papier par son nom ou son format. 
%  |paper=|\meta{format}. Par simplification, vous pouvez spécifier cette
%  taille sans |paper=|. Par exemple, |a4paper| est équivalent à 
%  |paper=a4paper|.
% \item[\onlypre \vtop{
%  \hbox{a0paper, a1paper, a2paper, a3paper, a4paper, a5paper, a6paper,}
%  \hbox{b0paper, b1paper, b2paper, b3paper, b4paper, b5paper, b6paper,}
%  \hbox{c0paper, c1paper, c2paper, c3paper, c4paper, c5paper, c6paper,}
%  \hbox{b0j, b1j, b2j, b3j, b4j, b5j, b6j,} 
%  \hbox{ansiapaper, ansibpaper, ansicpaper, ansidpaper, ansiepaper,}
%  \hbox{letterpaper, executivepaper, legalpaper}}]~\\[1ex] 
%    spécifie le format du papier.  La valeur assignée à cette option est 
%    toujours ignorée. Par exemple, les cas suivants ont le même effet :
%    |a5paper|, |a5paper=true|, |a5paper=false| et ainsi de suite.
%   |a[0-6]paper|, |b[0-6]paper| et |c[0-6]paper| sont les formats ISO A, 
%   B et C respectivement.
%   Les formats JIS (Japanese Industrial Standards) A sont identiques aux 
%   formats ISO A mais les formats JIS B sont différents des formats ISO B.
%   |b[0-6]j| doit être utilisé pour les formats JIS B. 
% \item[\onlypre screen] un format spécial avec (L,H) = (225mm,180mm).
%    Pour les présentations sur ordinateur ou pour projecteur, 
%    \og |screen,centering| \fg{} avec la classe de document \og slide \fg{}
%    devrait être utile.
% \item[\onlypre paperwidth] largeur du papier. |paperwidth=|\meta{longueur}.
% \item[\onlypre paperheight] hauteur du papier. |paperheight=|\meta{longueur}.
% \item[\onlypre papersize] largeur et hauteur du papier. 
%    |papersize=|\argii{largeur}{hauteur} ou |papersize=|\meta{longueur}.
% \item[\onlypre landscape] bascule l'orientation du papier en mode paysage.
% \item[\onlypre portrait] bascule l'orientation du papier en mode portrait.
%    Ceci est équivalent à |landscape=false|.
% \end{Options}
%
% Les options de format de papier (telle |a4paper|) et d'orientation
% (|portrait| et |landscape|) peuvent être déclarées dans les options de la
% classe du document. Par exemple, si vous utilisez 
%    \begin{quote}
%    |\documentclass[a4paper,landscape]{article}|
%    \end{quote}
% alors |a4paper| et |landscape| seront traités dans \Gm\ également.
% C'est également le cas pour |twoside| et |twocolumn|
% (voir également la Section~\ref{sec:dimension}).
%
% \subsection{Taille du gabarit}
%
%  Vous pouvez spécifier le gabarit (ou zone de mise en page) avec les options
%  décrites dans cette section indépendamment de la taille du papier.
%  Ces options aident à imprimer un gabarit spécifique sur un papier de taille
%  différente. Par exemple, avec |a4paper| et |layout=a5paper|, l'extension
%  utilise le gabarit format A5 pour calculer les marges sur un papier 
%  format A4. La taille du gabarit est par défaut celle du papier. Les
% options pour la taille du gabarit sont disponibles dans \cs{newgeometry},
%  de telle manière à ce que vous puissiez changer la taille du gabarit en
%  cours de document. La taille du papier ne peut cependant être modifiée.
%  La Figure~\ref{fig:layoutandpaper} montre la différence entre |layout| et
%  |paper|.
% \begin{Options}
% \item[layout] spécifie la taille du gabarit par nom de format. 
%  |layout=|\meta{format}. Tous les formats de papier définis dans \Gm\ sont
%  disponibles. Voir la Section~\ref{sec:paper} pour plus d'informations.
% \item[layoutwidth] largeur du gabarit. |layoutwidth=|\meta{longueur}.
% \item[layoutheight] hauteur du gabarit. |layoutheight=|\meta{longueur}.
% \item[layoutsize] largeur et hauteur du gabarit.
%    |layoutsize=|\argii{largeur}{hauteur} ou |layoutsize=|\meta{longueur}.
% \item[layouthoffset] spécifie le décalage horizontal du gabarit par rapport
% au bord gauche du papier. |layouthoffset=|\meta{longueur}.
% \item[layoutvoffset] spécifie le décalage vertical du gabarit par rapport 
% au bord haut du papier. |layoutvoffset=|\meta{longueur}.
% \item[layoutoffset] spécifie le décalage horizontal et le décalage vertical. 
%  |layoutoffset=|\argii{décalage-h}{décalage-v} ou |layoutsize=|\meta{longueur}.
% \end{Options}
% \begin{figure}
%  \centering\small
%  {\unitlength=.6pt
%  \begin{picture}(450,250)(0,-10)
%  \put(20,0){\makebox(168,12)[r]{\gpart{papier}}}
%  \put(20,0){\framebox(170,230){}}
%  \put(21,40){\dashbox{3}(140,189){}}
%  \put(21,28){\makebox(140,12)[r]{\gpart{gabarit}}}
%  \put(40,50){\makebox(100,10){\gpart{pied de page}}}
%  \put(40,50){\line(1,0){100}}
%  \put(40,65){\framebox(100,125){\gpart{corps}}}
%  \put(40,200){\framebox(100,10){\gpart{en-tête}}}
%  \put(20,230){\makebox(140,20){|layoutwidth|}}
%  \put(40,240){\vector(-1,0){20}}
%  \put(140,240){\vector(1,0){20}}
%  \put(10,145){\vector(0,1){85}}
%  \put(15,125){\makebox(0,20)[r]{|layoutheight|}}
%  \put(10,125){\vector(0,-1){85}}
%  \put(280,0){\makebox(168,12)[r]{\gpart{papier}}}
%  \put(280,0){\framebox(170,230){}}
%  \put(293,35){\dashbox{3}(140,189){}}
%  \put(293,23){\makebox(140,12)[r]{\gpart{gabarit}}}
%  \put(312,45){\makebox(100,10){\gpart{pied de page}}}
%  \put(312,45){\line(1,0){100}}
%  \put(312,60){\framebox(100,125){\gpart{corps}}}
%  \put(312,195){\framebox(100,10){\gpart{en-tête}}}
%  \put(235,230){\makebox(80,20)[l]{|layouthoffset|}}
%  \put(260,210){\vector(1,0){20}}
%  \put(308,210){\vector(-1,0){15}}
%  \put(260,210){\line(-1,2){10}}
%  \put(355,230){\makebox(100,20){|layoutvoffset|}}
%  \put(350,250){\vector(0,-1){20}}
%  \put(350,209){\vector(0,1){15}}
%  \end{picture}}
%  \caption[gabarit et papier]{%
%  \begin{minipage}[t]{.7\textwidth}\raggedright\small
%  Les dimensions liées à la taille du gabarit. Notez que la taille du gabarit
%  est par défaut celle du papier, ce qui fait que vous n'avez pas à spécifier
%  explicitement les options liées au gabarit la plupart du temps.
%  \end{minipage}}
%  \label{fig:layoutandpaper}
% \end{figure}
% 
% \subsection{Taille du corps}\label{sec:body}
%
% Les options spécifiant la taille du \gpart{corps total} sont décrites
% dans cette section.
%

% \begin{Options}
% \item[hscale]
%    rapport entre la largeur du \gpart{corps total} et \cs{paperwidth} 
%    noté |hscale=|\meta{rapport-h}. Par exemple, |hscale=0.8| est équivalent à 
%    |width=0.8|\cs{paperwidth}. (|0.7| par défaut)
% \item[vscale]
%    rapport entre la largeur du \gpart{corps total} et \cs{paperheight}
%    noté |vscale=|\meta{rapport-v}. Par exemple, |vscale=0.9| est équivalent à
%    |height=0.9|\cs{paperheight}. (|0.7| par défaut)
% \item[scale] rapport de taille entre le \gpart{corps total} et le papier.
%    |scale=|\argii{rapport-h}{rapport-v} ou |scale=|\meta{rapport}.
%    (|0.7| par défaut)
% \item[width\OR totalwidth] ~\\
%    largeur du \gpart{corps total}. |width=|\meta{longueur} ou
%    |totalwidth=|\meta{longueur}. Cette dimension vaut par défaut 
%    |textwidth|, mais si |includemp| vaut |true|, |width| $\ge$ |textwidth| 
%    car |width| inclut la largeur de la note marginale.
%    Si |textwidth| et |width| sont spécifiés en même temps, 
%    |textwidth| est prioritaire par rapport à |width|.
% \item[height\OR totalheight] ~\\
%    hauteur du \gpart{corps total}, excluant l'en-tête et le pied de page
%    par défaut. Si |includehead| ou |includefoot| est sélectionné, |height|
%    inclut l'en-tête ou le pied de page tout comme il contient |textheight|.
%    |height=|\meta{longueur} ou |totalheight=|\meta{longueur}. Si 
%    |textheight| et |height| sont spécifiés en même temps, |height| sera
%    ignoré.
% \item[total] largeur et hauteur du \gpart{corps total}.\\
%    |total=|\argii{largeur}{hauteur} ou |total=|\meta{longueur}.
% \item[textwidth] spécifie \cs{textwidth}, la largeur du \gpart{corps} 
%    (la zone de texte). |textwidth=|\meta{longueur}.
% \item[textheight] spécifie \cs{textheight}, la hauteur du \gpart{corps} 
%    (la zone de texte). |textheight=|\meta{longueur}.
% \item[text\OR body] spécifie à la fois \cs{textwidth} et \cs{textheight}
%    du \gpart{corps} de la page. |body=|\argii{largeur}{hauteur} ou
%    |text=|\meta{longueur}.
% \item[lines] permet à l'utilisateur de spécifier \cs{textheight} par un
%    nombre de lignes. |lines|=\meta{nombre-entier}.
% \item[includehead] inclut l'en-tête de la page, \cs{headheight}
%    et \cs{headsep}, dans le \gpart{corps total}. Cette option vaut
%    |false| par défaut. Elle s'oppose à |ignorehead|. Voir la
%    Figure~\ref{fig:includes} et la Figure~\ref{fig:modes}.
% \item[includefoot] inclut le pied de page, \cs{footskip},
%    dans le \gpart{corps total}. Cette option vaut |false| par
%    défaut. Elle s'oppose à |ignorefoot|. Voir la Figure~\ref{fig:includes}
%    et la Figure~\ref{fig:modes}.
% \item[includeheadfoot]~\\ 
%    fixe |includehead| et |includefoot| à |true|, ce qui est l'opposé de 
%    |ignoreheadfoot|. Voir la Figure~\ref{fig:includes} et la 
%    Figure~\ref{fig:modes}.
% \item[includemp] inclut la note marginale,  \cs{marginparwidth}
%    and \cs{marginparsep}, dans le \gpart{corps} lors de calculs 
%    d'éléments horizontaux.
% \item[includeall] fixe |includeheadfoot| et |includemp| à |true|. Voir la
%    Figure~\ref{fig:modes}.
% \item[ignorehead] ne tient pas compte de l'en-tête, |headheight| et 
%    |headsep|, dans la détermination de la mise en page verticale, mais ne
%    change pas ces longueurs. Cette option est équivalente à 
%    |includehead=false|. Elle vaut |true| par défaut. Voir aussi
%    |includehead|.
% \item[ignorefoot] ne tient pas compte du pied de page, |footskip|,
%    dans la détermination de la mise en page verticale, mais ne change
%    pas cette longueur. Cette option vaut |true| par défaut.
%    Voir aussi |includefoot|.
% \item[ignoreheadfoot]~\\ fixe |ignorehead| et |ignorefoot| à |true|. Voir
%    aussi |includeheadfoot|.
% \item[ignoremp] ne tient pas compte de la note marginale dans la
%    détermination des marges horizontales (la valeur par défaut étant |true|).
%    Si la note marginale dépasse de la page, un message d'alerte sera 
%    affiché lorsque |verbose=true|. Voir aussi |includemp| et la 
%    Figure~\ref{fig:modes}.
% \item[ignoreall] fixe |ignoreheadfoot| et |ignoremp| à |true|. 
%    Voir aussi |includeall|.
% \item[heightrounded]~\\
%    Cette option arrondit \cs{textheight} à \textit{n} fois (\textit{n}:
%    un entier) \cs{baselineskip} plus \cs{topskip} pour éviter l'erreur
%    \og \emph{underfull vbox} \fg{} dans certains cas. Par exemple, si 
%    \cs{textheight} vaut 486pt avec \cs{baselineskip} à 12pt et \cs{topskip} 
%    à 10pt, alors 
%    \begin{quote}
%      $(39\times12\textrm{pt}+10\textrm{pt}=)\: 478\textrm{pt}
%       < 486\textrm{pt} < 
%      490\textrm{pt} \:(=40\times12\textrm{pt}+10\textrm{pt})$,
%    \end{quote}
%    Ici, \cs{textheight} est au final arrondi à 490pt. |heightrounded| vaut 
%    |false| par défaut.
% \end{Options}
%
% La Figure~\ref{fig:modes} illustre différents modes de mise en page du corps
% intégral. Les dimensions pour l'en-tête et le pied de page peuvent être 
% contrôlées respectivement par les modes |nohead| ou |nofoot|, fixant chaque
% hauteur à 0pt directement. Par ailleurs, les options avec le préfixe |ignore|
% \emph{ne changent pas} les dimensions de base correspondantes.
% \begin{figure}
%  \centering\small
%  {\unitlength=.65pt
%  \begin{picture}(460,525)(0,0)
%  \put( 20,310){\framebox(120,170){}}
%  \put( 20,507){\makebox(120,0)[bl]%
%  {\textbf{(a)}~|includeheadfoot|}}
%  \put( 20,460){\line(1,0){120}}\put( 20,450){\line(1,0){120}}
%  \put( 20,330){\line(1,0){120}}
%  \put( 20,485){\makebox(120,0)[br]{\gpart{corps total}}}
%  \put( 20,335){\makebox(120,0)[bc]{|textwidth|}}
%  \put(150,470){\makebox(0,0)[l]{|headheight|}}
%  \put(150,450){\makebox(0,0)[l]{|headsep|}}
%  \put(150,390){\makebox(0,0)[l]{|textheight|}}
%  \put(150,320){\makebox(0,0)[l]{|footskip|}}
%  \put( 10,460){\makebox(120,20)[bc]{\gpart{en-tête}}}
%  \put( 10,320){\makebox(120,140)[c]{\gpart{corps}}}
%  \put( 10,310){\makebox(120,10)[c]{\gpart{pied de page}}}
%  \put(250,310){\framebox(120,170){}}
%  \put(250,507){\makebox(120,0)[bl]%
%  {\textbf{(b)}~|includeall|}}
%  \put(250,460){\line(1,0){95}}\put(250,450){\line(1,0){95}}
%  \put(250,330){\line(1,0){95}}\put(345,330){\line(0,1){120}}
%  \put(350,330){\line(0,1){120}}\put(350,450){\line(1,0){20}}
%  \put(350,330){\line(1,0){20}}
%  \put(250,485){\makebox(120,0)[br]{\gpart{corps total}}}
%  \put(250,460){\makebox(95,20)[bc]{\gpart{en-tête}}}
%  \put(250,320){\makebox(95,140)[c]{\gpart{corps}}}
%  \put(385,390){\makebox(95,0)[cl]%
%  {\gpart{\shortstack[l]{note\\marginale}}}}
%  \put(250,310){\makebox(95,10)[c]{\gpart{pied de page}}}
%  \put(250,335){\makebox(95,0)[bc]{|textwidth|}}
%  \multiput(360, 390)(4,0){6}{\line(1,0){2}}
%  \multiput(348,333)(0,-4){12}{\line(0,1){2}}
%  \multiput(360,333)(0,-4){8}{\line(0,1){2}}
%  \put(355,292){\makebox(0,0)[bl]{|marginparwidth|}}
%  \put(345,275){\makebox(0,0)[bl]{|marginparsep|}}
%  \put( 20, 40){\framebox(120,170){}}
%  \put( 20,237){\makebox(120,0)[bl]%
%  {\textbf{(c)}~|includefoot|}}
%  \put( 20, 60){\line(1,0){120}}
%  \put( 20,215){\makebox(120,0)[br]{\gpart{corps total}}}
%  \put(150,130){\makebox(0,0)[l]{|textheight|}}
%  \put(150, 50){\makebox(0,0)[l]{|footskip|}}
%  \put( 20, 50){\makebox(120,160)[c]{\gpart{corps}}}
%  \put( 20, 40){\makebox(120,10)[c]{\gpart{pied de page}}}
%  \put( 20, 65){\makebox(120,10)[c]{|textwidth|}}
%  \put(250, 40){\framebox(120,170){}}
%  \put(250,237){\makebox(120,0)[bl]%
%  {\textbf{(d)}~|includefoot,includemp|}}
%  \put(250, 60){\line(1,0){95}}\put(350, 60){\line(1,0){20}}
%  \put(250,215){\makebox(120,0)[br]{\gpart{corps total}}}
%  \put(250, 50){\makebox(95,160)[c]{\gpart{corps}}}
%  \put(385,130){\makebox(95,0)[cl]%
%  {\gpart{\shortstack[l]{note\\marginale}}}}
%  \put(250, 40){\makebox(95,10)[c]{\gpart{pied de page}}}
%  \put(250, 65){\makebox(95,0)[bc]{|textwidth|}}
%  \put(345, 60){\line(0,1){150}}\put(350, 60){\line(0,1){150}}
%  \multiput(360, 130)(4,0){6}{\line(1,0){2}}
%  \multiput(348, 63)(0,-4){12}{\line(0,1){2}}
%  \multiput(360, 63)(0,-4){8}{\line(0,1){2}}
%  \put(355,22){\makebox(0,0)[bl]{|marginparwidth|}}
%  \put(345, 5){\makebox(0,0)[bl]{|marginparsep|}}
%  \end{picture}}
%  \caption[Exemples de mise en page avec différents modes de traitement
%    du \gpart{corps total}]{%
%  \begin{minipage}[t]{.8\textwidth}\small
%    Exemples de mise en page avec différents modes de présentation du \gpart{corps total}
%    (a) |includeheadfoot|, (b) |includeall|, (c) |includefoot|
%     et (d) |includefoot,includemp|. 
%    Si |reversemp| est mis à |true|, l'emplacement de la note marginale 
%    est interverti sur chaque page. L'option |twoside| intervertit à la fois
%    les marges et les notes marginales sur les pages au verso. Notez que la 
%    note marginale, si elle existe, est composée malgré |ignoremp| ou
%    |includemp=false| et dépasse de la page dans certains cas.
%  \end{minipage}}
%  \label{fig:modes}
% \end{figure}
%
% Les options suivantes peuvent spécifier le corps et les marges
% simultanément avec, entre accolades, trois valeurs séparées par des virgules.
%
% \begin{Options}
% \item[hdivide] répartition horizontale (marge gauche, largeur, marge droite).
%   |hdivide=|\argiii{marge-gauche}{largeur}{marge-droite}.
%   Notez que vous n'avez pas besoin de spécifier l'ensemble des trois 
%   paramètres. La meilleure façon d'utiliser cette option est de spécifier
%   deux paramètres seulement en laissant le dernier vide ou renseigné à 
%   \og |*| \fg{}. Par exemple, quand vous saisissez |hdivide={2cm,15cm, }|,
%   la marge partant du bord droit de la page sera déterminée par le calcul
%   de |paperwidth-2cm-15cm|.
% \item[vdivide] répartition verticale (marge haute, hauteur, marge basse).
%   |vdivide=|\argiii{marge-haute}{hauteur}{marge-basse}.
% \item[divide] |divide=|\vargiii{$A$}{$B$}{$C$} est interprété comme 
%   |hdivide=|\vargiii{$A$}{$B$}{$C$} et |vdivide=|\vargiii{$A$}{$B$}{$C$}.
% \end{Options}
%
% \subsection{Taille des marges}\label{sec:margin}
%
% Les options spécifiant la taille des marges sont listées ci-dessous.
%
% \begin{Options}
% \item[left\OR lmargin\OR inner]~\\
%    marge gauche (pour du recto uniquement en mode \emph{oneside}) ou
%    marge intérieure (pour du recto-verso en mode \emph{twoside}) du 
%    \gpart{corps total}. En d'autres termes, la distance entre le
%    bord gauche (intérieur) du papier et celui du \gpart{corps total}. 
%    |left=|\meta{longueur}.
%    |inner| n'a pas de sens particulier, n'étant qu'un alias de |left| et
%    |lmargin|.
% \item[right\OR rmargin\OR outer]~\\ 
%    marge droite ou extérieure du \gpart{corps total}. 
%   |right=|\meta{longueur}.
% \item[top\OR tmargin] marge haute de la page. |top=|\meta{longueur}.
%    Notez que cette option n'a rien à voir avec la dimensions de base 
%    \cs{topmargin}.
% \item[bottom\OR bmargin]~\\ 
%    marge basse de la page. |bottom=|\meta{longueur}.
% \item[hmargin] marges gauche et droite.
%   |hmargin=|\argii{marge-gauche}{marge-droite} ou |hmargin=|\meta{longueur}.
% \item[vmargin] marges haute et basse.
%   |vmargin=|\argii{marge-haute}{marge-basse} ou |vmargin=|\meta{longueur}.
% \item[margin] |margin=|\vargii{$A$}{$B$} est équivalent à 
%   |hmargin=|\vargii{$A$}{$B$} et |vmargin=|\vargii{$A$}{$B$}.
%   |margin=|$A$ est automatiquement développé en |hmargin=|$A$ et 
%   |vmargin=|$A$.
% \item[hmarginratio]
%   rapport entre la marge horizontale de gauche (intérieure) et celle de
%   droite (extérieure). La valeur du \meta{rapport} doit être spécifiée
%   par deux valeurs séparées par deux points. Chaque valeur devrait être un
%   entier positif inférieur à 100 pour éviter les dépassements de calculs
%   arithmétiques, par exemple |2:3| au lieu de |1:1.5|. Le rapport par 
%   défaut est |1:1| pour du mode recto uniquement, |2:3| pour du mode 
%   recto-verso.
% \item[vmarginratio]
%   rapport entre les marges verticales |top| et |bottom|. Le rapport par
%   défaut est |2:3|.
% \item[marginratio\OR ratio]~\\
%   rapport pour les marges horizontales et verticales.
%   |marginratio=|\argii{rapport-horizontal}{rapport-vertical} ou
%   |marginratio=|\meta{rapport}.
% \item[hcentering] centre horizontalement et est équivalent
%   à |hmarginratio=1:1|. Cette option est mise à |true| par défaut pour
%   du mode recto uniquement (oneside). Voir aussi |hmarginratio|.
% \item[vcentering] centre verticalement et est équivalent
%   à |vmarginratio=1:1|. La valeur par défaut est |false|.
%   Voir aussi |vmarginratio|.
% \item[centering] centre horizontalement et verticalement et est équivalent 
%   à |marginratio=1:1|. La valeur par défaut est |false|.
%   Voir aussi |marginratio|.
% \item[twoside] bascule en mode recto-verso avec les marges gauche et droite
%   interverties sur les pages au verso. L'option active les bascules 
%   \cs{@twoside} et \cs{@mparswitch}. Voir aussi |asymmetric|.
% \item[asymmetric] implémente une mise en page recto-verso dans laquelle les
%   marges ne sont pas interverties pour chaque verso (en définissant 
%   \cs{oddsidemargin} comme \cs{evensidemargin} |+| |bindingoffset|) et
%   dans laquelle les notes marginales restent toujours du même côté. Cette
%   option peut être utilisée comme une alternative à l'option |twoside|. 
%   Voir aussi |twoside|.
% \item[bindingoffset]~\\ retranche un espace défini du côté gauche de la page
%   en mode recto uniquement et du côté intérieur en mode recto-verso.
%   |bindingoffset=|\meta{longueur}. Ceci est utile si les pages sont traitées 
%   avec une méthode de reliure (qu'elles soient collées, cousues, agrafées
%   \ldots) en permettant de définir la zone perdue du fait de la reliure.
%   Voir Figure~\ref{fig:bindingoffset}.
% \item[hdivide] Voir la description en Section~\ref{sec:body}.
% \item[vdivide] Voir la description en Section~\ref{sec:body}.
% \item[divide] Voir la description en Section~\ref{sec:body}.
% \end{Options}
% \begin{figure}
%  \centering\small
%  {\unitlength=.65pt
%  \begin{picture}(500,270)(0,0)
%  \put(20,0){\framebox(170,230){}}
%  \put(20,255){\makebox(80,20)[l]{\textbf{a)}~pages en recto uniquement,}}
%  \put(20,240){\makebox(80,20)[l]{\hspace{3.3ex}pages impaires en recto-verso}}
%  \put(110,225){\makebox(80,20)[r]{\gpart{papier}}}
%  \put(55,37){\framebox(110,170)[tc]{\gpart{corps total}}}
%  \multiput(38,0)(0,7){33}{\line(0,1){4}}
%  \put(38,100){\vector(1,0){17}}\put(55,100){\vector(-1,0){17}}
%  \put(60,95){\makebox(80,10)[l]{|left|}}
%  \put(60,80){\makebox(80,10)[l]{(|inner|)}}
%  \put(165,100){\vector(1,0){25}}\put(190,100){\vector(-1,0){25}}
%  \put(195,95){\makebox(80,10)[l]{|right|}}
%  \put(195,80){\makebox(80,10)[l]{(|outer|)}}
%  \put(20,16){\vector(1,0){18}}
%  \put(45,10){\makebox(80,10)[bl]{|bindingoffset|}}
%  \put(280,255){\makebox(80,20)[l]{\textbf{b)}~pages paires (ou revers)}}
%  \put(280,240){\makebox(80,20)[l]{\hspace{3.7ex}en recto-verso}}
%  \put(280,0){\framebox(170,230){}}
%  \put(370,225){\makebox(80,20)[r]{\gpart{papier}}}
%  \put(305,37){\framebox(110,170)[tc]{\gpart{corps total}}}
%  \multiput(432,0)(0,7){33}{\line(0,1){4}}
%  \put(280,100){\vector(1,0){25}}\put(305,100){\vector(-1,0){25}}
%  \put(310,95){\makebox(80,10)[l]{|outer|}}
%  \put(310,80){\makebox(80,10)[l]{(|right|)}}
%  \put(415,100){\vector(1,0){17}}\put(432,100){\vector(-1,0){17}}
%  \put(373,95){\makebox(80,10)[l]{|inner|}}
%  \put(373,80){\makebox(80,10)[l]{(|left|)}}
%  \put(450,16){\vector(-1,0){18}}
%  \put(330,10){\makebox(80,10)[bl]{|bindingoffset|}}
%  \end{picture}}
%  \caption[L'option \texttt{bindingoffset}]{%
%   \begin{minipage}[t]{.8\textwidth}\raggedright\small
%   L'option |bindingoffset| ajoute un espace de largeur spécifiée à la marge
%   intérieure. Notez que l'option |twoside| intervertit les marges 
%   horizontales et les notes marginales avec l'effet de |bindingoffset| sur
%   les pages paires (voir \textbf{b)}), mais l'option |asymmetric| supprime
%   cette interversion des marges et des notes marginales (toutefois 
%   |bindingoffset| reste toujours interverti puisqu'il est lié à une question
%   de reliure des pages).
%   \end{minipage}}
%  \label{fig:bindingoffset}
% \end{figure}
%
% \subsection{Dimensions fondamentales}\label{sec:dimension}
%
% Les options ci-dessous écrasent les dimensions fondamentales de \LaTeX\ et
% autres bascules associées à la mise en page (Voir le côté droit de la 
% Figure~\ref{fig:layout}).
%
% \begin{Options}
% \item[headheight\OR head]~\\
%    modifie \cs{headheight}, hauteur de l'en-tête.
%    |headheight=|\meta{longueur} ou |head=|\meta{longueur}.
% \item[headsep] modifie \cs{headsep}, espace séparant l'en-tête et le texte
%    (corps). |headsep=|\meta{longueur}.
% \item[footskip\OR foot]~\\ modifie \cs{footskip}, distance séparant la ligne
%    de base de la dernière ligne de texte et la ligne de base du pied de page.
%    |footskip=|\meta{longueur} ou |foot=|\meta{longueur}.
% \item[nohead] supprime l'espace pour l'en-tête, ce qui est équivalent à 
%    \cs{headheight}|=0pt| et \cs{headsep}|=0pt|.
% \item[nofoot] supprime l'espace pour le pied de page, ce qui est équivalent 
%    à \cs{footskip}|=0pt|.
% \item[noheadfoot] équivalent à |nohead| et |nofoot|, ce qui signifie que 
%    \cs{headheight}, \cs{headsep} et \cs{footskip} sont tous fixés à |0pt|.
% \item[footnotesep] change la dimension \cs{skip}\cs{footins}, espace séparant
%    le bas du corps du texte et le haut du texte des notes de bas de
%    page.
% \item[marginparwidth\OR marginpar]~\\ 
%    modifie \cs{marginparwidth}, largeur des notes marginales.
%    |marginparwidth=|\meta{longueur}.
% \item[marginparsep] modifie \cs{marginparsep}, espace séparant le corps et
%    les notes marginales. |marginparsep=|\meta{longueur}.
% \item[nomarginpar] réduit l'espace des notes marginales à 0pt, ce qui 
%    équivalent à \cs{marginparwidth}|=0pt| et \cs{marginparsep}|=0pt|.
% \item[columnsep] modifie \cs{columnsep}, espace séparant les deux colonnes
%    du mode |twocolumn|.
% \item[hoffset]  modifie le décalage horizontal \cs{hoffset}. 
%    |hoffset=|\meta{longueur}.
% \item[voffset]  modifie le décalage vertical \cs{voffset}. 
%    |voffset=|\meta{longueur}.
% \item[offset] modifie le décalage horizontal et le décalage vertical.\\
%    |offset=|\argii{décalage-h}{décalage-v} ou |offset=|\meta{longueur}.
% \item[twocolumn] fait passer en mode à deux colonnes de texte, |twocolumn|,
%    avec \cs{@twocolumntrue}. |twocolumn=false| revient à un mode à une
%    colonne avec\cs{@twocolumnfalse}. Au lieu de |twocolumn=false|, vous
%    pouvez spécifier |onecolumn| (ce qui vaut par défaut |true|).
% \item[onecolumn] fonctionne comme |twocolumn=false|. |onecolumn=false| est
%   équivalent à |twocolumn|. 
% \item[twoside] fixe à la fois \cs{@twosidetrue} et \cs{@mparswitchtrue}.
%   Voir Section~\ref{sec:margin}.
% \item[textwidth] définit \cs{textwidth} directement. Voir 
%   Section~\ref{sec:body}.
% \item[textheight] définit \cs{textheight} directement. Voir 
%   Section~\ref{sec:body}.
% \item[reversemp\OR reversemarginpar]~\\
%   place les notes marginales dans la marge gauche (intérieure) avec
%   \cs{@reversemargintrue}. L'option ne change pas le mode |includemp|.
%   Elle vaut |false| par défaut.
% \end{Options}
%
% \subsection{Pilotes}\label{sec:drivers}
% 
% L'extension gère les pilotes |dvips|, |dvipdfm|, |pdftex|, |xetex| et
% |vtex|. Vous pouvez également utiliser |dvipdfm| pour \textsf{dvipdfmx} et
% \textsf{xdvipdfmx}. |pdftex| sert pour \textsf{pdflatex} et |vtex| sert pour
% l'environnement V\TeX{}.
% Les options associées aux pilotes sont exclusives. Le pilote peut être
% sélectionné soit par |driver=|\meta{nom-du-pilote} soit directement par le 
% nom du pilote tel |pdftex|. Par défaut, \Gm\ devine le pilote approprié au
% système utilisé. C'est pourquoi vous n'avez pas à sélectionner le pilote dans
% la plupart des cas. Cependant, si vous souhaitez utiliser |dvipdfm|, vous
% devez spécifier explicitement ce pilote.
%
% \begin{Options}
% \item[\onlypre driver] spécifie le pilote avec |driver=|\meta{nom-du-pilote}. 
% |dvips|, |dvipdfm|, |pdftex|, |vtex|, |xetex|, |auto| et |none| sont 
% disponibles comme nom de pilote. Les noms, exceptions faites de |auto| et 
% |none|, peuvent être spécifiés directement avec le nom sans |driver=|.
% |driver=auto| impose l'auto-détection quel que soit le réglage précédent.
% |driver=none| empêche l'auto-détection et ne sélectionne aucun pilote, ce 
% qui peut être utile lorsque vous voulez qu'une autre extension détermine 
% le paramétrage du pilote. Par exemple, si vous souhaitez utiliser l'extension
% \textsf{crop} avec \Gm, vous devez saisir 
% |\usepackage[driver=none]{geometry}| avant l'appel de l'extension 
% \textsf{crop}.
% \item[\onlypre dvips] inclut la dimension du papier dans la sortie dvi avec
%     la commande \cs{special}. Si vous utilisez \textsl{dvips} comme un pilote
%     DVI-vers-PS, par exemple, imprimer un document avec 
%     |\geometry{a3paper,landscape}| sur du papier A3 en orientation paysage,
%     vous n'avez alors pas besoin des options \og |-t a3 -t landscape| \fg{}
%     avec \textsl{dvips}. 
% \item[\onlypre dvipdfm] fonctionne comme |dvips| sauf pour l'orientation
%      paysage. Vous pouvez sélectionner cette option en utilisant 
%      \textsf{dvipdfmx} et \textsf{xdvipdfmx} pour obtenir la sortie dvi.
% \item[\onlypre pdftex] fixe \cs{pdfpagewidth} et \cs{pdfpageheight}
%      en interne.
% \item[\onlypre xetex] est équivalent à |pdftex| à ceci près qu'il ignore
%     |\pdf{h,v}origin| non défini avec \XeLaTeX{}. Cette option est introduite
%     dans la version 5. Notez que \og geometry.cfg \fg{} dans \TeX{} Live, 
%     qui désactive la routine d'auto-détection et sélectionne |pdftex|, n'est
%     plus nécessaire mais ne crée pas de problème quand bien même il n'est pas
%     supprimé. Au lieu de |xetex|, vous pouvez spécifier |dvipdfm| avec 
%     \XeLaTeX{} si vous souhaitez utiliser les éléments spécifiques de dvipdfm
%     que \XeTeX{} supporte.
% \item[\onlypre vtex] fixe les dimensions \cs{mediawidth} et \cs{mediaheight}
%     pour V\TeX. Quand ce pilote est sélectionné (explicitement ou 
%     automatiquement), \Gm\ détecte automatiquement quel mode de 
%     restitution (DVI, PDF ou PS) est choisi avec V\TeX\ et fera les réglages
%     associés.
% \end{Options}
% Si le pilote explicitement sélectionné n'est pas associable avec le 
% logiciel utilisé, le pilote sélectionné par défaut est |dvips|.
%
% \subsection{Autres options}
%
%  Les autres options utiles sont décrites ici.
%
% \begin{Options}
% \item[\onlypre verbose] affiche les résultats du paramétrage sur le terminal.
%   |verbose=false| (défaut) les place uniquement dans le fichier journal.
% \item[\onlypre reset] remet les dimensions de la mise en page et autres 
%   bascules dans l'état où elles étaient avant le chargement de \Gm. Les 
%   options données dans |geometry.cfg| sont également ignorées. Notez que cela
%   ne peut retraiter |pass| et |mag| avec |truedimen|.
%   |reset=false| n'a pas d'effet et n'annule pas les éventuels 
%   |reset|(|=true|) précédents. Par exemple, quand vous saisissez
%   \begin{quote}
%     |\documentclass[landscape]{article}|\\
%     |\usepackage[twoside,reset,left=2cm]{geometry}|
%   \end{quote}
%   avec |\ExecuteOptions{scale=0.9}| dans |geometry.cfg|, alors, au final,
%   |landscape| et |left=2cm| restent actifs et |scale=0.9| comme |twoside| 
%   sont ignorés.
% \item[\onlypre mag] fixe la valeur de l'agrandissement (\cs{mag}) et modifie
%   \cs{hoffset} et \cs{voffset} en fonction de cet agrandissement.
%   |mag=|\meta{valeur}. Notez que \meta{valeur} doit être une valeur
%   entière, avec 1000 désignant la taille normale. Par exemple, |mag=1414| 
%   avec |a4paper| conduit à un imprimé agrandi tenant sur un format |a3paper|,
%   qui est $1,414$ (=$\sqrt{2}$) fois plus grand que |a4paper|. 
%   L'agrandissement des polices de caractère demande de l'espace disque
%   supplémentaire. \textbf{Notez que l'option |mag| doit précéder toute autre
%   option avec les dimensions \og réelles \fg{} telles que |1.5truein| ou 
%   |2truecm| et ainsi de suite.} Voir aussi l'option |truedimen|.
% \item[\onlypre truedimen] change toute dimension interne explicite en
%   dimension \textit{vraie}, par exemple |1cm| est changé en |1truecm|.
%   Cette option s'utilise typiquement avec l'option |mag|. Notez que ceci
%   n'a pas d'effet pour les dimensions spécifiées extérieurement. Par exemple,
%   quand vous indiquez \og \texttt{mag=1440, margin=10pt, truedimen} \fg{}, 
%   les marges ne sont pas \og vraies \fg{} mais agrandies. Si vous souhaitez
%   définir des marges exactes, vous devriez utiliser quelque chose comme
%   \og \texttt{mag=1440, margin=10truept, truedimen} \fg{} à la place.
% \item[\onlypre pass] annule toutes les options et calculs de \Gm\ à 
%   l'exception de |verbose| et |showframe|. Cette option est insensible à
%   l'ordre et peut être utilisée pour vérifier la mise en page donnée par la
%   classe, d'autres extensions ou des réglages manuels sans \Gm.
% \item[\onlypre showframe] affiche des cadres pour la zone de texte et la page
%   ainsi que les lignes pour l'en-tête et le pied de page sur la première
%   page.
% \item[\onlypre showcrop] affiche les traits de coupe à chaque coin du gabarit
%   spécifié par l'utilisateur.
% \end{Options}
%
% \section{Traitement des options}\label{sec:process}
% 
% \subsection{Ordre de chargement}\label{sec:loadorder}
%
% S'il existe un fichier |geometry.cfg| quelque part où \TeX{} peut le trouver,
% \Gm\ le charge en premier. Par exemple, dans |geometry.cfg| vous pouvez 
% écrire |\ExecuteOptions{a4paper}|, ce qui spécifie le format A4 comme format
% par défaut. De fait, vous pouvez utiliser toutes les options définies dans 
% \Gm\ avec |\ExecuteOptions{}|.
% 
% L'ordre de chargement dans le préambule de votre document est le suivant :
% \begin{enumerate}
%  \item |geometry.cfg| s'il existe.
%  \item Options spécifiées avec |\documentclass[|\meta{options}|]{...}|.
%  \item Options spécifiées avec |\usepackage[|\meta{options}|]{geometry}|
%  \item Options spécifiées avec |\geometry{|\meta{options}|}|, qui peut être
%  appelé à plusieurs reprises. (L'option |reset| va annuler les options
%  spécifiées dans |\usepackage{geometry}| ou |\geometry|.)
% \end{enumerate}
%
% \subsection{Ordre des options}\label{sec:optionorder}
%
% La spécification des options \Gm\ est indifférente à l'ordre et écrase
% la précédente pour une même option. Par exemple, 
% \begin{center}
% |[left=2cm, right=3cm]| est équivalent à 
% |[right=3cm, left=2cm]|.
% \end{center}
% Les options appelées de nombreuses fois écrasent les appels précédents
% de la même option. Par exemple, 
% \begin{center}
%  |[verbose=true, verbose=false]| se résume à |verbose=false|. 
% \end{center}
% |[hmargin={3cm,2cm}, left=1cm]| est équivalent à |hmargin={1cm,2cm}| 
% où la marge de gauche (ou intérieure) est écrasée par |left=1cm|. 
%
% |reset| et |mag| sont des exceptions.
% L'option |reset| annule toutes les options de géométrie (exceptée |pass|)
% indiquées avant cette option. Si vous indiquez
% \begin{quote}
% |\documentclass[landscape]{article}|\\
% |\usepackage[margin=1cm,twoside]{geometry}|\\
% |\geometry{a5paper, reset, left=2cm}|
% \end{quote}
% alors |margin=1cm|, |twoside| et |a5paper| sont retranchés, ce qui 
% ramène ce cas alors à 
% \begin{quote}
% |\documentclass[landscape]{article}|\\
% |\usepackage[left=2cm]{geometry}|
% \end{quote}
%
% L'option |mag| doit être indiquée avant les autres options avec une 
% longueur \og vraie \fg{} telles que |left=1.5truecm|, |width=5truein| et
% ainsi de suite. La primitive |\mag| peut être indiquée avant que cette
% extension ne soit appelée.
%
% \subsection{Priorité}\label{sec:priority}
%  
% Il existe plusieurs manières de fixer les dimensions du \gpart{corps}:
% |scale|, |total|, |text| et |lines|. L'extension \Gm\ donne une plus haute
% priorité aux spécifications les plus concrètes. Voici la règle de priorité
% pour le \gpart{corps}.
% \[\begin{array}{c}
% \textrm{priorité:}\qquad\textrm{basse}\quad
%    \longrightarrow\quad\textrm{élevée}\\[1em]
% \left\{\begin{array}{l}|hscale|\\|vscale|\\|scale|
%        \end{array}\right\} <
% \left\{\begin{array}{l}|width|\\|height|\\|total|
%        \end{array}\right\} <
% \left\{\begin{array}{l}|textwidth|\\|textheight|
%         \\|text|\end{array}\right\} < |lines|.
% \end{array}\]
% Par exemple, 
% \begin{quote}
%  |\usepackage[hscale=0.8, textwidth=7in, width=18cm]{geometry}|
% \end{quote}
% est équivalent à |\usepackage[textwidth=7in]{geometry}|. Autre exemple:
% \begin{quote}
%  |\usepackage[lines=30, scale=0.8, text=7in]{geometry}|
% \end{quote}
% revient à saisir les options \texttt{[lines=30, textwidth=7in]}.
%
% \subsection{Valeurs par défaut}\label{sec:defaults}
%
% Cette section résume le paramétrage par défaut pour l'autocomplétion
% décrite par la suite.
% 
% Le rapport des marges verticales est par défaut $2/3$, autrement dit,
% \begin{equation}
%  |top| : |bottom| = 2 : 3 \qquad\textit{par défaut}.
% \end{equation}
% Pour ce qui est du rapport des marges horizontales, la valeur par défaut
% est liée au fait que le document soit en mode recto uniquement ou 
% en mode recto-verso,
% \begin{equation}
%  |left|\;(|inner|) : |right|\;(|outer|) 
%       = \left\{ \begin{array}{ll}
%              1 : 1 \qquad\textit{par défaut pour recto uniquement},\\
%              2 : 3 \qquad\textit{par défaut pour recto-verso}.
%         \end{array}\right.
% \end{equation}
% \`{A} l'évidence, le rapport pour les marges horizontales en mode recto
% uniquement correspond à \gpart{corps} centré.
%
% L'extension \Gm\ a le paramétrage par défaut suivant pour les documents en
% recto uniquement :
% \begin{itemize}\setlength{\itemsep}{-.5\parsep}
%   \item |scale=0.7| (le \gpart{corps} vaut $0,7 \times\textrm{le }
%   \gpart{papier}$) ;
%   \item |marginratio={1:1, 2:3}| (1\string:1 pour les marges horizontales 
%   et 2\string:3 pour les marges verticales) ;
%   \item |ignoreall| (l'en-tête, le pied de page, les notes marginales sont
%   exclus lors du calcul de la taille du \gpart{corps}).
% \end{itemize}
% Pour un document en mode recto-verso avec l'option |twoside|, le paramétrage
% par défaut est le même que celui d'un document en mode recto uniquement à
% ceci près que le rapport des marges horizontales est fixé à |2:3| également.
%
% Les options additionnelles écrasent les dimensions spécifiées auparavant.
%
% \subsection{Autocomplétion} \label{sec:rules}
%
% La Figure~\ref{fig:specrule} montre schématiquement comment des motifs de
% spécification existent et comment résoudre l'ambiguïté des spécifications.
% Chaque axe montre le nombre de longueurs explicitement spécifiées pour le
% corps et les marges. \Ss($m$,$b$) représente la spécification avec une paire
% de nombres $(\gpart{marge},\gpart{corps})=(m,b)$.
%
% Par exemple, la spécification |width=14cm, left=3cm| est catégorisée en 
% \Ss(1,1), ce qui est une spécification adéquate. Si vous ajoutez |right=4cm|,
% elle deviendra \Ss(2,1) et est sur-spécifiée. Si seule |width=14cm| est
% donnée, elle passe à \Ss(0,1), sous-spécifiée.
%
% L'extension \Gm\ dispose d'un mécanisme d'autocomplétion, dans lequel si les
% paramètres de mise en page sont sous-spécifiés ou sur-spécifiés, \Gm\ traite
% l'ambiguïté en utilisant des valeurs par défaut ou d'autres relations. Voici
% les spécifications et les règles de complétion.
% \begin{figure}
%  \centering
%  {\unitlength=1pt
%  \begin{picture}(400,150)(40,0)
%  \put(1,49){\makebox(90,49)[r]{\large 0}}
%  \put(1,1){\makebox(70,99)[r]{\large \gpart{corps}}}
%  \put(1,1){\makebox(90,49)[r]{\large 1}}
%  \put(100,100){\makebox(99,20){\large 0}}
%  \put(100,50){\framebox(99,49){}}
%  \put(100,80){\makebox(99,15){\Ss(0,0)}}
%  \put(100,50){\makebox(99,49){utilise |scale|}}
%  {\linethickness{1pt}%
%  \put(150,35){\line(0,1){30}}
%  \put(150,35){\line(-1,3){4}}
%  \put(150,35){\line(1,3){4}}}
%  \put(100,0){\framebox(99,49){}}
%  \put(100,2){\makebox(99,15){\Ss(0,1)}}
%  \put(100,0){\makebox(99,49){utilise |marginratio|}}
%  \put(200,120){\makebox(99,12){\large \gpart{marge}}}
%  \put(200,100){\makebox(99,20){\large 1}}
%  \put(200,50){\framebox(99,49){utilise |scale|}}
%  \put(200,55){\makebox(89,10)[r]{\scriptsize\shortstack[l]{si |ratio|\\spécifié}}}
%  \put(200,2){\makebox(99,15){\Ss(1,1)}}
%  {\linethickness{1pt}%
%  \put(250,35){\line(0,1){30}}
%  \put(250,35){\line(-1,3){4}}
%  \put(250,35){\line(1,3){4}}}
%  {\linethickness{1pt}%
%  \put(225,25){\line(-1,0){30}}
%  \put(225,25){\line(-3,-1){12}}
%  \put(225,25){\line(-3,1){12}}}
%  \put(200,80){\makebox(99,15){\Ss(1,0)}}
%  \put(200,0){\framebox(99,49){\textcolor{red}{\textit{a une solution}}}}
%  \put(300,100){\makebox(99,20){\large 2}}
%  \put(300,80){\makebox(99,15){\Ss(2,0)}}
%  \put(300,50){\framebox(99,49){\textcolor{red}{\textit{a une solution}}}}
%  \put(300,0){\framebox(99,49){néglige |body|}}
%  \put(300,2){\makebox(99,15){\Ss(2,1)}}
%  {\linethickness{1pt}%
%  \multiput(290,65)(5,0){6}{\line(1,0){3}}
%  \put(320,65){\line(-3,-1){12}}
%  \put(320,65){\line(-3,1){12}}}
%  {\linethickness{1pt}%
%  \put(350,65){\line(0,-1){30}}
%  \put(350,65){\line(-1,-3){4}}
%  \put(350,65){\line(1,-3){4}}}
%  \end{picture}}
%  \caption[Spécifications et règle de complétion]{%
%  \begin{minipage}[t]{.7\textwidth}\raggedright\small
%  Spécifications \Ss(0,0) à \Ss(2,1) et les règles de complétion (flèches).
%  Les nombres des colonnes et des lignes indiquent le nombre de longueurs 
%  explicitement spécifiées pour les marges et le corps respectivement. 
%  \Ss($m$,$b$) résume une spécification avec une paire de nombre 
%  $(\gpart{marge},\gpart{corps})=(m,c)$. 
%  \end{minipage}}
%  \label{fig:specrule}
% \end{figure}
%
% \begin{Spec}
% \item[\Ss(0,0)]
% Rien n'est spécifié. L'extension \Gm\ précise le \gpart{corps} avec la valeur
% par défaut de |scale| ($=0,7$). \\ Par exemple, la largeur |width| est fixée
% à  $0,7\times|layoutwidth|$. Notez que par défaut |layoutwidth| et
% |layoutheight| seront égaux à |\paperwidth| et |\paperheight|
% respectivement.
% Ainsi \Ss(0,0) passe à \Ss(0,1). Voir alors \Ss(0,1).
% \bigskip
%
% \item[\Ss(0,1)]
% Seul le \gpart{corps} est spécifié, comme dans |width=7in|, |lines=20|,
% |body={20cm,24cm}|, |scale=0.9| et ainsi de suite. Alors \Gm\ détermine les
% marges avec le rapport de marge |marginratio|. Si le rapport de marge n'est
% pas spécifié, la valeur par défaut est utilisée. Le rapport de marge vertical
% par défaut est défini comme 
% \begin{equation}
%  |top| : |bottom| = 2 : 3 \qquad\textit{par défaut}.
% \end{equation}
% Tandis qu'avec le rapport de marge horizontal, la valeur par défaut change
% selon que le document soit en mode recto uniquement ou en mode recto-verso,
% \begin{equation}
%  |left|\;(|inner|) : |right|\;(|outer|) 
%       = \left\{ \begin{array}{ll}
%              1 : 1 \qquad\textit{par défaut en recto uniquement},\\
%              2 : 3 \qquad\textit{par defaut en recto-verso}.
%         \end{array}\right.
% \end{equation}
% Par exemple, si |height=22cm| est spécifié pour du papier A4, \Gm\ calcule
% la marge |top| comme suit :
% \begin{equation}
%   \begin{array}{ll}
%   |top| &= ( |layoutheight| - |height| ) \times 2/5 \\
%         &= (29,7-22)\times2/5 = 3,08\textrm{(cm)}
%   \end{array}
% \end{equation}
% La marge |top| et la hauteur |height| du corps ayant été déterminées, la
% spécification verticale passe à \Ss(1,1) et tous les paramètres peuvent 
% être déterminés.
% \bigskip
%
% \item[\Ss(1,0)]
% Seule une marge est spécifiée, comme dans |bottom=2cm|, |left=1in|,
% |top=3cm| et ainsi de suite.
%

% \begin{itemize}
% \item \textbf{Si le rapport de marge \textit{n'est pas} spécifié}, \Gm\ 
% détermine le \gpart{corps} avec la valeur par défaut de |scale| ($=0,7$). 
% Par exemple, si |top=2.4cm| est spécifié, \Gm\ choisit
% \begin{equation}
%     |height|= 0,7\times|layoutheight| 
%            ~~(=0,7\times|\paperheight| \textrm{ par défaut})
% \end{equation}
% et alors \Ss(1,0) passe à \Ss(1,1), avec lequel |bottom| est calculé avec
% $|layoutheight|-(|height|+|top|)$ soit 6,51cm sur format A4
% si la taille du gabarit est celle du papier.
% \medskip
% \item \textbf{Si le rapport de marge est spécifié}, comme dans
% |hmarginratio={1:2}|, |vratio={3:4}| et ainsi de suite, \Gm\ détermine
% l'autre marge avec le rapport de marge spécifié. Par exemple, si \og 
% |top=2.4cm,vratio={3:4}| \fg{} est spécifié, \Gm\ fixe |bottom| à 3,2cm 
% par le calcul suivant :
% \begin{equation}
%     |bottom|= |top|/3\times4 = 3,2\textrm{cm}
% \end{equation}
% Ainsi \Ss(1,0) passe à \Ss(2,0).
% \end{itemize}
%
% Notez que les versions 4 et précédentes utilisaient le rapport de marge pour
% déterminer l'autre marge. C'est pourquoi, dans la version 5, avec la même 
% spécification, la mise en page changera par rapport à la version 4. Par
% exemple, si seule |top=2.4cm| est spécifiée, vous obtenez |bottom=2.4cm| 
% dans les versions 4 et antérieures mais vous obtiendrez |bottom=6.51cm| dans 
% la version 5.
% \bigskip
%
% \item[\Ss(2,1)]
% Le \gpart{corps} et les deux \gpart{marges} sont spécifiés, comme dans
%  |vdivide={1in,8in,1.5in}|, |left=3cm,width=13cm,right=4cm| et ainsi de
%  suite. Comme \Gm\ donne la priorité aux \gpart{marges} si les dimensions
%  sont sur-spécifiées, \Gm\ redéfinit le \gpart{corps}. Par exemple, si vous 
% spécifiez
% \begin{center}
%    |\usepackage[a4paper,left=3cm,width=13cm,right=4cm]{geometry}|,
% \end{center}
% |width| est redéfini à 14cm car la largeur d'un format A4 est de 21cm.
% \end{Spec}
%
% \section{Changement de mise en page en cours de document}\label{sec:midchange}
%
% La version 5 apporte les nouvelles commandes \cs{newgeometry\{$\cdots$\}}
% et \cs{restoregeometry} qui vous permettent de changer la mise en page en
% cours de document. Contrairement à \cs{geometry} dans le préambule,
% \cs{newgeometry} est disponible uniquement après |\begin{document}|. Elle
% réinitialise toutes les options spécifiées à l'exception des options liées à
% l'orientation du papier (|landscape|, |portrait|) et les options liées à la
% taille du papier (telles que |papersize|, |paper=a4paper| et ainsi de suite),
% qui ne peuvent être changées avec \cs{newgeometry}. 
%
% La commande \cs{restoregeometry} restaure la mise en page spécifiée dans le
% préambule (avant |\begin{document}|) avec les options de 
% |\usepackage{geometry}| et \cs{geometry}.
%
% Notez que \cs{newgeometry} et \cs{restoregeometry} insèrent toutes deux
% un |\clearpage| là où elles sont appelées.
%
% Ci-dessous est présenté un exemple de changement de mise en page en cours
% de document. La mise en page M1 indiquant |hmargin=3cm| (les marges |left|
% et |right| mesurent 3cm) est changée pour la mise en page M2 avec |left=3cm|,
% |right=1cm| et |bottom=0.1cm|. La mise en page M1 est restaurée avec
% \cs{restoregeometry}. 
% \begin{center}
% \begin{minipage}{.8\textwidth}
% |\usepackage[hmargin=3cm]{geometry}|\\
% |\begin{document}|\\
%  \medskip
%  \hspace{1cm}\fbox{Mise en page M1}\\
% \medskip
% |\newgeometry{left=3cm,right=1cm,bottom=0.1cm}|\\
% \medskip
%  \hspace{1cm}\fbox{Mise en page M2 (nouvelle)}\\
% \medskip
% |\restoregeometry|\\
% \medskip
%  \hspace{1cm}\fbox{Mise en page M1 (restaurée)}\\
% \medskip
% |\newgeometry{margin=1cm,includefoot}|\\
% \medskip
%  \hspace{1cm}\fbox{Mise en page M3 (nouvelle)}\\
% \medskip
% |\end{document}|
% \end{minipage}%
% \end{center}
% \begin{center}
%  \centering\small
%  {\unitlength=.8pt
%  \begin{picture}(450,180)(0,0)
%  \put(0,165){\makebox(95,12){(sauvegardée)}}
%  \put(15,135){\framebox(65,10){\gpart{en-tête}}}
%  \put(15,60){\framebox(65,70){\gpart{corps}}}
%  \put(15,45){\makebox(65,12){\gpart{pied de page}}}
%  \put(15,45){\line(1,0){65}}
%  \put(0,20){\framebox(95,140){}}
%  \put(0,0){\makebox(95,20){M1}}
%  \put(104,90){\circle*{4}}
%  \put(110,90){\circle*{4}}
%  \put(116,90){\circle*{4}}
%  \put(125,165){\makebox(95,12){\cs{newgeometry}}}
%  \put(140,135){\framebox(71,10){\gpart{en-tête}}}
%  \put(140,33){\framebox(71,97){\gpart{corps}}}
%  \put(140,21){\makebox(71,12){\gpart{pied de page}}}
%  \put(125,20){\framebox(95,140){}}
%  \put(125,0){\makebox(95,20){M2 (nouvelle)}}
%  \put(229,90){\circle*{4}}
%  \put(235,90){\circle*{4}}
%  \put(241,90){\circle*{4}}
%  \put(250,165){\makebox(95,12){\cs{restoregeometry}}}
%  \put(265,135){\framebox(65,10){\gpart{en-tête}}}
%  \put(265,60){\framebox(65,70){\gpart{corps}}}
%  \put(265,45){\makebox(65,12){\gpart{pied de page}}}
%  \put(265,45){\line(1,0){65}}
%  \put(250,20){\framebox(95,140){}}
%  \put(250,0){\makebox(95,20){M1 (restaurée)}}
%  \put(354,90){\circle*{4}}
%  \put(360,90){\circle*{4}}
%  \put(366,90){\circle*{4}}
%  \put(375,165){\makebox(95,12){\cs{newgeometry}}}
%  \put(383,41){\framebox(80,111){\gpart{corps}}}
%  \put(383,29){\makebox(80,12){\gpart{pied de page}}}
%  \put(383,29){\line(1,0){80}}
%  \put(375,20){\framebox(95,140){}}
%  \put(375,0){\makebox(95,20){M3 (nouvelle)}}
%  \end{picture}}
% \end{center}
%
% Un ensemble de commandes |\savegeometry{|\meta{nom}|}| et
% |\loadgeometry{|\meta{nom}|}| est pratique si vous souhaitez réutiliser à
% plusieurs reprises différentes mises en page dans votre document. Par
% exemple, 
% \begin{center}
% \begin{verbatim}
%     \usepackage[hmargin=3cm]{geometry}
%     \begin{document}
%           M1
%     \newgeometry{left=3cm,right=1cm,bottom=0.1cm}
%     \savegeometry{M2}
%           M2 (nouvelle, sauvée)
%     \restoregeometry
%           M1 (restaurée)
%     \newgeometry{margin=1cm,includefoot}
%           M3 (nouvelle)
%     \loadgeometry{M2}
%           M2 (chargée)
%     \end{document}
% \end{verbatim}
% \end{center}
%
% \section{Exemples}
%
% \begin{enumerate}
% \item Une mise en page en mode recto uniquement avec le texte centré sur le
% papier. Les exemples ci-dessous ont le même résultat car le rapport de marge
% horizontale est fixé à |1:1| par défaut en mode recto uniquement. 
% \begin{itemize}
%   \item |centering|
%   \item |marginratio=1:1|
%   \item |vcentering|
% \end{itemize}
%
% \item Une mise en page en mode recto-verso avec un décalage intérieur pour la
% reliure fixé à 1cm.
% \begin{itemize}
%   \item |twoside, bindingoffset=1cm|
% \end{itemize}
% Ici, |textwidth| est plus petit de $0,7\times|1cm|$ ($=|0,7cm|$) que dans le 
% cas par défaut d'un document en mode recto-verso car la largeur du
% \gpart{corps} par défaut est fixée avec |scale=0.7|, ce qui signifie que  
% $|width|=|0,7|\times|layoutwidth|$ ($=|0,7\paperwidth|$ par défaut).
%
% \item Une mise en page avec les marges gauche, droite et haute fixées 
% respectivement à 3cm, 2cm et 2.5in, avec une hauteur de texte mise à 40
% lignes et enfin avec l'en-tête et le pied de page inclus dans le
% \gpart{corps total}.
% Les deux exemples ci-dessous ont le même effet.
% \begin{itemize}
%   \item |left=3cm, right=2cm, lines=40, top=2.5in, includeheadfoot|
%   \item |hmargin={3cm,2cm}, tmargin=2.5in, lines=40, includeheadfoot|
% \end{itemize}
%
% \item Une mise en page avec la hauteur du \gpart{corps total} fixée à
% 10in, la marge basse à |2cm| et une largeur par défaut. La marge haute sera
% calculée automatiquement. Chaque solution ci-dessous conduit à la même
% mise en page.
% \begin{itemize}
%     \item |vdivide={*, 10in, 2cm}|
%     \item |bmargin=2cm, height=10in|
%     \item |bottom=2cm, textheight=10in| 
% \end{itemize}
% Notez que les dimensions de l'\gpart{en-tête} et du \gpart{pied de page}
% sont exclues de la hauteur |height| du \gpart{corps total}. Placer ici un 
% |includefoot| additionnel inclut \cs{footskip} dans |totalheight|. 
% C'est pourquoi, dans les deux exemples de mise en page ci-dessous, |textheight|
% dans le premier cas est plus petit que dans le second (avec 10in exactement)
% avec un écart de \cs{footskip}. En d'autres termes, |height| = |textheight| 
% + |footskip| quand |includefoot=true|.
% \begin{itemize}
%     \item |bmargin=2cm, height=10in, includefoot|
%     \item |bottom=2cm, textheight=10in, includefoot|
% \end{itemize}
%
% \item Une mise en page avec |textwidth| et |textheight| fixés à 90\% de la
% taille du papier et avec le \gpart{corps} centré. Chaque solution ci-dessous
% aboutit au même résultat tant que |layoutwidth| et |layoutheight| ne sont pas
% changé par rapport aux valeurs par défaut.
% \begin{itemize}
%   \item |scale=0.9, centering|
%   \item |text={.9\paperwidth,.9\paperheight}, ratio=1:1|
%   \item |width=.9\paperwidth, vmargin=.05\paperheight, marginratio=1:1|
%   \item |hdivide={*,0.9\paperwidth,*}, vdivide={*,0.9\paperheight,*}|
%   (pour les documents en mode recto uniquement)
%   \item |margin={0.05\paperwidth,0.05\paperheight}|
% \end{itemize}
% Vous pouvez ajouter |heightrounded| pour éviter un message de \og 
% \emph{sous-remplissage vertical} \fg{} comme
% \begin{quote}\small
%  |Underfull \vbox (badness 10000) has occurred while \output is active|.
% \end{quote}
% Voir la Section~\ref{sec:body} pour la description détaillée de 
% |heightrounded|.
%
% \item Une mise en page avec la largeur de la note marginale fixée à 3cm et
% incluse dans la largeur du \gpart{corps total}. Les exemples suivants
% donnent le même résultat.
% \begin{itemize}
%   \item |marginparwidth=3cm, includemp|
%   \item |marginpar=3cm, ignoremp=false|
% \end{itemize}
%
% \item Une mise en page où le \gpart{corps} occupe tout l'espace du papier
% en format A5 et en orientation paysage. Les exemples suivants conduisent
% à la même mise en page.
% \begin{itemize}
%   \item |a5paper, landscape, scale=1.0|
%   \item |landscape=true, paper=a5paper, margin=0pt|
% \end{itemize}
%
% \item Une mise en page en format écran appropriée pour les présentations
% sur ordinateurs et vidéoprojecteurs.
% \begin{verbatim}
%   \documentclass{slide}
%   \usepackage[screen,margin=0.8in]{geometry}
%    ...
%   \begin{slide}
%      ...
%   \end{slide}\end{verbatim}
% \item Une mise en page avec les fontes et les espaces tous redimensionnés
% du format A4 au format A3. Sur le cas ci-dessous, le résultat tient sur un
% papier A3.
% \begin{itemize}
%     \item |a4paper, mag=1414|.
% \end{itemize}
% Si vous voulez avoir une mise en page avec des fontes deux fois plus grandes
% mais pas de changement de la taille du papier, vous pouvez saisir
% \begin{itemize}
%   \item |letterpaper, mag=2000, truedimen|.
% \end{itemize}
%  Vous pouvez ajouter l'option |dvips|, ce qui est pratique pour 
%  prévisualiser, avec la taille de papier associée, dans |dviout| ou |xdvi|.
%
% \item Une mise en page avec une première page spécifique et les pages 
% suivantes ramenées à la présentation par défaut existant avant le chargement
% de \Gm. Pour cela, utilisez l'option |pass|, |\newgeometry| et 
% |\restoregeometry|.
% \begin{verbatim}
%   \documentclass{book}
%   \usepackage[pass]{geometry}
%      % 'pass' annule la mise en page de l'extension
%      %  de façon à ce que la mise en page de 'book' soit mémorisée ici.
%   \begin{document}
%   \newgeometry{margin=1cm}% change les dimensions de la première page.
%      Page 1
%   \restoregeometry % restaure la mise en page initiale de 'book'.
%      Page 2 et suivantes
%   \end{document}\end{verbatim}
%
% \item Une mise en page complexe.
% \begin{verbatim}
%  \usepackage[a5paper, landscape, twocolumn, twoside,
%      left=2cm, hmarginratio=2:1, includemp, marginparwidth=43pt, 
%      bottom=1cm, foot=.7cm, includefoot, textheight=11cm, heightrounded,
%      columnsep=1cm, dvips,  verbose]{geometry}\end{verbatim}
% Essayez de la tester pour voir par vous-même le résultat. |:-)|
% \end{enumerate}
%
% \section{Problèmes connus}
% \begin{itemize}
%  \item Avec |mag| $\neq 1000$ et |truedimen|,
%  |paperwidth| et |paperheight| indiqué en mode |verbose| sont différents
%  de la véritable taille du PDF final. Le PDF en lui-même est correct
%  cependant.
%
%  \item Avec |mag| $\neq 1000$, \textit{aucun} |truedimen|
%  et \textsf{hyperref}, \textsf{hyperref} doit être chargé avant \Gm. 
%  Sans cela, la taille du PDF final sera incorrecte.
%
%  \item Avec l'extension \textsf{crop} et |mag| $\neq 1000$, l'option 
%  |center| de \textsf{crop} ne fonctionne pas bien.
%
% \end{itemize}
%
% \section{Remerciements}
%  L'auteur remercie pour leurs suggestions, aides et commentaires 
%  de nombreuses personnes, dont (par ordre alphabétique des 
%  noms) :
%  Jean-Bernard Addor, 
%  Frank Bennett,
%  Alexis Dimitriadis,
%  Friedrich Flender,
%  Adrian Heathcote,
%  Stephan Hennig,
%  Morten H\o{}gholm,
%  Jonathan Kew,
%  James Kilfiger,
%  Yusuke Kuroki,
%  Jean-Marc Lasgouttes,
%  Wlodzimierz Macewicz,
%  Frank Mittelbach,
%  Eckhard Neber,
%  Rolf Niepraschk,
%  Hans Fr.~Nordhaug,
%  Heiko Oberdiek,
%  Keith Reckdahl, 
%  Peter Riocreux,
%  Will Robertson,
%  Pablo Rodriguez,
%  Nico Schl\"{o}emer,
%  Perry C.~Stearns, 
%  Frank Stengel,
%  Plamen Tanovski,
%  Petr Uher,
%  Piet van Oostrum,
%  Vladimir Volovich,
%  Michael Vulis.
%
% \StopEventually{%
% }
% 
% \newgeometry{hmargin={4.2cm,1.5cm},vmargin={1cm,1cm},
%              includeheadfoot, marginpar=3.8cm}
% \section{Implémentation}

%    \begin{macrocode}
%<*package>
%    \end{macrocode}
%    Cette extension requiert les extensions suivantes :
%    \textsf{keyval}, \textsf{ifpdf}, \textsf{ifvtex} et \textsf{ifxetex}.
%    \begin{macrocode}
\RequirePackage{keyval}%
\RequirePackage{ifpdf}%
\RequirePackage{ifvtex}%
\RequirePackage{ifxetex}%
%    \end{macrocode}
% 
%    Les bascules internes sont déclarées ici.
%    \begin{macrocode}
\newif\ifGm@verbose
\newif\ifGm@landscape
\newif\ifGm@swap@papersize
\newif\ifGm@includehead
\newif\ifGm@includefoot
\newif\ifGm@includemp
\newif\ifGm@hbody
\newif\ifGm@vbody
\newif\ifGm@heightrounded
\newif\ifGm@showframe
\newif\ifGm@showcrop
\newif\ifGm@pass
\newif\ifGm@resetpaper
\newif\ifGm@layout
\newif\ifGm@newgm
%    \end{macrocode}
%    \begin{macro}{\Gm@cnth}
%    \begin{macro}{\Gm@cntv}
%    Les compteurs pour les motifs de partitionnement horizontal et vertical 
%    \begin{macrocode}
\newcount\Gm@cnth
\newcount\Gm@cntv
%    \end{macrocode}
%    \end{macro}\end{macro}
%    \begin{macro}{\c@Gm@tempcnt}
%    Le compteur est utilisé pour fixer des nombres avec \textsf{calc}.
%    \begin{macrocode}
\newcount\c@Gm@tempcnt
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@bindingoffset}
%    Le décalage pour la reluire dans la marge intérieure.
%    \begin{macrocode}
\newdimen\Gm@bindingoffset
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@wd@mp}
%    \begin{macro}{\Gm@odd@mp}
%    \begin{macro}{\Gm@even@mp}
%    Les longueurs de correction pour \cs{textwidth}, \cs{oddsidemargin} et 
%    \cs{evensidemargin} en mode |includemp|.
%    \begin{macrocode}
\newdimen\Gm@wd@mp
\newdimen\Gm@odd@mp
\newdimen\Gm@even@mp
%    \end{macrocode}
%    \end{macro}\end{macro}\end{macro}
%    \begin{macro}{\Gm@layoutwidth}
%    \begin{macro}{\Gm@layoutheight}
%    \begin{macro}{\Gm@layouthoffset}
%    \begin{macro}{\Gm@layoutvoffset}
%    Les dimensions du gabarit.
%    \begin{macrocode}
\newdimen\Gm@layoutwidth
\newdimen\Gm@layoutheight
\newdimen\Gm@layouthoffset
\newdimen\Gm@layoutvoffset
%    \end{macrocode}
%    \end{macro}\end{macro}\end{macro}\end{macro}
%    \begin{macro}{\Gm@dimlist}
%    Le token dans lequel peuvent être stockées les dimensions de base de
%    \LaTeX.
%    \begin{macrocode}
\newtoks\Gm@dimlist
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@warning}
%    La commande affichant les messages d'alerte.
%    \begin{macrocode}
\def\Gm@warning#1{\PackageWarningNoLine{geometry}{#1}}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\ifGm@preamble}
%    La commande exécute les options données en argument uniquement si
%    elles sont spécifiées dans le préambule, en tant qu'options de 
%    |\usepackage| et/ou qu'options de |\geometry|. Sinon, la commande
%    affiche un message d'avertissement et ignore les options indiquées.
%    \begin{macrocode}
\def\ifGm@preamble#1{%
  \ifGm@newgm
   \Gm@warning{`#1': not available in `\string\newgeometry'; skipped}%
  \else
    \expandafter\@firstofone
  \fi}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@Dhratio}
%    \begin{macro}{\Gm@Dhratiotwo}
%    \begin{macro}{\Gm@Dvratio}
%    Les valeurs par défaut du rapport de marge horizontal et du rapport
%    de marge vertical sont définis. \cs{Gm@Dhratiotwo} représente le
%    rapport de marge horizontal dans une mise en page en mode recto-verso avec
%    les marges gauche et droite interverties sur les pages au verso,
%    ce qui est fixé par |twoside|.
%    \begin{macrocode}
\def\Gm@Dhratio{1:1}% = gauche:droite par défaut en recto uniquement
\def\Gm@Dhratiotwo{2:3}% = intérieure:extérieur par défaut en recto-verso.
\def\Gm@Dvratio{2:3}% = haute:basse par défaut
%    \end{macrocode}
%    \end{macro}\end{macro}\end{macro}
%    \begin{macro}{\Gm@Dhscale}
%    \begin{macro}{\Gm@Dvscale}
%    Les valeurs par défaut pour les rapports entre la taille du 
%    \gpart{corps total} et du \gpart{papier} sur l'axe horizontal et l'axe
%    vertical sont mises à $0.7$.
%    \begin{macrocode}
\def\Gm@Dhscale{0.7}%
\def\Gm@Dvscale{0.7}%
%    \end{macrocode}
%    \end{macro}\end{macro}
%    \begin{macro}{\Gm@dvips}%
%    \begin{macro}{\Gm@dvipdfm}%
%    \begin{macro}{\Gm@pdftex}%
%    \begin{macro}{\Gm@xetex}%
%    \begin{macro}{\Gm@vtex}%
%    Les noms des pilotes.
%    \begin{macrocode}
\def\Gm@dvips{dvips}%
\def\Gm@dvipdfm{dvipdfm}%
\def\Gm@pdftex{pdftex}%
\def\Gm@xetex{xetex}%
\def\Gm@vtex{vtex}%
%    \end{macrocode}
%    \end{macro}\end{macro}\end{macro}\end{macro}\end{macro}
%    \begin{macro}{\Gm@true}%
%    \begin{macro}{\Gm@false}%
%    Les commandes pour |true| et |false|.
%    \begin{macrocode}
\def\Gm@true{true}%
\def\Gm@false{false}%
%    \end{macrocode}
%    \end{macro}\end{macro}
%    \begin{macro}{\Gm@orgpw}
%    \begin{macro}{\Gm@orgph}
%    Ces commandes gardent intact la taille du papier (medium) original.
%    \begin{macrocode}
\edef\Gm@orgpw{\the\paperwidth}%
\edef\Gm@orgph{\the\paperheight}%
%    \end{macrocode}
%    \end{macro}\end{macro}
%    \begin{macro}{\Gm@savelength}
%    Ces commandes sauvegardent la longueur spécifiée dans |\Gm@restore|.
%    \begin{macrocode}
\def\Gm@savelength#1{%
  \g@addto@macro\Gm@restore{\expandafter\noexpand\expandafter\csname
  #1\endcsname\expandafter=\expandafter\the\csname #1\endcsname\relax}}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@saveboolean}
%    Ces commandes sauvegardent les booléens spécifiés dans |\Gm@restore|.
%    \begin{macrocode}
\def\Gm@saveboolean#1{%
  \csname if#1\endcsname
    \g@addto@macro\Gm@restore{\expandafter\noexpand\csname #1true\endcsname}%
  \else
    \g@addto@macro\Gm@restore{\expandafter\noexpand\csname #1false\endcsname}%
  \fi}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@restore}
%    L'initialisation de |\Gm@restore|.
%    \begin{macrocode}
\def\Gm@restore{}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@save}
%    La définition de la commande sauvegardant les longueurs réelles des
%    options de \LaTeX.
%    \begin{macrocode}
\def\Gm@save{%
  \Gm@savelength{paperwidth}%
  \Gm@savelength{paperheight}%
  \Gm@savelength{textwidth}%
  \Gm@savelength{textheight}%
  \Gm@savelength{evensidemargin}%
  \Gm@savelength{oddsidemargin}%
  \Gm@savelength{topmargin}%
  \Gm@savelength{headheight}%
  \Gm@savelength{headsep}%
  \Gm@savelength{topskip}%
  \Gm@savelength{footskip}%
  \Gm@savelength{baselineskip}%
  \Gm@savelength{marginparwidth}%
  \Gm@savelength{marginparsep}%
  \Gm@savelength{columnsep}%
  \Gm@savelength{hoffset}%
  \Gm@savelength{voffset}
  \Gm@savelength{Gm@layoutwidth}%
  \Gm@savelength{Gm@layoutheight}%
  \Gm@savelength{Gm@layouthoffset}%
  \Gm@savelength{Gm@layoutvoffset}%
  \Gm@saveboolean{@twocolumn}%
  \Gm@saveboolean{@twoside}%
  \Gm@saveboolean{@mparswitch}%
  \Gm@saveboolean{@reversemargin}}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@initnewgm}
%    Cette commande initialise les paramètres de mise en page dans 
%    |\newgeometry|.
%    \begin{macrocode}
\def\Gm@initnewgm{%
  \Gm@passfalse
  \Gm@swap@papersizefalse
  \Gm@dimlist={}
  \Gm@hbodyfalse
  \Gm@vbodyfalse
  \Gm@heightroundedfalse
  \Gm@includeheadfalse
  \Gm@includefootfalse
  \Gm@includempfalse
  \let\Gm@width\@undefined
  \let\Gm@height\@undefined
  \let\Gm@textwidth\@undefined
  \let\Gm@textheight\@undefined
  \let\Gm@lines\@undefined
  \let\Gm@hscale\@undefined
  \let\Gm@vscale\@undefined
  \let\Gm@hmarginratio\@undefined
  \let\Gm@vmarginratio\@undefined
  \let\Gm@lmargin\@undefined
  \let\Gm@rmargin\@undefined
  \let\Gm@tmargin\@undefined
  \let\Gm@bmargin\@undefined
  \Gm@layoutfalse
  \Gm@layouthoffset\z@
  \Gm@layoutvoffset\z@
  \Gm@bindingoffset\z@}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@initall}
%    Cette initialisation est appelée dès que l'extension est chargée. Elle est
%    également appelée dès que l'option |reset| est spécifiée.
%    \begin{macrocode}
\def\Gm@initall{%
  \let\Gm@driver\@empty
  \let\Gm@truedimen\@empty
  \let\Gm@paper\@undefined
  \Gm@resetpaperfalse
  \Gm@landscapefalse
  \Gm@verbosefalse
  \Gm@showframefalse
  \Gm@showcropfalse
  \Gm@newgmfalse
  \Gm@initnewgm}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@setdriver}
%    Cette commande définit le pilote spécifié.
%    \begin{macrocode}
\def\Gm@setdriver#1{%
  \expandafter\let\expandafter\Gm@driver\csname Gm@#1\endcsname}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@unsetdriver}
%    Cette commande annule la prise en charge du pilote spécifié si il
%    a été déjà sélectionné.
%    \begin{macrocode}
\def\Gm@unsetdriver#1{%
  \expandafter\ifx\csname Gm@#1\endcsname\Gm@driver\let\Gm@driver\@empty\fi}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@setbool}
%    \begin{macro}{\Gm@setboolrev}
%    Les commandes pour le traitement des options booléennes.
%    \begin{macrocode}
\def\Gm@setbool{\@dblarg\Gm@@setbool}%
\def\Gm@setboolrev{\@dblarg\Gm@@setboolrev}%
\def\Gm@@setbool[#1]#2#3{\Gm@doif{#1}{#3}{\csname Gm@#2\Gm@bool\endcsname}}%
\def\Gm@@setboolrev[#1]#2#3{\Gm@doifelse{#1}{#3}%
  {\csname Gm@#2\Gm@false\endcsname}{\csname Gm@#2\Gm@true\endcsname}}%
%    \end{macrocode}
%    \end{macro}\end{macro}
%    \begin{macro}{\Gm@doif}
%    \begin{macro}{\Gm@doifelse}
%    \cs{Gm@doif} exécute le troisième argument |#3| en utilisant la valeur
%    booléenne |#2| de l'option |#1|. \cs{Gm@doifelse} exécute le troisième
%    argument |#3| si l'option booléenne |#1| a sa valeur |#2| valant 
%    |true| et exécute le quatrième argument |#4| si cette valeur |false|.
%    \begin{macrocode}
\def\Gm@doif#1#2#3{%
  \lowercase{\def\Gm@bool{#2}}%
  \ifx\Gm@bool\@empty
    \let\Gm@bool\Gm@true
  \fi
  \ifx\Gm@bool\Gm@true
  \else
    \ifx\Gm@bool\Gm@false
    \else
      \let\Gm@bool\relax
    \fi
  \fi
  \ifx\Gm@bool\relax
    \Gm@warning{`#1' should be set to `true' or `false'}%
  \else
    #3
  \fi}%
\def\Gm@doifelse#1#2#3#4{%
  \Gm@doif{#1}{#2}{\ifx\Gm@bool\Gm@true #3\else #4\fi}}%
%    \end{macrocode}
%    \end{macro}\end{macro}
%    \begin{macro}{\Gm@reverse}
%    Cette commande fait une valeur booléenne à la valeur opposée.
%    \begin{macrocode}
\def\Gm@reverse#1{%
  \csname ifGm@#1\endcsname
  \csname Gm@#1false\endcsname\else\csname Gm@#1true\endcsname\fi}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@defbylen}
%    \begin{macro}{\Gm@defbycnt}
%    Les commandes \cs{Gm@defbylen} et \cs{Gm@defbycnt} peuvent être utilisées
%    pour définir des variables \cs{Gm@xxxx} respectivement avec une longueur
%    ou avec un compteur, ceci avec l'extension \textsf{calc}.
%    \begin{macrocode}
\def\Gm@defbylen#1#2{%
  \begingroup\setlength\@tempdima{#2}%
  \expandafter\xdef\csname Gm@#1\endcsname{\the\@tempdima}\endgroup}%
\def\Gm@defbycnt#1#2{%
  \begingroup\setcounter{Gm@tempcnt}{#2}%
  \expandafter\xdef\csname Gm@#1\endcsname{\the\value{Gm@tempcnt}}\endgroup}%
%    \end{macrocode}
%    \end{macro}\end{macro}
%    \begin{macro}{\Gm@set@ratio}
%    Cette commande analyse la valeur des options spécifiant les rapports de
%    marge, ce qui est utilisé dans la commande \cs{Gm@setbyratio}.
%    \begin{macrocode}
\def\Gm@sep@ratio#1:#2{\@tempcnta=#1\@tempcntb=#2}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@setbyratio}
%    Cette commande détermine la dimension spécifiée par |#4| en calculant 
%    |#3|$\times a / b$, où $a$ et $b$ sont donnés par \cs{Gm@mratio}
%    avec une valeur $a:b$. Si |#1| entre crochet vaut |b|, $a$ et $b$ sont
%    intervertis. Le deuxième argument avec |h| ou |v| précisant l'aspect 
%    horizontal ou vertical n'est pas utilisé dans cette commande.
%    \begin{macrocode}
\def\Gm@setbyratio[#1]#2#3#4{% détermine #4 avec un rapport
  \expandafter\Gm@sep@ratio\Gm@mratio\relax
  \if#1b
    \edef\@@tempa{\the\@tempcnta}%
    \@tempcnta=\@tempcntb
    \@tempcntb=\@@tempa\relax
  \fi
  \expandafter\setlength\expandafter\@tempdimb\expandafter
    {\csname Gm@#3\endcsname}%
  \ifnum\@tempcntb>\z@
    \multiply\@tempdimb\@tempcnta
    \divide\@tempdimb\@tempcntb
  \fi
  \expandafter\edef\csname Gm@#4\endcsname{\the\@tempdimb}}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@detiv}
%    Cette commande détermine la quatrième longueur (|#4|) à partir de 
%    |#1|(\glen{layoutwidth} ou \glen{layoutheight}), |#2| et |#3|. Elle
%    est utilisée dans la commande \cs{Gm@detall}.
%    \begin{macrocode}
\def\Gm@detiv#1#2#3#4{% determine #4.
  \expandafter\setlength\expandafter\@tempdima\expandafter
    {\csname Gm@layout#1\endcsname}%
  \expandafter\setlength\expandafter\@tempdimb\expandafter
    {\csname Gm@#2\endcsname}%
  \addtolength\@tempdima{-\@tempdimb}%
  \expandafter\setlength\expandafter\@tempdimb\expandafter
    {\csname Gm@#3\endcsname}%
  \addtolength\@tempdima{-\@tempdimb}%
  \ifdim\@tempdima<\z@
    \Gm@warning{`#4' results in NEGATIVE (\the\@tempdima).%
    ^^J\@spaces `#2' or `#3' should be shortened in length}%
  \fi
  \expandafter\edef\csname Gm@#4\endcsname{\the\@tempdima}}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@detiiandiii}
%    Cette commande détermine |#2| et |#3| à partir de |#1|, l'argument 
%    |#1| pouvant être |width| ou |height|. Cet argument est développé alors 
%    en dimensions du papier et du corps total. Elle est utilisée dans la
%    commande \cs{Gm@detall}.
%    \begin{macrocode}
\def\Gm@detiiandiii#1#2#3{% détermine #2 et #3.
  \expandafter\setlength\expandafter\@tempdima\expandafter
    {\csname Gm@layout#1\endcsname}%
  \expandafter\setlength\expandafter\@tempdimb\expandafter
    {\csname Gm@#1\endcsname}%
  \addtolength\@tempdima{-\@tempdimb}%
  \ifdim\@tempdima<\z@
    \Gm@warning{`#2' and `#3' result in NEGATIVE (\the\@tempdima).%
                  ^^J\@spaces `#1' should be shortened in length}%
  \fi
  \ifx\Gm@mratio\@undefined
    \expandafter\Gm@sep@ratio\Gm@Dmratio\relax
  \else
    \expandafter\Gm@sep@ratio\Gm@mratio\relax
    \ifnum\@tempcntb>\z@\else
      \Gm@warning{margin ratio a:b should be non-zero; default used}%
      \expandafter\Gm@sep@ratio\Gm@Dmratio\relax
    \fi
  \fi 
  \@tempdimb=\@tempdima
  \advance\@tempcntb\@tempcnta
  \divide\@tempdima\@tempcntb
  \multiply\@tempdima\@tempcnta
  \advance\@tempdimb-\@tempdima
  \expandafter\edef\csname Gm@#2\endcsname{\the\@tempdima}%
  \expandafter\edef\csname Gm@#3\endcsname{\the\@tempdimb}}%
%    \end{macrocode}
%    \end{macro}
%
%    \begin{macro}{\Gm@detall} 
%    Cette commande détermine la partition de chaque direction. L'argument |#1|
%    vaut |h| or |v|, |#2| vaut |width| ou |height|, |#3| vaut |lmargin| ou 
%    |top|, et |#4| vaut |rmargin| or |bottom|.
%    \begin{macrocode}
\def\Gm@detall#1#2#3#4{%
  \@tempcnta\z@
  \if#1h
    \let\Gm@mratio\Gm@hmarginratio
    \edef\Gm@Dmratio{\if@twoside\Gm@Dhratiotwo\else\Gm@Dhratio\fi}%
  \else
    \let\Gm@mratio\Gm@vmarginratio
    \edef\Gm@Dmratio{\Gm@Dvratio}%
  \fi
%    \end{macrocode}
%    \cs{@tempcnta} est traité comme un nombre binaire à trois chiffres 
%    associés respectivement aux marges |left|(|top|), |width|(|height|)
%    et |right|(|bottom|) spécifiées par l'utilisateur.
%    \begin{macrocode}
  \if#1h
    \ifx\Gm@lmargin\@undefined\else\advance\@tempcnta4\relax\fi
    \ifGm@hbody\advance\@tempcnta2\relax\fi
    \ifx\Gm@rmargin\@undefined\else\advance\@tempcnta1\relax\fi
    \Gm@cnth\@tempcnta
  \else
    \ifx\Gm@tmargin\@undefined\else\advance\@tempcnta4\relax\fi
    \ifGm@vbody\advance\@tempcnta2\relax\fi
    \ifx\Gm@bmargin\@undefined\else\advance\@tempcnta1\relax\fi
    \Gm@cntv\@tempcnta
  \fi
%    \end{macrocode}
%    Cas où le nombre est |000| (=0) lorsque rien n'est fixé (cas par défaut) :
%    \begin{macrocode}
  \ifcase\@tempcnta
    \if#1h
      \Gm@defbylen{width}{\Gm@Dhscale\Gm@layoutwidth}%
    \else
      \Gm@defbylen{height}{\Gm@Dvscale\Gm@layoutheight}%
    \fi
    \Gm@detiiandiii{#2}{#3}{#4}%
%    \end{macrocode}
%    Cas |001| (=1) avec la marge |right|(|bottom|) fixée:
%    \begin{macrocode}
  \or
    \ifx\Gm@mratio\@undefined
      \if#1h
        \Gm@defbylen{width}{\Gm@Dhscale\Gm@layoutwidth}%
      \else
        \Gm@defbylen{height}{\Gm@Dvscale\Gm@layoutheight}%
      \fi
      \setlength\@tempdimc{\@nameuse{Gm@#4}}%
      \Gm@detiiandiii{#2}{#3}{#4}%
      \expandafter\let\csname Gm@#2\endcsname\@undefined
      \Gm@defbylen{#4}{\@tempdimc}%
    \else
      \Gm@setbyratio[f]{#1}{#4}{#3}%
    \fi
    \Gm@detiv{#2}{#3}{#4}{#2}%
%    \end{macrocode}
%    Cas |010| (=2) avec la dimension centrale |width|(|height|) fixée :
%    \begin{macrocode}
  \or\Gm@detiiandiii{#2}{#3}{#4}%
%    \end{macrocode}
%    Cas |011| (=3) avec la dimension centrale |width|(|height|) et la marge 
%    |right|(|bottom|) fixées :
%    \begin{macrocode}
  \or\Gm@detiv{#2}{#2}{#4}{#3}%
%    \end{macrocode}
%    Cas |100| (=4) avec la marge |left|(|top|) fixée :
%    \begin{macrocode}
  \or
    \ifx\Gm@mratio\@undefined
      \if#1h
        \Gm@defbylen{width}{\Gm@Dhscale\Gm@layoutwidth}%
      \else
        \Gm@defbylen{height}{\Gm@Dvscale\Gm@layoutheight}%
      \fi
      \setlength\@tempdimc{\@nameuse{Gm@#3}}%
      \Gm@detiiandiii{#2}{#4}{#3}%
      \expandafter\let\csname Gm@#2\endcsname\@undefined
      \Gm@defbylen{#3}{\@tempdimc}%
    \else
      \Gm@setbyratio[b]{#1}{#3}{#4}%
    \fi
    \Gm@detiv{#2}{#3}{#4}{#2}%
%    \end{macrocode}
%    Cas |101| (=5) avec les marges |left|(|top|) et |right|(|bottom|) fixées :
%    \begin{macrocode}
  \or\Gm@detiv{#2}{#3}{#4}{#2}%
%    \end{macrocode}
%    Cas |110| (=6) avec la marge |left|(|top|) et la dimension centrale
%    |width|(|height|) fixées :
%    \begin{macrocode}
  \or\Gm@detiv{#2}{#2}{#3}{#4}%
%    \end{macrocode}
%    Cas |111| (=7) avec les deux marges et la dimension centrale fixée, cas
%    sur-spécifié :
%    \begin{macrocode}
  \or\Gm@warning{Over-specification in `#1'-direction.%
                  ^^J\@spaces `#2' (\@nameuse{Gm@#2}) is ignored}%
    \Gm@detiv{#2}{#3}{#4}{#2}%
  \else\fi}%
%    \end{macrocode}
%    \end{macro}
%
%    \begin{macro}{\Gm@clean}
%    Cette commande sert à donner à des dimensions non spécifiées la valeur 
%    \cs{@undefined}. Elle sert dans la commande \cs{geometry}.
%    \begin{macrocode}
\def\Gm@clean{%
  \ifnum\Gm@cnth<4\let\Gm@lmargin\@undefined\fi
  \ifodd\Gm@cnth\else\let\Gm@rmargin\@undefined\fi
  \ifnum\Gm@cntv<4\let\Gm@tmargin\@undefined\fi
  \ifodd\Gm@cntv\else\let\Gm@bmargin\@undefined\fi
  \ifGm@hbody\else
    \let\Gm@hscale\@undefined
    \let\Gm@width\@undefined
    \let\Gm@textwidth\@undefined
  \fi
  \ifGm@vbody\else
    \let\Gm@vscale\@undefined
    \let\Gm@height\@undefined
    \let\Gm@textheight\@undefined
  \fi
  }%
%    \end{macrocode}
%    \end{macro}
%
%    \begin{macro}{\Gm@parse@divide}
%    Cette commande analyse les options (|h|,|v|)|divide|.
%    \begin{macrocode}
\def\Gm@parse@divide#1#2#3#4{%
  \def\Gm@star{*}%
  \@tempcnta\z@
  \@for\Gm@tmp:=#1\do{%
    \expandafter\KV@@sp@def\expandafter\Gm@frag\expandafter{\Gm@tmp}%
    \edef\Gm@value{\Gm@frag}%
    \ifcase\@tempcnta\relax\edef\Gm@key{#2}%
      \or\edef\Gm@key{#3}%
      \else\edef\Gm@key{#4}%
    \fi
    \@nameuse{Gm@set\Gm@key false}%
    \ifx\empty\Gm@value\else
    \ifx\Gm@star\Gm@value\else
      \setkeys{Gm}{\Gm@key=\Gm@value}%
    \fi\fi
    \advance\@tempcnta\@ne}%
  \let\Gm@star\relax}%
%    \end{macrocode}
%    \end{macro}
%
%    \begin{macro}{\Gm@branch}
%    Cette valeur scinde une valeur en deux valeurs identiques.
%    \begin{macrocode}
\def\Gm@branch#1#2#3{%
  \@tempcnta\z@
  \@for\Gm@tmp:=#1\do{%
    \KV@@sp@def\Gm@frag{\Gm@tmp}%
    \edef\Gm@value{\Gm@frag}%
    \ifcase\@tempcnta\relax% cnta == 0
      \setkeys{Gm}{#2=\Gm@value}%
    \or% cnta == 1
      \setkeys{Gm}{#3=\Gm@value}%
    \else\fi
    \advance\@tempcnta\@ne}%
  \ifnum\@tempcnta=\@ne
    \setkeys{Gm}{#3=\Gm@value}%
  \fi}%
%    \end{macrocode}
%    \end{macro}
%
%    \begin{macro}{\Gm@magtooffset}
%    Cette commande est utilisée pour ajuster les décalages par \cs{mag}.
%    \begin{macrocode}
\def\Gm@magtooffset{%
  \@tempdima=\mag\Gm@truedimen sp%
  \@tempdimb=1\Gm@truedimen in%
  \divide\@tempdimb\@tempdima
  \multiply\@tempdimb\@m
  \addtolength{\hoffset}{1\Gm@truedimen in}%
  \addtolength{\voffset}{1\Gm@truedimen in}%
  \addtolength{\hoffset}{-\the\@tempdimb}%
  \addtolength{\voffset}{-\the\@tempdimb}}%
%    \end{macrocode}
%    \end{macro}
%
%    \begin{macro}{\Gm@setlength}
%    Cette commande stocke les dimensions de base de \LaTeX{}, lesquelles sont
%    stockées et fixées par la suite.
%    \begin{macrocode}
\def\Gm@setlength#1#2{%
  \let\Gm@len=\relax\let\Gm@td=\relax
  \edef\addtolist{\noexpand\Gm@dimlist=%
  {\the\Gm@dimlist \Gm@len{#1}{#2}}}\addtolist}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@expandlengths}
%    Cette commande traite \cs{Gm@dimlist}.
%    \begin{macrocode}
\def\Gm@expandlengths{%
  \def\Gm@td{\Gm@truedimen}%
  \def\Gm@len##1##2{\setlength{##1}{##2}}%
  \the\Gm@dimlist}%
%    \end{macrocode}
%    \end{macro}
%
%    \begin{macro}{\Gm@setsize}
%    Cette commande définit les dimensions |paperwidth| et |paperheight|
%    en utilisant la commande \cs{Gm@setlength}.
%    \begin{macrocode}
\def\Gm@setsize#1(#2,#3)#4{%
  \let\Gm@td\relax
  \expandafter\Gm@setlength\csname #1width\endcsname{#2\Gm@td #4}%
  \expandafter\Gm@setlength\csname #1height\endcsname{#3\Gm@td #4}%
  \ifGm@landscape\Gm@swap@papersizetrue\else\Gm@swap@papersizefalse\fi}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@setpaper@ifpre}
%    Cette commande change le format du papier.
%    \begin{macrocode}
\def\Gm@setpaper@ifpre#1{%
  \ifGm@preamble{#1}{\def\Gm@paper{#1}\@nameuse{Gm@#1}{paper}}}%
%    \end{macrocode}
%    \end{macro}
%    Différents formats de papier sont définis ici.
%    \begin{macrocode}
\@namedef{Gm@a0paper}#1{\Gm@setsize{#1}(841,1189){mm}}% ISO A0
\@namedef{Gm@a1paper}#1{\Gm@setsize{#1}(594,841){mm}}% ISO A1
\@namedef{Gm@a2paper}#1{\Gm@setsize{#1}(420,594){mm}}% ISO A2
\@namedef{Gm@a3paper}#1{\Gm@setsize{#1}(297,420){mm}}% ISO A3
\@namedef{Gm@a4paper}#1{\Gm@setsize{#1}(210,297){mm}}% ISO A4
\@namedef{Gm@a5paper}#1{\Gm@setsize{#1}(148,210){mm}}% ISO A5
\@namedef{Gm@a6paper}#1{\Gm@setsize{#1}(105,148){mm}}% ISO A6
\@namedef{Gm@b0paper}#1{\Gm@setsize{#1}(1000,1414){mm}}% ISO B0
\@namedef{Gm@b1paper}#1{\Gm@setsize{#1}(707,1000){mm}}% ISO B1
\@namedef{Gm@b2paper}#1{\Gm@setsize{#1}(500,707){mm}}% ISO B2
\@namedef{Gm@b3paper}#1{\Gm@setsize{#1}(353,500){mm}}% ISO B3
\@namedef{Gm@b4paper}#1{\Gm@setsize{#1}(250,353){mm}}% ISO B4
\@namedef{Gm@b5paper}#1{\Gm@setsize{#1}(176,250){mm}}% ISO B5
\@namedef{Gm@b6paper}#1{\Gm@setsize{#1}(125,176){mm}}% ISO B6
\@namedef{Gm@c0paper}#1{\Gm@setsize{#1}(917,1297){mm}}% ISO C0
\@namedef{Gm@c1paper}#1{\Gm@setsize{#1}(648,917){mm}}% ISO C1
\@namedef{Gm@c2paper}#1{\Gm@setsize{#1}(458,648){mm}}% ISO C2
\@namedef{Gm@c3paper}#1{\Gm@setsize{#1}(324,458){mm}}% ISO C3
\@namedef{Gm@c4paper}#1{\Gm@setsize{#1}(229,324){mm}}% ISO C4
\@namedef{Gm@c5paper}#1{\Gm@setsize{#1}(162,229){mm}}% ISO C5
\@namedef{Gm@c6paper}#1{\Gm@setsize{#1}(114,162){mm}}% ISO C6
\@namedef{Gm@b0j}#1{\Gm@setsize{#1}(1030,1456){mm}}% JIS B0
\@namedef{Gm@b1j}#1{\Gm@setsize{#1}(728,1030){mm}}% JIS B1
\@namedef{Gm@b2j}#1{\Gm@setsize{#1}(515,728){mm}}% JIS B2
\@namedef{Gm@b3j}#1{\Gm@setsize{#1}(364,515){mm}}% JIS B3
\@namedef{Gm@b4j}#1{\Gm@setsize{#1}(257,364){mm}}% JIS B4
\@namedef{Gm@b5j}#1{\Gm@setsize{#1}(182,257){mm}}% JIS B5
\@namedef{Gm@b6j}#1{\Gm@setsize{#1}(128,182){mm}}% JIS B6
\@namedef{Gm@ansiapaper}#1{\Gm@setsize{#1}(8.5,11){in}}%
\@namedef{Gm@ansibpaper}#1{\Gm@setsize{#1}(11,17){in}}%
\@namedef{Gm@ansicpaper}#1{\Gm@setsize{#1}(17,22){in}}%
\@namedef{Gm@ansidpaper}#1{\Gm@setsize{#1}(22,34){in}}%
\@namedef{Gm@ansiepaper}#1{\Gm@setsize{#1}(34,44){in}}%
\@namedef{Gm@letterpaper}#1{\Gm@setsize{#1}(8.5,11){in}}%
\@namedef{Gm@legalpaper}#1{\Gm@setsize{#1}(8.5,14){in}}%
\@namedef{Gm@executivepaper}#1{\Gm@setsize{#1}(7.25,10.5){in}}%
\@namedef{Gm@screen}#1{\Gm@setsize{#1}(225,180){mm}}%
%    \end{macrocode}
%
%  \begin{key}{Gm}{paper}
%    |paper| prend le nom du format de papier comme sa valeur.
%    \begin{macrocode}
\define@key{Gm}{paper}{\setkeys{Gm}{#1}}%
\let\KV@Gm@papername\KV@Gm@paper
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{a[0-6]paper}
%  \begin{key}{Gm}{b[0-6]paper}
%  \begin{key}{Gm}{b[0-6]j}
%  \begin{key}{Gm}{ansi[a-e]paper}
%  \begin{key}{Gm}{letterpaper}
%  \begin{key}{Gm}{legalpaper}
%  \begin{key}{Gm}{executivepaper}
%  \begin{key}{Gm}{screen}
%    Les noms de format de papier disponibles sont les suivants.
%    \begin{macrocode}
\define@key{Gm}{a0paper}[true]{\Gm@setpaper@ifpre{a0paper}}%
\define@key{Gm}{a1paper}[true]{\Gm@setpaper@ifpre{a1paper}}%
\define@key{Gm}{a2paper}[true]{\Gm@setpaper@ifpre{a2paper}}%
\define@key{Gm}{a3paper}[true]{\Gm@setpaper@ifpre{a3paper}}%
\define@key{Gm}{a4paper}[true]{\Gm@setpaper@ifpre{a4paper}}%
\define@key{Gm}{a5paper}[true]{\Gm@setpaper@ifpre{a5paper}}%
\define@key{Gm}{a6paper}[true]{\Gm@setpaper@ifpre{a6paper}}%
\define@key{Gm}{b0paper}[true]{\Gm@setpaper@ifpre{b0paper}}%
\define@key{Gm}{b1paper}[true]{\Gm@setpaper@ifpre{b1paper}}%
\define@key{Gm}{b2paper}[true]{\Gm@setpaper@ifpre{b2paper}}%
\define@key{Gm}{b3paper}[true]{\Gm@setpaper@ifpre{b3paper}}%
\define@key{Gm}{b4paper}[true]{\Gm@setpaper@ifpre{b4paper}}%
\define@key{Gm}{b5paper}[true]{\Gm@setpaper@ifpre{b5paper}}%
\define@key{Gm}{b6paper}[true]{\Gm@setpaper@ifpre{b6paper}}%
\define@key{Gm}{c0paper}[true]{\Gm@setpaper@ifpre{c0paper}}%
\define@key{Gm}{c1paper}[true]{\Gm@setpaper@ifpre{c1paper}}%
\define@key{Gm}{c2paper}[true]{\Gm@setpaper@ifpre{c2paper}}%
\define@key{Gm}{c3paper}[true]{\Gm@setpaper@ifpre{c3paper}}%
\define@key{Gm}{c4paper}[true]{\Gm@setpaper@ifpre{c4paper}}%
\define@key{Gm}{c5paper}[true]{\Gm@setpaper@ifpre{c5paper}}%
\define@key{Gm}{c6paper}[true]{\Gm@setpaper@ifpre{c6paper}}%
\define@key{Gm}{b0j}[true]{\Gm@setpaper@ifpre{b0j}}%
\define@key{Gm}{b1j}[true]{\Gm@setpaper@ifpre{b1j}}%
\define@key{Gm}{b2j}[true]{\Gm@setpaper@ifpre{b2j}}%
\define@key{Gm}{b3j}[true]{\Gm@setpaper@ifpre{b3j}}%
\define@key{Gm}{b4j}[true]{\Gm@setpaper@ifpre{b4j}}%
\define@key{Gm}{b5j}[true]{\Gm@setpaper@ifpre{b5j}}%
\define@key{Gm}{b6j}[true]{\Gm@setpaper@ifpre{b6j}}%
\define@key{Gm}{ansiapaper}[true]{\Gm@setpaper@ifpre{ansiapaper}}%
\define@key{Gm}{ansibpaper}[true]{\Gm@setpaper@ifpre{ansibpaper}}%
\define@key{Gm}{ansicpaper}[true]{\Gm@setpaper@ifpre{ansicpaper}}%
\define@key{Gm}{ansidpaper}[true]{\Gm@setpaper@ifpre{ansidpaper}}%
\define@key{Gm}{ansiepaper}[true]{\Gm@setpaper@ifpre{ansiepaper}}%
\define@key{Gm}{letterpaper}[true]{\Gm@setpaper@ifpre{letterpaper}}%
\define@key{Gm}{legalpaper}[true]{\Gm@setpaper@ifpre{legalpaper}}%
\define@key{Gm}{executivepaper}[true]{\Gm@setpaper@ifpre{executivepaper}}%
\define@key{Gm}{screen}[true]{\Gm@setpaper@ifpre{screen}}%
%    \end{macrocode}
%  \end{key}\end{key}\end{key}\end{key}\end{key}
%  \end{key}\end{key}\end{key}
%  \begin{key}{Gm}{paperwidth}
%  \begin{key}{Gm}{paperheight}
%  \begin{key}{Gm}{papersize}
%    La spécification directe du format est aussi possible.
%    \begin{macrocode}
\define@key{Gm}{paperwidth}{\ifGm@preamble{paperwidth}{%
  \def\Gm@paper{custom}\Gm@setlength\paperwidth{#1}}}%
\define@key{Gm}{paperheight}{\ifGm@preamble{paperheight}{%
  \def\Gm@paper{custom}\Gm@setlength\paperheight{#1}}}%
\define@key{Gm}{papersize}{\ifGm@preamble{papersize}{%
  \def\Gm@paper{custom}\Gm@branch{#1}{paperwidth}{paperheight}}}%
%    \end{macrocode}
%  \end{key}\end{key}\end{key}
%  \begin{key}{Gm}{layout}
%  \begin{key}{Gm}{layoutwidth}
%  \begin{key}{Gm}{layoutheight}
%  \begin{key}{Gm}{layoutsize}
%    La spécification du gabarit est aussi possible.
%    \begin{macrocode}
\define@key{Gm}{layout}{\Gm@layouttrue\@nameuse{Gm@#1}{Gm@layout}}%
\let\KV@Gm@layoutname\KV@Gm@layout
\define@key{Gm}{layoutwidth}{\Gm@layouttrue\Gm@setlength\Gm@layoutwidth{#1}}%
\define@key{Gm}{layoutheight}{\Gm@layouttrue\Gm@setlength\Gm@layoutheight{#1}}%
\define@key{Gm}{layoutsize}{\Gm@branch{#1}{layoutwidth}{layoutheight}}%
%    \end{macrocode}
%  \end{key}\end{key}\end{key}\end{key}
%  \begin{key}{Gm}{landscape}
%  \begin{key}{Gm}{portrait}
%    Définition de l'orientation du papier.
%    \begin{macrocode}
\define@key{Gm}{landscape}[true]{\ifGm@preamble{landscape}{%
  \Gm@doifelse{landscape}{#1}%
  {\ifGm@landscape\else\Gm@landscapetrue\Gm@reverse{swap@papersize}\fi}%
  {\ifGm@landscape\Gm@landscapefalse\Gm@reverse{swap@papersize}\fi}}}%
\define@key{Gm}{portrait}[true]{\ifGm@preamble{portrait}{%
  \Gm@doifelse{portrait}{#1}%
  {\ifGm@landscape\Gm@landscapefalse\Gm@reverse{swap@papersize}\fi}%
  {\ifGm@landscape\else\Gm@landscapetrue\Gm@reverse{swap@papersize}\fi}}}%
%    \end{macrocode}
%  \end{key}\end{key}
%  \begin{key}{Gm}{hscale}
%  \begin{key}{Gm}{vscale}
%  \begin{key}{Gm}{scale}
%    Ces options peuvent déterminer la ou les longueurs associées au
%    \gpart{corps total} en se basant sur des rapports (\textit{scales})
%    entre ces dimensions et le format du papier.
%    \begin{macrocode}
\define@key{Gm}{hscale}{\Gm@hbodytrue\edef\Gm@hscale{#1}}%
\define@key{Gm}{vscale}{\Gm@vbodytrue\edef\Gm@vscale{#1}}%
\define@key{Gm}{scale}{\Gm@branch{#1}{hscale}{vscale}}%
%    \end{macrocode}
%  \end{key}\end{key}\end{key}
%  \begin{key}{Gm}{width}
%  \begin{key}{Gm}{height}
%  \begin{key}{Gm}{total}
%  \begin{key}{Gm}{totalwidth}
%  \begin{key}{Gm}{totalheight}
%    Ces options donnent des dimensions fixées au \gpart{corps total}.
%    |totalwidth| et |totalheight| sont des alias de |width| et |height|
%    respectivement.
%    \begin{macrocode}
\define@key{Gm}{width}{\Gm@hbodytrue\Gm@defbylen{width}{#1}}%
\define@key{Gm}{height}{\Gm@vbodytrue\Gm@defbylen{height}{#1}}%
\define@key{Gm}{total}{\Gm@branch{#1}{width}{height}}%
\let\KV@Gm@totalwidth\KV@Gm@width
\let\KV@Gm@totalheight\KV@Gm@height
%    \end{macrocode}
%  \end{key}\end{key}\end{key}\end{key}\end{key}
%  \begin{key}{Gm}{textwidth}
%  \begin{key}{Gm}{textheight}
%  \begin{key}{Gm}{text}
%  \begin{key}{Gm}{body}
%    Ces options fixent directement les dimensions \cs{textwidth} et
%    \cs{textheight}. |body| est un alias de |text|.
%    \begin{macrocode}
\define@key{Gm}{textwidth}{\Gm@hbodytrue\Gm@defbylen{textwidth}{#1}}%
\define@key{Gm}{textheight}{\Gm@vbodytrue\Gm@defbylen{textheight}{#1}}%
\define@key{Gm}{text}{\Gm@branch{#1}{textwidth}{textheight}}%
\let\KV@Gm@body\KV@Gm@text
%    \end{macrocode}
%  \end{key}\end{key}\end{key}\end{key}
%  \begin{key}{Gm}{lines}
%    Cette option fixe \cs{textheight} avec un nombre de lignes.
%    \begin{macrocode}
\define@key{Gm}{lines}{\Gm@vbodytrue\Gm@defbycnt{lines}{#1}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{includehead}
%  \begin{key}{Gm}{includefoot}
%  \begin{key}{Gm}{includeheadfoot}
%  \begin{key}{Gm}{includemp}
%  \begin{key}{Gm}{includeall}
%    Ces options impliquent que les dimensions associées sont \trad{parties
%    prenantes du \gpart{corps}}.
%    \begin{macrocode}
\define@key{Gm}{includehead}[true]{\Gm@setbool{includehead}{#1}}%
\define@key{Gm}{includefoot}[true]{\Gm@setbool{includefoot}{#1}}%
\define@key{Gm}{includeheadfoot}[true]{\Gm@doifelse{includeheadfoot}{#1}%
  {\Gm@includeheadtrue\Gm@includefoottrue}%
  {\Gm@includeheadfalse\Gm@includefootfalse}}%
\define@key{Gm}{includemp}[true]{\Gm@setbool{includemp}{#1}}%
\define@key{Gm}{includeall}[true]{\Gm@doifelse{includeall}{#1}%
  {\Gm@includeheadtrue\Gm@includefoottrue\Gm@includemptrue}%
  {\Gm@includeheadfalse\Gm@includefootfalse\Gm@includempfalse}}%
%    \end{macrocode}
%  \end{key}\end{key}\end{key}\end{key}\end{key}
%  \begin{key}{Gm}{ignorehead}
%  \begin{key}{Gm}{ignorefoot}
%  \begin{key}{Gm}{ignoreheadfoot}
%  \begin{key}{Gm}{ignoremp}
%  \begin{key}{Gm}{ignoreall}
%  Ces options excluent l'\gpart{en-tête}, le \gpart{pied de page}
%  et les \gpart{notes marginales} lors de la détermination du \gpart{corps}.
%    \begin{macrocode}
\define@key{Gm}{ignorehead}[true]{%
  \Gm@setboolrev[ignorehead]{includehead}{#1}}%
\define@key{Gm}{ignorefoot}[true]{%
  \Gm@setboolrev[ignorefoot]{includefoot}{#1}}%
\define@key{Gm}{ignoreheadfoot}[true]{\Gm@doifelse{ignoreheadfoot}{#1}%
  {\Gm@includeheadfalse\Gm@includefootfalse}%
  {\Gm@includeheadtrue\Gm@includefoottrue}}%
\define@key{Gm}{ignoremp}[true]{%
  \Gm@setboolrev[ignoremp]{includemp}{#1}}%
\define@key{Gm}{ignoreall}[true]{\Gm@doifelse{ignoreall}{#1}%
  {\Gm@includeheadfalse\Gm@includefootfalse\Gm@includempfalse}%
  {\Gm@includeheadtrue\Gm@includefoottrue\Gm@includemptrue}}%
%    \end{macrocode}
%  \end{key}\end{key}\end{key}\end{key}\end{key}
%  \begin{key}{Gm}{heightrounded}
%    Cette option arrondit \cs{textheight} à $n$ fois \cs{baselineskip}
%    plus \cs{topskip}.
%    \begin{macrocode}
\define@key{Gm}{heightrounded}[true]{\Gm@setbool{heightrounded}{#1}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{hdivide}
%  \begin{key}{Gm}{vdivide}
%  \begin{key}{Gm}{divide}
%    Cette option sont utiles pour spécifier la décomposition du papier
%    dans chaque direction.
%    \begin{macrocode}
\define@key{Gm}{hdivide}{\Gm@parse@divide{#1}{lmargin}{width}{rmargin}}%
\define@key{Gm}{vdivide}{\Gm@parse@divide{#1}{tmargin}{height}{bmargin}}%
\define@key{Gm}{divide}{\Gm@parse@divide{#1}{lmargin}{width}{rmargin}%
  \Gm@parse@divide{#1}{tmargin}{height}{bmargin}}%
%    \end{macrocode}
%  \end{key}\end{key}\end{key}
%\newpage
%  \begin{key}{Gm}{lmargin}
%  \begin{key}{Gm}{rmargin}
%  \begin{key}{Gm}{tmargin}
%  \begin{key}{Gm}{bmargin}
%  \begin{key}{Gm}{left}
%  \begin{key}{Gm}{inner}
%  \begin{key}{Gm}{innermargin}
%  \begin{key}{Gm}{right}
%  \begin{key}{Gm}{outer}
%  \begin{key}{Gm}{outermargin}
%  \begin{key}{Gm}{top}
%  \begin{key}{Gm}{bottom}
%    Ces options fixent les \gpart{marges}.
%    |left|, |inner| et |innermargin| sont des alias de |lmargin|.
%    |right|, |outer| et |outermargin| sont des alias de |rmargin|.
%    |top| et |bottom| sont des alias de |tmargin| et |bmargin| respectivement.
%    \begin{macrocode}
\define@key{Gm}{lmargin}{\Gm@defbylen{lmargin}{#1}}%
\define@key{Gm}{rmargin}{\Gm@defbylen{rmargin}{#1}}%
\let\KV@Gm@left\KV@Gm@lmargin
\let\KV@Gm@inner\KV@Gm@lmargin
\let\KV@Gm@innermargin\KV@Gm@lmargin
\let\KV@Gm@right\KV@Gm@rmargin
\let\KV@Gm@outer\KV@Gm@rmargin
\let\KV@Gm@outermargin\KV@Gm@rmargin
\define@key{Gm}{tmargin}{\Gm@defbylen{tmargin}{#1}}%
\define@key{Gm}{bmargin}{\Gm@defbylen{bmargin}{#1}}%
\let\KV@Gm@top\KV@Gm@tmargin
\let\KV@Gm@bottom\KV@Gm@bmargin
%    \end{macrocode}
%  \end{key}\end{key}\end{key}\end{key}\end{key}
%  \end{key}\end{key}\end{key}\end{key}\end{key}
%  \end{key}\end{key}
%  \begin{key}{Gm}{hmargin}
%  \begin{key}{Gm}{vmargin}
%  \begin{key}{Gm}{margin}
%  Ces options sont des raccourcis pour définir les \gpart{marges}.
%    \begin{macrocode}
\define@key{Gm}{hmargin}{\Gm@branch{#1}{lmargin}{rmargin}}%
\define@key{Gm}{vmargin}{\Gm@branch{#1}{tmargin}{bmargin}}%
\define@key{Gm}{margin}{\Gm@branch{#1}{lmargin}{tmargin}%
  \Gm@branch{#1}{rmargin}{bmargin}}%
%    \end{macrocode}
%  \end{key}\end{key}\end{key}
%  \begin{key}{Gm}{hmarginratio}
%  \begin{key}{Gm}{vmarginratio}
%  \begin{key}{Gm}{marginratio}
%  \begin{key}{Gm}{hratio}
%  \begin{key}{Gm}{vratio}
%  \begin{key}{Gm}{ratio}
%  Ces options spécifient les rapports entre marges.
%    \begin{macrocode}
\define@key{Gm}{hmarginratio}{\edef\Gm@hmarginratio{#1}}%
\define@key{Gm}{vmarginratio}{\edef\Gm@vmarginratio{#1}}%
\define@key{Gm}{marginratio}{\Gm@branch{#1}{hmarginratio}{vmarginratio}}%
\let\KV@Gm@hratio\KV@Gm@hmarginratio
\let\KV@Gm@vratio\KV@Gm@vmarginratio
\let\KV@Gm@ratio\KV@Gm@marginratio
%    \end{macrocode}
%  \end{key}\end{key}\end{key}
%  \end{key}\end{key}\end{key}
%  \begin{key}{Gm}{hcentering}
%  \begin{key}{Gm}{vcentering}
%  \begin{key}{Gm}{centering}
%    Quelques raccourcis utiles pour centrer le \gpart{corps}.
%    \begin{macrocode}
\define@key{Gm}{hcentering}[true]{\Gm@doifelse{hcentering}{#1}%
  {\def\Gm@hmarginratio{1:1}}{}}%
\define@key{Gm}{vcentering}[true]{\Gm@doifelse{vcentering}{#1}%
  {\def\Gm@vmarginratio{1:1}}{}}%
\define@key{Gm}{centering}[true]{\Gm@doifelse{centering}{#1}%
  {\def\Gm@hmarginratio{1:1}\def\Gm@vmarginratio{1:1}}{}}%
%    \end{macrocode}
%  \end{key}\end{key}\end{key}
%  \begin{key}{Gm}{twoside}
%    Si |twoside=true|, \cs{@twoside} et \cs{@mparswitch} valent alors |true|.
%    \begin{macrocode}
\define@key{Gm}{twoside}[true]{\Gm@doifelse{twoside}{#1}%
  {\@twosidetrue\@mparswitchtrue}{\@twosidefalse\@mparswitchfalse}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{asymmetric}
%    |asymmetric| fixe \cs{@mparswitchfalse} et \cs{@twosidetrue}
%     Mettre |asymmetric=false| est sans effet.
%    \begin{macrocode}
\define@key{Gm}{asymmetric}[true]{\Gm@doifelse{asymmetric}{#1}%
  {\@twosidetrue\@mparswitchfalse}{}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{bindingoffset}
%    La commande ajoute l'espace spécifié à la marge intérieure.
%    \begin{macrocode}
\define@key{Gm}{bindingoffset}{\Gm@setlength\Gm@bindingoffset{#1}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{headheight}
%  \begin{key}{Gm}{headsep}
%  \begin{key}{Gm}{footskip}
%  \begin{key}{Gm}{head}
%  \begin{key}{Gm}{foot}
%    Les options définissant directement les dimensions de l'\gpart{en-tête}
%    et/ou du \gpart{pied de page}.
%    \begin{macrocode}
\define@key{Gm}{headheight}{\Gm@setlength\headheight{#1}}%
\define@key{Gm}{headsep}{\Gm@setlength\headsep{#1}}%
\define@key{Gm}{footskip}{\Gm@setlength\footskip{#1}}%
\let\KV@Gm@head\KV@Gm@headheight
\let\KV@Gm@foot\KV@Gm@footskip
%    \end{macrocode}
%  \end{key}\end{key}\end{key}\end{key}\end{key}
%  \begin{key}{Gm}{nohead}
%  \begin{key}{Gm}{nofoot}
%  \begin{key}{Gm}{noheadfoot}
%    Ces options sont seulement des raccourcis pour définir les dimensions
%    de l'\gpart{en-tête} et/ou du \gpart{pied de page} comme valant |0pt|.
%    \begin{macrocode}
\define@key{Gm}{nohead}[true]{\Gm@doifelse{nohead}{#1}%
  {\Gm@setlength\headheight\z@\Gm@setlength\headsep\z@}{}}%
\define@key{Gm}{nofoot}[true]{\Gm@doifelse{nofoot}{#1}%
  {\Gm@setlength\footskip\z@}{}}%
\define@key{Gm}{noheadfoot}[true]{\Gm@doifelse{noheadfoot}{#1}%
  {\Gm@setlength\headheight\z@\Gm@setlength\headsep
  \z@\Gm@setlength\footskip\z@}{}}%
%    \end{macrocode}
%  \end{key}\end{key}\end{key}
%  \begin{key}{Gm}{footnotesep}
%    Cette option définit directement la dimension de base \cs{footnotesep}.
%    \begin{macrocode}
\define@key{Gm}{footnotesep}{\Gm@setlength{\skip\footins}{#1}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{marginparwidth}
%  \begin{key}{Gm}{marginpar}
%  \begin{key}{Gm}{marginparsep}
%    Ces options définissent directement les dimensions de base 
%    \cs{marginparwidth} et \cs{marginparsep}.
%    \begin{macrocode}
\define@key{Gm}{marginparwidth}{\Gm@setlength\marginparwidth{#1}}%
\let\KV@Gm@marginpar\KV@Gm@marginparwidth
\define@key{Gm}{marginparsep}{\Gm@setlength\marginparsep{#1}}%
%    \end{macrocode}
%  \end{key}\end{key}\end{key}
%  \begin{key}{Gm}{nomarginpar}
%    Cette option est un raccourci pour \cs{marginparwidth}|=0pt| et
%    \cs{marginparsep}|=0pt|.
%    \begin{macrocode}
\define@key{Gm}{nomarginpar}[true]{\Gm@doifelse{nomarginpar}{#1}%
  {\Gm@setlength\marginparwidth\z@\Gm@setlength\marginparsep\z@}{}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{columnsep}
%    Cette option définit la dimension de base \cs{columnsep}.
%    \begin{macrocode}
\define@key{Gm}{columnsep}{\Gm@setlength\columnsep{#1}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{hoffset}
%  \begin{key}{Gm}{voffset}
%  \begin{key}{Gm}{offset}
%    Les deux premières options définissent les dimensions de base 
%    \cs{hoffset} et \cs{voffset}. |offset| définit les deux, éventuellement
%    avec la même valeur.
%    \begin{macrocode}
\define@key{Gm}{hoffset}{\Gm@setlength\hoffset{#1}}%
\define@key{Gm}{voffset}{\Gm@setlength\voffset{#1}}%
\define@key{Gm}{offset}{\Gm@branch{#1}{hoffset}{voffset}}%
%    \end{macrocode}
%  \end{key}\end{key}\end{key}
%  \begin{key}{Gm}{layouthoffset}
%  \begin{key}{Gm}{layoutvoffset}
%  \begin{key}{Gm}{layoutoffset}
%    Les deux premières options définissent les décalages du gabarit par 
%    rapports aux bords gauche et haut du papier. |layoutoffset| définit les
%    deux, éventuellement avec la même valeur.
%    \begin{macrocode}
\define@key{Gm}{layouthoffset}{\Gm@setlength\Gm@layouthoffset{#1}}%
\define@key{Gm}{layoutvoffset}{\Gm@setlength\Gm@layoutvoffset{#1}}%
\define@key{Gm}{layoutoffset}{\Gm@branch{#1}{layouthoffset}{layoutvoffset}}%
%    \end{macrocode}
%  \end{key}\end{key}\end{key}
%  \begin{key}{Gm}{twocolumn}
%    L'option sélectionne le mode \cs{twocolumn} avec un texte sur deux
%    colonnes.
%    \begin{macrocode}
\define@key{Gm}{twocolumn}[true]{%
  \Gm@doif{twocolumn}{#1}{\csname @twocolumn\Gm@bool\endcsname}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{onecolumn}
%    Cette option a l'effet inverse de l'option |twocolumn| avec un texte
%    sur une colonne unique.
%    \begin{macrocode}
\define@key{Gm}{onecolumn}[true]{%
  \Gm@doifelse{onecolumn}{#1}{\@twocolumnfalse}{\@twocolumntrue}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{reversemp}
%  \begin{key}{Gm}{reversemarginpar}
%    Ces deux options fixent toutes deux \cs{reversemargin} qui place
%    les notes marginales en marge intérieure.
%    \begin{macrocode}
\define@key{Gm}{reversemp}[true]{%
  \Gm@doif{reversemp}{#1}{\csname @reversemargin\Gm@bool\endcsname}}%
\define@key{Gm}{reversemarginpar}[true]{%
  \Gm@doif{reversemarginpar}{#1}{\csname @reversemargin\Gm@bool\endcsname}}%
%    \end{macrocode}
%  \end{key}\end{key}
%  \begin{key}{Gm}{driver}
%    Cette option gère le choix du pilote s'il est saisi ainsi que la 
%    valeur vide et les choix |auto| et |none|.
%    \begin{macrocode}
\define@key{Gm}{driver}{\ifGm@preamble{driver}{%
  \edef\@@tempa{#1}\edef\@@auto{auto}\edef\@@none{none}%
  \ifx\@@tempa\@empty\let\Gm@driver\relax\else
  \ifx\@@tempa\@@none\let\Gm@driver\relax\else
  \ifx\@@tempa\@@auto\let\Gm@driver\@empty\else
  \setkeys{Gm}{#1}\fi\fi\fi\let\@@auto\relax\let\@@none\relax}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{dvips}
%  \begin{key}{Gm}{dvipdfm}
%  \begin{key}{Gm}{pdftex}
%  \begin{key}{Gm}{xetex}
%  \begin{key}{Gm}{vtex}
%    L'extension \Gm\ gère les pilotes |dvips|, |dvipdfm|, 
%    |pdflatex| et |vtex|. |dvipdfm| fonctionne comme |dvips|.
%    \begin{macrocode}
\define@key{Gm}{dvips}[true]{\ifGm@preamble{dvips}{%
  \Gm@doifelse{dvips}{#1}{\Gm@setdriver{dvips}}{\Gm@unsetdriver{dvips}}}}%
\define@key{Gm}{dvipdfm}[true]{\ifGm@preamble{dvipdfm}{%
  \Gm@doifelse{dvipdfm}{#1}{\Gm@setdriver{dvipdfm}}{\Gm@unsetdriver{dvipdfm}}}}%
\define@key{Gm}{pdftex}[true]{\ifGm@preamble{pdftex}{%
  \Gm@doifelse{pdftex}{#1}{\Gm@setdriver{pdftex}}{\Gm@unsetdriver{pdftex}}}}%
\define@key{Gm}{xetex}[true]{\ifGm@preamble{xetex}{%
  \Gm@doifelse{xetex}{#1}{\Gm@setdriver{xetex}}{\Gm@unsetdriver{xetex}}}}%
\define@key{Gm}{vtex}[true]{\ifGm@preamble{vtex}{%
  \Gm@doifelse{vtex}{#1}{\Gm@setdriver{vtex}}{\Gm@unsetdriver{vtex}}}}%
%    \end{macrocode}
%  \end{key}\end{key}\end{key}\end{key}\end{key}
%  \begin{key}{Gm}{verbose}
%    Le mode avec commentaires exhaustifs.
%    \begin{macrocode}
\define@key{Gm}{verbose}[true]{\ifGm@preamble{verbose}{\Gm@setbool{verbose}{#1}}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{reset}
%    Cette option annule tous les choix d'option mis avant |reset|,
%    à l'exception de |pass|. |mag| ($\neq1000$) avec |truedimen| ne peut
%    pas non plus être annulé.
%    \begin{macrocode}
\define@key{Gm}{reset}[true]{\ifGm@preamble{reset}{%
  \Gm@doifelse{reset}{#1}{\Gm@restore@org\Gm@initall
  \ProcessOptionsKV[c]{Gm}\Gm@setdefaultpaper}{}}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{resetpaper}
%    Si |resetpaper| est mis à |true|, le format du papier redéfini dans 
%    l'extension n'est pas conservé et le format original est restauré. 
%    Cette option peut être utile pour imprimer de documents de format
%    non usuel avec des imprimantes et papiers ordinaires.
%    \begin{macrocode}
\define@key{Gm}{resetpaper}[true]{\ifGm@preamble{resetpaper}{%
  \Gm@setbool{resetpaper}{#1}}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{mag}
%    |mag| est développé immédiatement lorsqu'il est spécifié. Ainsi, |reset|
%    ne peut annuler |mag| quand il est défini avec |truedimen|.
%    \begin{macrocode}
\define@key{Gm}{mag}{\ifGm@preamble{mag}{\mag=#1}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{truedimen}
%    Si |truedimen| est mis à |true|, toutes les dimensions explicites 
%    internes sont changées en dimensions réelles, par exemple, |1in| est
%    changé en |1truein|.
%    \begin{macrocode}
\define@key{Gm}{truedimen}[true]{\ifGm@preamble{truedimen}{%
  \Gm@doifelse{truedimen}{#1}{\let\Gm@truedimen\Gm@true}%
  {\let\Gm@truedimen\@empty}}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{pass}
%    Cette option annule toutes les options spécifiées à l'exception
%    de |verbose|.
%    \begin{macrocode}
\define@key{Gm}{pass}[true]{\ifGm@preamble{pass}{\Gm@setbool{pass}{#1}}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{showframe}
%    L'option |showframe| affiche des cadres sur la page permettant de
%    comprendre la mise en page obtenue.
%    \begin{macrocode}
\define@key{Gm}{showframe}[true]{\Gm@setbool{showframe}{#1}}%
%    \end{macrocode}
%  \end{key}
%  \begin{key}{Gm}{showcrop}
%    L'option |showcrop| imprime des traits de coupe à chaque coin du gabarit..
%    \begin{macrocode}
\define@key{Gm}{showcrop}[true]{\Gm@setbool{showcrop}{#1}}%
%    \end{macrocode}
%  \end{key}
%    \begin{macro}{\Gm@setdefaultpaper}
%    Cette commande stocke les dimensions du papier.
%    Elle s'utilise après |\ProcessOptionsKV[c]{Gm}|.
%    Si l'option |landscape| de |\documentclass| est spécifiée, la classe
%    intervertit les dimensions du papier.
%    \begin{macrocode}
\def\Gm@setdefaultpaper{%
  \ifx\Gm@paper\@undefined
    \Gm@setsize{paper}(\strip@pt\paperwidth,\strip@pt\paperheight){pt}%
    \Gm@setsize{Gm@layout}(\strip@pt\paperwidth,\strip@pt\paperheight){pt}%
    \Gm@swap@papersizefalse
  \fi}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@adjustpaper}
%    Cette commande vérifie si la largeur/hauteur du papier n'est pas nulle,
%    ce qui utilisé dans \cs{Gm@process}.
%    Les dimensions du papier peuvent être interverties quand l'orientation
%    du papier est changée avec les options |landscape| ou |portrait|.
%    \begin{macrocode}
\def\Gm@adjustpaper{%
  \ifdim\paperwidth>\p@\else
    \PackageError{geometry}{%
    \string\paperwidth\space(\the\paperwidth) too short}{%
    Set a paper type (e.g., `a4paper').}%
  \fi
  \ifdim\paperheight>\p@\else
    \PackageError{geometry}{%
    \string\paperheight\space(\the\paperheight) too short}{%
    Set a paper type (e.g., `a4paper').}%
  \fi
  \ifGm@swap@papersize
    \setlength\@tempdima{\paperwidth}%
    \setlength\paperwidth{\paperheight}%
    \setlength\paperheight{\@tempdima}%
  \fi
  \ifGm@layout\else
    \setlength\Gm@layoutwidth{\paperwidth}%
    \setlength\Gm@layoutheight{\paperheight}%
  \fi}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@checkmp}
%    Cette commande vérifie si les notes marginales débordent de la page.
%    \begin{macrocode}
\def\Gm@checkmp{%
  \ifGm@includemp\else
    \@tempcnta\z@\@tempcntb\@ne
    \if@twocolumn
      \@tempcnta\@ne
    \else
      \if@reversemargin
        \@tempcnta\@ne\@tempcntb\z@
      \fi
    \fi
    \@tempdima\marginparwidth
    \advance\@tempdima\marginparsep
    \ifnum\@tempcnta=\@ne
      \@tempdimc\@tempdima
      \setlength\@tempdimb{\Gm@lmargin}%
      \advance\@tempdimc-\@tempdimb
      \ifdim\@tempdimc>\z@
        \Gm@warning{The marginal notes overrun the paper edge.^^J
        \@spaces Add \the\@tempdimc\space and more to the left margin}%
      \fi
    \fi
    \ifnum\@tempcntb=\@ne
      \@tempdimc\@tempdima
      \setlength\@tempdimb{\Gm@rmargin}%
      \advance\@tempdimc-\@tempdimb
      \ifdim\@tempdimc>\z@
        \Gm@warning{The marginal notes overrun the paper.^^J
        \@spaces Add \the\@tempdimc\space and more to the right margin}%
      \fi
    \fi
  \fi}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@adjustmp}
%    Cette commande traite la correction de note marginale quand |includemp|
%    est retenu, ce qui est utilisé dans \cs{Gm@process}. Les variables 
%    \cs{Gm@wd@mp}, \cs{Gm@odd@mp} and \cs{Gm@even@mp} sont définies ici.
%    Notez que \cs{Gm@even@mp} devrait être utilisé uniquement en mode
%    recto-verso.
%    \begin{macrocode}
\def\Gm@adjustmp{%
  \ifGm@includemp
    \@tempdimb\marginparwidth
    \advance\@tempdimb\marginparsep
    \Gm@wd@mp\@tempdimb
    \Gm@odd@mp\z@
    \Gm@even@mp\z@
    \if@twocolumn
      \Gm@wd@mp2\@tempdimb
      \Gm@odd@mp\@tempdimb
      \Gm@even@mp\@tempdimb
    \else
      \if@reversemargin
        \Gm@odd@mp\@tempdimb
        \if@mparswitch\else
          \Gm@even@mp\@tempdimb
        \fi
      \else
        \if@mparswitch
          \Gm@even@mp\@tempdimb
        \fi
      \fi
    \fi
  \fi}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@adjustbody}
%    Si la largeur du \gpart{corps} est spécifiée par l'utilisateur,
%    \cs{Gm@width} est déterminé proprement ici.
%    \begin{macrocode}
\def\Gm@adjustbody{
  \ifGm@hbody
    \ifx\Gm@width\@undefined
      \ifx\Gm@hscale\@undefined
        \Gm@defbylen{width}{\Gm@Dhscale\Gm@layoutwidth}%
      \else
        \Gm@defbylen{width}{\Gm@hscale\Gm@layoutwidth}%
      \fi
    \fi
    \ifx\Gm@textwidth\@undefined\else
      \setlength\@tempdima{\Gm@textwidth}%
      \ifGm@includemp
        \advance\@tempdima\Gm@wd@mp
      \fi
      \edef\Gm@width{\the\@tempdima}%
    \fi
  \fi
%    \end{macrocode}
%    Si la largeur du \gpart{corps} est spécifiée par l'utilisateur,
%    \cs{Gm@height} est déterminé proprement ici.
%    \begin{macrocode}
  \ifGm@vbody
    \ifx\Gm@height\@undefined
      \ifx\Gm@vscale\@undefined
        \Gm@defbylen{height}{\Gm@Dvscale\Gm@layoutheight}%
      \else
        \Gm@defbylen{height}{\Gm@vscale\Gm@layoutheight}%
      \fi
    \fi
    \ifx\Gm@lines\@undefined\else
%    \end{macrocode}
%    \cs{topskip} doit être ajusté pour que la formule
%    \og $\cs{textheight} = (lignes - 1) \times \cs{baselineskip} 
%    + \cs{topskip}$ \fg{}
%    soit respectée même si des fontes de grande taille sont utilisées par
%    l'utilisateur. Si \cs{topskip} est plus petit que \cs{ht}\cs{strutbox},
%    alors \cs{topskip} est fixé à la valeur de \cs{ht}\cs{strutbox}.
%    \begin{macrocode}
      \ifdim\topskip<\ht\strutbox
        \setlength\@tempdima{\topskip}%
        \setlength\topskip{\ht\strutbox}%
        \Gm@warning{\noexpand\topskip was changed from \the\@tempdima\space
        to \the\topskip}%
      \fi
      \setlength\@tempdima{\baselineskip}%
      \multiply\@tempdima\Gm@lines
      \addtolength\@tempdima{\topskip}%
      \addtolength\@tempdima{-\baselineskip}%
      \edef\Gm@textheight{\the\@tempdima}%
    \fi
    \ifx\Gm@textheight\@undefined\else
      \setlength\@tempdima{\Gm@textheight}%
      \ifGm@includehead
        \addtolength\@tempdima{\headheight}%
        \addtolength\@tempdima{\headsep}%
      \fi
      \ifGm@includefoot
        \addtolength\@tempdima{\footskip}%
      \fi
      \edef\Gm@height{\the\@tempdima}%
    \fi
  \fi}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@process}
%    La principale commande traitant les dimensions est définie ici.
%    \begin{macrocode}
\def\Gm@process{%
%    \end{macrocode}
%    Si |pass| est utilisée, les dimensions originales et autres bascules sont
%    restaurées et le traitement s'arrête là.
%    \begin{macrocode}
  \ifGm@pass
    \Gm@restore@org
  \else
    \Gm@@process
  \fi}%
%    \end{macrocode}
%    Le traitement principal
%    \begin{macrocode}
\def\Gm@@process{%
  \Gm@expandlengths
  \Gm@adjustpaper
  \addtolength\Gm@layoutwidth{-\Gm@bindingoffset}%
  \Gm@adjustmp
  \Gm@adjustbody
  \Gm@detall{h}{width}{lmargin}{rmargin}%
  \Gm@detall{v}{height}{tmargin}{bmargin}%
%    \end{macrocode}
%    Les dimensions réelles sont définies selon le résultat du calcul
%    d'autocomplétion.
%    \begin{macrocode}
  \setlength\textwidth{\Gm@width}%
  \setlength\textheight{\Gm@height}%
  \setlength\topmargin{\Gm@tmargin}%
  \setlength\oddsidemargin{\Gm@lmargin}%
  \addtolength\oddsidemargin{-1\Gm@truedimen in}%
%    \end{macrocode}
%    Si |includemp| vaut |true|, \cs{textwidth} et \cs{oddsidemargin}
%    sont ajustés. 
%    \begin{macrocode}
  \ifGm@includemp
    \advance\textwidth-\Gm@wd@mp
    \advance\oddsidemargin\Gm@odd@mp
  \fi
%    \end{macrocode}
%    Détermination de \cs{evensidemargin}.
%    En mode recto-verso, la valeur de la marge droite \cs{Gm@rmargin} est
%    utilisée. La largeur de la note marginale est incluse,
%    \cs{evensidemargin} doit être corrigé de \cs{Gm@even@mp}.
%    \begin{macrocode}
  \if@mparswitch
    \setlength\evensidemargin{\Gm@rmargin}%
    \addtolength\evensidemargin{-1\Gm@truedimen in}%
    \ifGm@includemp
      \advance\evensidemargin\Gm@even@mp
    \fi
  \else
    \evensidemargin\oddsidemargin
  \fi
%    \end{macrocode}
%    La correction de reliure pour \cs{oddsidemargin}.
%    \begin{macrocode}
  \advance\oddsidemargin\Gm@bindingoffset
  \addtolength\topmargin{-1\Gm@truedimen in}%
%    \end{macrocode}
%    Si l'en-tête de page est inclus dans le \gpart{corps total}, 
%    \cs{headheight} et \cs{headsep} sont retirés de \cs{textheight},
%    sinon de \cs{topmargin}.
%    \begin{macrocode}
  \ifGm@includehead
    \addtolength\textheight{-\headheight}%
    \addtolength\textheight{-\headsep}%
  \else
    \addtolength\topmargin{-\headheight}%
    \addtolength\topmargin{-\headsep}%
  \fi
%    \end{macrocode}
%    Si le pied de page est inclus dans le \gpart{corps total},
%    \cs{footskip} est retiré de \cs{textheight}.
%    \begin{macrocode}
  \ifGm@includefoot
    \addtolength\textheight{-\footskip}%
  \fi
%    \end{macrocode}
%    Si |heightrounded| est choisi, \cs{textheight} est arrondi.
%    \begin{macrocode}
  \ifGm@heightrounded
    \setlength\@tempdima{\textheight}%
    \addtolength\@tempdima{-\topskip}%
    \@tempcnta\@tempdima
    \@tempcntb\baselineskip
    \divide\@tempcnta\@tempcntb
    \setlength\@tempdimb{\baselineskip}%
    \multiply\@tempdimb\@tempcnta
    \advance\@tempdima-\@tempdimb
    \multiply\@tempdima\tw@
    \ifdim\@tempdima>\baselineskip
      \addtolength\@tempdimb{\baselineskip}%
    \fi
    \addtolength\@tempdimb{\topskip}%
    \textheight\@tempdimb
  \fi
%    \end{macrocode}
%    La largeur du papier est revue en ajoutant \cs{Gm@bindingoffset}.
%    \begin{macrocode}
  \advance\oddsidemargin\Gm@layouthoffset%
  \advance\evensidemargin\Gm@layouthoffset%
  \advance\topmargin\Gm@layoutvoffset%
  \addtolength\Gm@layoutwidth{\Gm@bindingoffset}%
  }% end of \Gm@@process
%    \end{macrocode}
%    \end{macro}
%    
%    \begin{macro}{\Gm@detectdriver}
%    Cette commande vérifie l'environnement de composition et change l'option
%    de pilote si nécessaire. Pour rendre la détection de plus robuste, la 
%    commande a été réécrite avec les extensions \textsf{ifpdf}, 
%    \textsf{ifvtex} et \textsf{ifxetex}.
%    \begin{macrocode}
\def\Gm@detectdriver{%
%    \end{macrocode} 
%    Si l'option de pilote n'est pas spécifiée, alors la détection automatique
%    de pilote se déclenche.
%    \begin{macrocode} 
  \ifx\Gm@driver\@empty
    \typeout{*geometry* driver: auto-detecting}%
%    \end{macrocode} 
%    \cs{ifpdf} est définie dans l'extension \textsf{ifpdf} dans 
%    \trad{l'ensemble} \og oberdiek \fg{}.
%    \begin{macrocode} 
    \ifpdf
      \Gm@setdriver{pdftex}%
    \else
      \Gm@setdriver{dvips}%
    \fi
%    \end{macrocode} 
%    \cs{ifvtex} est définie dans l'extension \textsf{ifvtex} dans
%    \trad{l'ensemble} \og oberdiek \fg{}.
%    \begin{macrocode} 
    \ifvtex
      \Gm@setdriver{vtex}%
    \fi
%    \end{macrocode}
%    \cs{ifxetex} est définie dans l'extension \textsf{ifxetex} écrite par
%    Will Robertson.
%    \begin{macrocode} 
    \ifxetex
      \Gm@setdriver{xetex}
    \fi
%    \end{macrocode}
%    Quand l'option de pilote est définie par l'utilisateur, sa validité est
%    vérifiée. 
%    \begin{macrocode} 
  \else
    \ifx\Gm@driver\Gm@xetex %%
      \ifxetex\else
        \Gm@warning{Wrong driver setting: `xetex'; trying `pdftex' driver}%
        \Gm@setdriver{pdftex}
      \fi
    \fi
    \ifx\Gm@driver\Gm@vtex
      \ifvtex\else
        \Gm@warning{Wrong driver setting: `vtex'; trying `dvips' driver}%
        \Gm@setdriver{dvips}%
      \fi
    \fi
  \fi
  \ifx\Gm@driver\relax
    \typeout{*geometry* detected driver: <none>}%
  \else
    \typeout{*geometry* detected driver: \Gm@driver}%
  \fi}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@showparams}
%    Imprime les paramètres obtenus et autres dimensions dans la sortie 
%    standard (STDOUT) si |verbose| est mise à |true|.
%    |\Gm@width| et |\Gm@height| sont développés pour obtenir leur véritable
%    taille.
%    \begin{macrocode}
\def\Gm@showparams#1{%
  \ifGm@verbose\expandafter\typeout\else\expandafter\wlog\fi
  {\Gm@logcontent{#1}}}%
\def\Gm@showdim#1{* \string#1=\the#1^^J}%
\def\Gm@showbool#1{\@nameuse{ifGm@#1}#1\space\fi}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@logcontent}
%    Le contenu des paramètres de géométrie et des dimensions de base pour
%    la mise en page.
%    \begin{macrocode}
\def\Gm@logcontent#1{%
  *geometry* verbose mode - [ #1 ] result:^^J%
  \ifGm@pass * pass: disregarded the geometry package!^^J%
  \else
  * driver: \if\Gm@driver<none>\else\Gm@driver\fi^^J%
  * paper: \ifx\Gm@paper\@undefined<default>\else\Gm@paper\fi^^J%
  * layout: \ifGm@layout<custom>\else<same size as paper>\fi^^J%
  \ifGm@layout
  * layout(width,height): (\the\Gm@layoutwidth,\the\Gm@layoutheight)^^J%
  \fi 
  * layoutoffset:(h,v)=(\the\Gm@layouthoffset,\the\Gm@layoutvoffset)^^J%
  \@ifundefined{Gm@lines}{}{* lines: \Gm@lines^^J}%
  \@ifundefined{Gm@hmarginratio}{}{* hratio: \Gm@hmarginratio^^J}%
  \@ifundefined{Gm@vmarginratio}{}{* vratio: \Gm@vmarginratio^^J}%
  \ifdim\Gm@bindingoffset=\z@\else
  * bindingoffset: \the\Gm@bindingoffset^^J\fi
  * modes: %
   \Gm@showbool{landscape}%
   \Gm@showbool{includehead}%
   \Gm@showbool{includefoot}%
   \Gm@showbool{includemp}%
   \if@twoside twoside\space\fi%
   \if@mparswitch\else\if@twoside asymmetric\space\fi\fi%
   \Gm@showbool{heightrounded}%
   \ifx\Gm@truedimen\@empty\else truedimen\space\fi%
   \Gm@showbool{showframe}%
   \Gm@showbool{showcrop}%
  ^^J%
  * h-part:(L,W,R)=(\Gm@lmargin, \Gm@width, \Gm@rmargin)^^J%
  * v-part:(T,H,B)=(\Gm@tmargin, \Gm@height, \Gm@bmargin)^^J%
  \fi
  \Gm@showdim{\paperwidth}%
  \Gm@showdim{\paperheight}%
  \Gm@showdim{\textwidth}%
  \Gm@showdim{\textheight}%
  \Gm@showdim{\oddsidemargin}%
  \Gm@showdim{\evensidemargin}%
  \Gm@showdim{\topmargin}%
  \Gm@showdim{\headheight}%
  \Gm@showdim{\headsep}%
  \Gm@showdim{\topskip}%
  \Gm@showdim{\footskip}%
  \Gm@showdim{\marginparwidth}%
  \Gm@showdim{\marginparsep}%
  \Gm@showdim{\columnsep}%
  * \string\skip\string\footins=\the\skip\footins^^J%
  \Gm@showdim{\hoffset}%
  \Gm@showdim{\voffset}%
  \Gm@showdim{\mag}%
  * \string\@twocolumn\if@twocolumn true\else false\fi^^J%
  * \string\@twoside\if@twoside true\else false\fi^^J%
  * \string\@mparswitch\if@mparswitch true\else false\fi^^J%
  * \string\@reversemargin\if@reversemargin true\else false\fi^^J%
  * (1in=72.27pt=25.4mm, 1cm=28.453pt)^^J}%
%    \end{macrocode}
%    \end{macro}
%
%    Les commandes pour les cadres et les traits de coupe.
%    \begin{macrocode}
\def\Gm@cropmark(#1,#2,#3,#4){%
  \begin{picture}(0,0)
    \setlength\unitlength{1truemm}%
    \linethickness{0.25pt}%
    \put(#3,0){\line(#1,0){17}}%
    \put(0,#4){\line(0,#2){17}}%
  \end{picture}}%
\providecommand*\vb@xt@{\vbox to}%
\def\Gm@vrule{\vrule width 0.2pt height\textheight depth\z@}%
\def\Gm@hrule{\hrule height 0.2pt depth\z@ width\textwidth}%
\def\Gm@hruled{\hrule height\z@ depth0.2pt width\textwidth}%
\newcommand*{\Gm@vrules@mpi}{%
  \hb@xt@\@tempdima{\llap{\Gm@vrule}\ignorespaces
  \hskip \textwidth\Gm@vrule\hskip \marginparsep
  \llap{\Gm@vrule}\hfil\Gm@vrule}}%
\newcommand*{\Gm@vrules@mpii}{%
  \hb@xt@\@tempdima{\hskip-\marginparwidth\hskip-\marginparsep
  \llap{\Gm@vrule}\ignorespaces
  \hskip \marginparwidth\rlap{\Gm@vrule}\hskip \marginparsep
  \llap{\Gm@vrule}\hskip\textwidth\rlap{\Gm@vrule}\hss}}%
\newcommand*{\Gm@pageframes}{%
  \vb@xt@\z@{%
   \ifGm@showcrop
    \vb@xt@\z@{\vskip-1\Gm@truedimen in\vskip\Gm@layoutvoffset%
     \hb@xt@\z@{\hskip-1\Gm@truedimen in\hskip\Gm@layouthoffset%
      \vb@xt@\Gm@layoutheight{%
       \let\protect\relax
       \hb@xt@\Gm@layoutwidth{\Gm@cropmark(-1,1,-3,3)\hfil\Gm@cropmark(1,1,3,3)}%
       \vfil
       \hb@xt@\Gm@layoutwidth{\Gm@cropmark(-1,-1,-3,-3)\hfil\Gm@cropmark(1,-1,3,-3)}}%
     \hss}%
    \vss}%
   \fi%
   \ifGm@showframe
    \if@twoside
     \ifodd\count\z@
       \let\@themargin\oddsidemargin
     \else
       \let\@themargin\evensidemargin
     \fi
    \fi
    \moveright\@themargin%
    \vb@xt@\z@{%
     \vskip\topmargin\vb@xt@\z@{\vss\Gm@hrule}%
     \vskip\headheight\vb@xt@\z@{\vss\Gm@hruled}%
     \vskip\headsep\vb@xt@\z@{\vss\Gm@hrule}%
     \@tempdima\textwidth
     \advance\@tempdima by \marginparsep
     \advance\@tempdima by \marginparwidth
     \if@mparswitch
      \ifodd\count\z@
       \Gm@vrules@mpi
      \else
       \Gm@vrules@mpii
      \fi
     \else
      \Gm@vrules@mpi
     \fi
     \vb@xt@\z@{\vss\Gm@hrule}%
     \vskip\footskip\vb@xt@\z@{\vss\Gm@hruled}%
     \vss}%
    \fi%
  }}%
%    \end{macrocode}
%
%    \begin{macro}{\ProcessOptionsKV}
%    Cette commande peut traiter les options de classe et les options
%    d'extension  utilisant le modèle \og clé=valeur \fg{}. Seules les 
%    options de classe sont traitées avec un argument optionnel \og |c| \fg{},
%    les options d'extension avec \og |p| \fg{} et, ceci, par défaut.
%    \begin{macrocode}
\def\ProcessOptionsKV{\@ifnextchar[%]
  {\@ProcessOptionsKV}{\@ProcessOptionsKV[]}}%
\def\@ProcessOptionsKV[#1]#2{%
  \let\@tempa\@empty
  \@tempcnta\z@
  \if#1p\@tempcnta\@ne\else\if#1c\@tempcnta\tw@\fi\fi
  \ifodd\@tempcnta
   \edef\@tempa{\@ptionlist{\@currname.\@currext}}%
  \else
    \@for\CurrentOption:=\@classoptionslist\do{%
      \@ifundefined{KV@#2@\CurrentOption}%
      {}{\edef\@tempa{\@tempa,\CurrentOption,}}}%
    \ifnum\@tempcnta=\z@
      \edef\@tempa{\@tempa,\@ptionlist{\@currname.\@currext}}%
    \fi
  \fi
  \edef\@tempa{\noexpand\setkeys{#2}{\@tempa}}%
  \@tempa
  \AtEndOfPackage{\let\@unprocessedoptions\relax}}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macrocode}
\def\Gm@setkeys{\setkeys{Gm}}%
%    \end{macrocode}
%    \begin{macro}{\Gm@processconf}
%    \cs{ExecuteOptions} est remplacé par \cs{Gm@setkey} pour rendre
%    possible le traitement de '\meta{clé}=\meta{valeur}' 
%    \trad{comme son argument.}
%    \begin{macrocode}
\def\Gm@processconfig{%
  \let\Gm@origExecuteOptions\ExecuteOptions
  \let\ExecuteOptions\Gm@setkeys
  \InputIfFileExists{geometry.cfg}{}{}
  \let\ExecuteOptions\Gm@origExecuteOptions}%
%    \end{macrocode}
%    \end{macro}
%
%  La mise en page avant le chargement de  \Gm\ est effectuée ici.
%  |\Gm@restore@org| est définie ici pour l'option |reset|.
%    \begin{macrocode}
\Gm@save
\edef\Gm@restore@org{\Gm@restore}%
\Gm@initall
%    \end{macrocode}
%    Traitement du fichier de configuration.
%    \begin{macrocode}
\Gm@processconfig
%    \end{macrocode}
%    Les arguments optionnels de \cs{documentclass} sont traités ici.
%    \begin{macrocode}
\ProcessOptionsKV[c]{Gm}%
%    \end{macrocode}
%    Les dimensions du papier données par la classe par défaut sont stockées.
%    \begin{macrocode}
\Gm@setdefaultpaper
%    \end{macrocode}
%    Les arguments optionnels de \cs{usepackage} sont traités ici.
%    \begin{macrocode}
\ProcessOptionsKV[p]{Gm}%
%    \end{macrocode}
%    Les paramétrages et calculs des dimensions de la mise en page sont
%    traités.
%    \begin{macrocode}
\Gm@process
%    \end{macrocode}
%
%    \begin{macro}{\AtBeginDocument}
%   Les traitements de |verbose|, |showframe| et des pilotes sont ajoutés à
%   |\AtBeginDocument|. La commande 
%   |\Gm@restore@org| est redéfinie ici avec le format du papier spécifié 
%   dans le préambule pour que |\newgeometry| l'utilise. Ceci devrait être
%   fait avant l'agrandissement du format du papier avec |\mag| car le
%   calcul de la mise en page sera sinon affecté par le changement de
%   taille du papier.
%    \begin{macrocode}
\AtBeginDocument{%
  \Gm@savelength{paperwidth}%
  \Gm@savelength{paperheight}%
  \edef\Gm@restore@org{\Gm@restore}%
%    \end{macrocode}
%    Le format initial est utilisé si |resetpaper| est choisi.
%    \begin{macrocode}
  \ifGm@resetpaper
    \edef\Gm@pw{\Gm@orgpw}%
    \edef\Gm@ph{\Gm@orgph}%
  \else
    \edef\Gm@pw{\the\paperwidth}%
    \edef\Gm@ph{\the\paperheight}%
  \fi
%    \end{macrocode}
%    Si |pass| n'est pas sélectionné, le format du papier est agrandi
%    conformément à la valeur de |mag| spécifiée.
%    \begin{macrocode}
  \ifGm@pass\else
    \ifnum\mag=\@m\else
      \Gm@magtooffset
      \divide\paperwidth\@m
      \multiply\paperwidth\the\mag
      \divide\paperheight\@m
      \multiply\paperheight\the\mag
    \fi
  \fi
%    \end{macrocode}
%    Vérification des options du pilote.
%    \begin{macrocode}
  \Gm@detectdriver
%    \end{macrocode}
%    Si |xetex| et |\pdfpagewidth| sont définis, |\pdfpagewidth| et 
%    |\pdfpageheight| sont sélectionnés.
%    \begin{macrocode}
  \ifx\Gm@driver\Gm@xetex
    \@ifundefined{pdfpagewidth}{}{%
      \setlength\pdfpagewidth{\Gm@pw}%
      \setlength\pdfpageheight{\Gm@ph}}%
    \ifnum\mag=\@m\else
      \ifx\Gm@truedimen\Gm@true
        \setlength\paperwidth{\Gm@pw}%
        \setlength\paperheight{\Gm@ph}%
      \fi
    \fi
  \fi
%    \end{macrocode}
%    Si |pdftex| vaut |true|, les commandes pdf sont définies proprement.
%    Pour éviter le problème d'agrandissement de |pdftex|,\cs{pdfhorigin} et
%    \cs{pdfvorigin} sont ajustées pour \cs{mag}.
%    \begin{macrocode}
  \ifx\Gm@driver\Gm@pdftex
    \@ifundefined{pdfpagewidth}{}{%
      \setlength\pdfpagewidth{\Gm@pw}%
      \setlength\pdfpageheight{\Gm@ph}}%
    \ifnum\mag=\@m\else
      \@tempdima=\mag sp%
      \@ifundefined{pdfhorigin}{}{%
        \divide\pdfhorigin\@tempdima
        \multiply\pdfhorigin\@m
        \divide\pdfvorigin\@tempdima
        \multiply\pdfvorigin\@m}%
      \ifx\Gm@truedimen\Gm@true
        \setlength\paperwidth{\Gm@pw}%
        \setlength\paperheight{\Gm@ph}%
      \fi
    \fi
  \fi
%    \end{macrocode}
%    Avec l'environnement V\TeX{}, les variables V\TeX{} variables sont
%    fixées ici.
%    \begin{macrocode}
  \ifx\Gm@driver\Gm@vtex
    \@ifundefined{mediawidth}{}{%
      \mediawidth=\paperwidth
      \mediaheight=\paperheight}%
    \ifvtexdvi
      \AtBeginDvi{\special{papersize=\the\paperwidth,\the\paperheight}}%
    \fi
  \fi
%    \end{macrocode}
%    Si |dvips| ou |dvipdfm| sont spécifiées, le format du papier est 
%    inclus dans le fichier dvi avec \cs{special}. Pour dvips, une correction
%    du \trad{mode} paysage est ajoutée car un document en format paysage 
%    converti par dvips est mis \trad{tête bêche} dans les lecteurs
%    PostScript.
%    \begin{macrocode}
  \ifx\Gm@driver\Gm@dvips
    \AtBeginDvi{\special{papersize=\the\paperwidth,\the\paperheight}}%
    \ifx\Gm@driver\Gm@dvips\ifGm@landscape
      \AtBeginDvi{\special{! /landplus90 true store}}%
    \fi\fi
%    \end{macrocode}
%    Si |dvipdfm| est spécifié et que l'extension \textsf{atbegshi} de 
%    \trad{l'ensemble} \og oberdiek \fg{} est chargée, 
%    \cs{AtBeginShipoutFirst} est utilisée au lieu de \cs{AtBeginDvi} 
%    pour des raisons de compatibilité avec \textsf{hyperref} et avec le
%    programme |dvipdfm|.
%    \begin{macrocode}
  \else\ifx\Gm@driver\Gm@dvipdfm
    \ifcase\ifx\AtBeginShipoutFirst\relax\@ne\else
        \ifx\AtBeginShipoutFirst\@undefined\@ne\else\z@\fi\fi
      \AtBeginShipoutFirst{\special{papersize=\the\paperwidth,\the\paperheight}}%
    \or 
      \AtBeginDvi{\special{papersize=\the\paperwidth,\the\paperheight}}%
    \fi
  \fi\fi
%    \end{macrocode}
%    Des cadres de page sont générés quand |showframe=true|, et des traits de
%    coupe sont générés quand |showcrop=true|, ceci sur chaque page.
%    L'extension \textsf{atbegshi} est utilisée pour \trad{surcharger}
%    |\shipout|.
%    \begin{macrocode}
  \@tempswafalse
  \ifGm@showframe
    \@tempswatrue
  \else\ifGm@showcrop
    \@tempswatrue
  \fi\fi
  \if@tempswa
    \RequirePackage{atbegshi}%
      \AtBeginShipout{\setbox\AtBeginShipoutBox=\vbox{%
        \baselineskip\z@skip\lineskip\z@skip\lineskiplimit\z@
        \Gm@pageframes\box\AtBeginShipoutBox}}%
  \fi
%    \end{macrocode}
%    Les dimensions de la mise en page pour \cs{restoregeometry} sont
%    sauvegardées à la fin de \cs{AtBeginDocument}.
%    \begin{macrocode}
  \Gm@save
  \edef\Gm@restore@pkg{\Gm@restore}%
%    \end{macrocode}
%    L'extension vérifie si les notes marginales débordent ou pas de la 
%    page, si |verbose| est sélectionné sauf si |pass| l'est également.
%    \begin{macrocode}
  \ifGm@verbose\ifGm@pass\else\Gm@checkmp\fi\fi
%    \end{macrocode}
%   |\Gm@showparams| intègre les paramètres obtenus ainsi que les dimensions
%   dans le fichier log. Avec |verbose|, ces éléments sont également affichés
%   sur le terminal.
%    \begin{macrocode}
  \Gm@showparams{preamble}%
%    \end{macrocode}
%    Les lignes suivantes libèrent les espaces mémoires devenus inutiles.
%    \begin{macrocode}
  \let\Gm@pw\relax
  \let\Gm@ph\relax
  }% end of \AtBeginDocument
%    \end{macrocode}
%    \end{macro}
%
%    \begin{macro}{\geometry}
%    La commande \cs{geometry} peut être appelée à plusieurs reprises
%    dans le préambule (autrement dit avant |\begin{document}|).
%    \begin{macrocode}
\newcommand{\geometry}[1]{%
  \Gm@clean
  \setkeys{Gm}{#1}%
  \Gm@process}%
\@onlypreamble\geometry
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\Gm@changelayout}
%   Cette commande, qui est appelée par |\newgeometry|,
%   |\restoregeometry| et |\loadgeometry|, change la mise en page en 
%   cours de document.
%    \begin{macrocode}
\DeclareRobustCommand\Gm@changelayout{%
  \setlength{\@colht}{\textheight}
  \setlength{\@colroom}{\textheight}%
  \setlength{\vsize}{\textheight}
  \setlength{\columnwidth}{\textwidth}%
  \if@twocolumn%
    \advance\columnwidth-\columnsep
    \divide\columnwidth\tw@%
    \@firstcolumntrue%
  \fi%
  \setlength{\hsize}{\columnwidth}%
  \setlength{\linewidth}{\hsize}}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\newgeometry}
%    La commande |\newgeometry|, qui modifie la mise en page, peut être
%    utilisée uniquement dans le document. Elle réinitialise les options
%    spécifiées dans le préambule à l'exception des options de format du 
%    papier et de |\mag|.
%    \begin{macrocode}
\newcommand{\newgeometry}[1]{%
  \clearpage
  \Gm@restore@org
  \Gm@initnewgm
  \Gm@newgmtrue
  \setkeys{Gm}{#1}%
  \Gm@newgmfalse
  \Gm@process
  \ifnum\mag=\@m\else\Gm@magtooffset\fi
  \Gm@changelayout
  \Gm@showparams{newgeometry}}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\restoregeometry}
%    Cette commande restaure la mise en page résultant des options spécifiées
%    dans le préambule, autrement dit la mise en forme qui s'obtient juste 
%    après |\begin{document}|.
%    \begin{macrocode}
\newcommand{\restoregeometry}{%
  \clearpage
  \Gm@restore@pkg
  \Gm@changelayout}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\savegeometry}
%    Cette commande sauvegarde la mise en page avec le \meta{nom} indiqué en
%    argument. La mise en page ainsi sauvegardée peut être chargée avec 
%    |\loadgeometry{|\meta{nom}|}|.
%    \begin{macrocode}mate{
\newcommand*{\savegeometry}[1]{%
  \Gm@save
  \expandafter\edef\csname Gm@restore@@#1\endcsname{\Gm@restore}}%
%    \end{macrocode}
%    \end{macro}
%    \begin{macro}{\loadgeometry}
%    Cette commande charge la mise en page sauvegardée avec 
%    |\savegeometry{|\meta{nom}|}|. Si le nom n'est pas trouvé, la commande
%    lance un avertissement et ne modifie pas la mise en page.
%    \begin{macrocode}
\newcommand*{\loadgeometry}[1]{%
  \clearpage
  \@ifundefined{Gm@restore@@#1}{%
    \PackageError{geometry}{%
    \string\loadgeometry : name `#1' undefined}{%
    The name `#1' should be predefined with \string\savegeometry}%
  }{\@nameuse{Gm@restore@@#1}%
  \Gm@changelayout}}%
%</package>
%    \end{macrocode}
%    \end{macro}
%
% \section{Fichier de configuration}
%    Dans le fichier de configuration |geometry.cfg|, il est possible
%    d'utiliser \cs{ExecuteOptions} pour définir les options par défaut
%    du site ou de l'utilisateur.
%    \begin{macrocode}
%<*config>
%<<SAVE_INTACT

%  Retirer le symbole de commentaire (%) de la ligne suivante et éditer la
%  ligne pour fixer les options par défaut.
%\ExecuteOptions{a4paper}

%SAVE_INTACT
%</config>
%    \end{macrocode}
%
% \section{Fichier d'exemple}
%    Voici un fichier d'exemple pour l'extension \Gm.
%    \begin{macrocode}
%<*samples>
%<<SAVE_INTACT
\documentclass[12pt]{article}% utilise le format letterpaper par défaut
% \documentclass[12pt,a4paper]{article}% pour le format A4
%-------------------------------------------------------------------------
% Retirer le symbole (%) et éditer une des lignes suivantes
%-------------------------------------------------------------------------
% \usepackage{geometry}
% \usepackage[centering]{geometry}
% \usepackage[width=10cm,vscale=.7]{geometry}
% \usepackage[margin=1cm, papersize={12cm,19cm}, resetpaper]{geometry}
% \usepackage[margin=1cm,includeheadfoot]{geometry}
\usepackage[margin=1cm,includeheadfoot,includemp]{geometry}
% \usepackage[margin=1cm,bindingoffset=1cm,twoside]{geometry}
% \usepackage[hmarginratio=2:1, vmargin=2cm]{geometry}
% \usepackage[hscale=0.5,twoside]{geometry}
% \usepackage[hscale=0.5,asymmetric]{geometry}
% \usepackage[hscale=0.5,heightrounded]{geometry}
% \usepackage[left=1cm,right=4cm,top=2cm,includefoot]{geometry}
% \usepackage[lines=20,left=2cm,right=6cm,top=2cm,twoside]{geometry}
% \usepackage[width=15cm, marginparwidth=3cm, includemp]{geometry}
% \usepackage[hdivide={1cm,,2cm}, vdivide={3cm,8in,}, nohead]{geometry}
% \usepackage[headsep=20pt, head=40pt,foot=20pt,includeheadfoot]{geometry}
% \usepackage[text={6in,8in}, top=2cm, left=2cm]{geometry}
% \usepackage[centering,includemp,twoside,landscape]{geometry}
% \usepackage[mag=1414,margin=2cm]{geometry}
% \usepackage[mag=1414,margin=2truecm,truedimen]{geometry}
% \usepackage[a5paper, landscape, twocolumn, twoside,
%    left=2cm, hmarginratio=2:1, includemp, marginparwidth=43pt,
%    bottom=1cm, foot=.7cm, includefoot, textheight=11cm, heightrounded,
%    columnsep=1cm,verbose]{geometry}
%-------------------------------------------------------------------------
% Il n'y a pas besoin de changer la suite
%-------------------------------------------------------------------------
\geometry{verbose,showframe}% des options en prime.
\usepackage{lipsum}% pour générer un faux texte de 150 paragraphes
\newcommand\mynote{\marginpar[\raggedright
Un exemple de note marginale en marge gauche.]%
{\raggedright Un exemple de note marginale.}}%
\newcommand\myfootnote{\footnote{Un exemple de note en bas de page.}}
\begin{document}
\lipsum[1-2]\mynote\lipsum[3-4]\mynote
\lipsum[5-11]\mynote\lipsum[12]\myfootnote
\lipsum[13-22]\mynote\lipsum[23-32]
\end{document}
%SAVE_INTACT
%</samples>
%    \end{macrocode}
%
% \Finale
%
\endinput
