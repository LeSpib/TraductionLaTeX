% +--------------------------------------------------+
% | Typeset this file to get the documentation.      |
% +--------------------------------------------------+
%
% Copyright (c) 1998-2011 by Javier Bezos.
% All Rights Reserved.
%
% This file is part of the titlesec distribution release 2.10.0
% -----------------------------------------------------------
%
% It may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2003/12/01 or later.
% 
% This work has the LPPL maintenance status "maintained".
% 
% The Current Maintainer of this work is Javier Bezos.

\def\fileversion{2.10.0}
\def\docdate{2011-12-15}

\documentclass[a4paper]{ltxguide}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[sf,bf,compact,topmarks,calcwidth,pagestyles]{titlesec}
\usepackage[french]{babel}
% Bloc pour traduction
\usepackage{color}
\usepackage{pifont}
\definecolor{orange5}{RGB}{255,153,0} 
\newcommand{\trad}[1]{\textbf{\textcolor{orange5}{\noindent\ding{54} #1 \ding{54}}}}
\newcommand{\tradini}{\color{orange5}\ding{54}}
\newcommand{\tradfin}{\ding{54}\color{black}}
% Fin du bloc qui doit être retiré une fois le travail achevé
\usepackage{titletoc}
\def\gobble#1{}
\def\cs#1{\expandafter\gobble\string\\#1}
\makeatletter
\newenvironment{desc}
  {\if@nobreak
     \vskip-\lastskip
     \vspace*{-2.5ex}%
   \fi
   \decl}
  {\enddecl}
\makeatother

\usepackage{textcomp,pslatex}
\usepackage[linktocpage]{hyperref}

\title{Les extensions \textsf{titlesec}, \textsf{titleps} et \textsf{titletoc} 
\footnote{L'extension \textsf{titlesec} est actuellement en version 2.10.0.  
\copyright{} 1998--2011 Javier Bezos. L'extension \textsf{titletoc} est actuellement 
en version 1.6. L'extension \textsf{titleps} est actuellement en version 1.1.0  
\copyright{} 1999--2011 Javier Bezos.  Javier Bezos. Tous droits réservés.}}

\author{Javier Bezos\footnote{Pour des rapports d'erreur, commentaires et 
suggestions, allez à \href{http://www.tex-tipografia.com/contact.html}%
{\texttt{http://www.tex-tipografia.com/contact.html}}.  L'anglais n'étant pas mon 
point fort, contactez-moi lorsque vous trouvez des erreurs dans ce manuel.  
D'autres extensions du même auteur : \textsf{gloss} (avec
Jos\'e Luis D\'{\i}az), \textsf{enumitem, accents, tensind, esindex,
dotlessi, babeltools}.}}

\date{\docdate}

\widenhead{2.1pc}{0pc}
\titlelabel{\thetitle.\quad}

\renewpagestyle{plain}[\small\sffamily\slshape]{
  \footrule
  \setfoot{}{\usepage}{}}

\newpagestyle{myps}[\small\sffamily\slshape]{
  \headrule
  \sethead{Titlesec}{\sectiontitle}{\usepage}}
  
\pagestyle{myps}

\newcommand{\examplesep}{%
  \begin{center}%
    \rule{4pt}{4pt}%
  \end{center}}

\contentsmargin{0pt}
\titlecontents{section}[1.8pc]
  {\addvspace{3pt}\bfseries}
  {\contentslabel[\thecontentslabel.]{1.8pc}}
  {}
  {\quad\thecontentspage}

\titlecontents*{subsection}[1.8pc]
  {\small}
  {\thecontentslabel. }
  {}
  {, \thecontentspage}
  [.---][.]

\addtolength{\topmargin}{-3pc}
\addtolength{\textwidth}{6pc}
\addtolength{\oddsidemargin}{-2pc}
\addtolength{\textheight}{7pc}

\raggedright
\parindent1em
\parskip0pt

\begin{document}

\maketitle
\tableofcontents
\section{Introduction}

Cette extension est essentiellement un remplacement --- partiel ou total --- des 
macros \LaTeX{} liées au sectionnement ---  principalement les titres, en-têtes et 
tables des matières. Le but est d'apporter de nouvelles fonctionnalités non disponibles 
actuellement sous \LaTeX{} : si vous souhaitez juste une interface plus accessible 
que celle d'un \LaTeX{} standard mais sans changer la façon dont \LaTeX{} travaille, 
vous pouvez recourir à \textsf{fancyhdr} de Piet van Oostrum, \textsf{sectsty} de 
Rowland McDonnell et \textsf{tocloft} de Peter Wilson, avec lesquels vous pouvez 
faire de jolies choses. \footnote{Dans la mesure où les commandes de sectionnement 
sont réécrites, leur comportement peut être quelque peu différent dans certains 
cas.}

Entre autres nouvelles fonctionnalités se trouvent :
\begin{itemize}
\item différentes classes et \og formes\fg{} de titres, avec des outils autorisant une 
grande variété de formats. Vous pouvez définir des formats différents pour les pages 
de gauche et de droite, avec des titres numérotés ou pas, mesurer la largeur d'un
titre, ajouter un nouveau niveau de sectionnement, utiliser des graphiques et bien 
plus encore. L'Annexe montre un bon nombre d'exemples : allez-y tout de suite !

\item des en-têtes et pieds de pages définis sans utilisation des commandes de 
type |\...mark|, et contenant éventuellement \trad{des marques de haut, de première valeur 
\emph{et} de double valeur}. Des marques de haut de page correctement synchronisées avec les 
titres, sans incompatibilités avec la mécanique des flottants. Des éléments 
décoratifs ajoutés aisément, incluant des environnements d'image.

\item de jolies tables des matières de forme libre, avec la possibilité de grouper les 
entrées de différents niveaux en un paragraphe ou de changer les formats des entrées 
au milieu d'un document. 
\end{itemize}
\textsf{Titlesec} fonctionne avec les classes standards et de nombreuses autres, 
incluant celles de l'AMS, et elle fonctionne sans aucune difficulté avec 
\textsf{hyperref}.\footnote{Cependant, notez bien que les classes AMS implémentent à nouveau les commandes internes d'origine. Ces changements seront perdus ici. La 
compatibilité avec \textsf{hyperref} a été testée avec \textsf{dvips}, 
\textsf{dvipdfm} et \textsf{pdftex} mais il s'agit d'une fonctionnalité non 
suivie. Pensez à vérifier que votre version d'\textsf{hyperref} est compatible 
avec \textsf{titlesec}. } Malheureusement, elle n'est pas compatible avec 
\textsf{memoir}, qui propose ses propres outils avec un sous-ensemble limité 
des fonctionnalités disponibles dans \textsf{titlesec}.

Comme d'habitude, chargez l'extension de façon classique avec |\usepackage|. 
Redéfinissez alors les commandes de sectionnement avec les paramétrages simples 
prédéfinis (voir section \og Interface simple \fg{}) ou avec les commandes mises à 
disposition si vous souhaitez des formats plus élaborés (voir section 
\og Interface avancée \fg{}). Dans ce dernier cas, vous avez uniquement besoin de 
redéfinir les commandes que vous utiliserez. Les deux méthodes sont disponibles 
au même moment mais parce que |\part| est habituellement implémentée de façon 
non standard, elle reste inchangée par les paramétrages prédéfinis et doit 
être modifiée avec l'aide de l'\og Interface Avancée \fg{}.


\section{Interface simple}
%~~~~~~~~~~~~~~~~~~~~~~~~~

La façon la plus simple de changer le format se fait par le moyen d'un ensemble 
d'options de l'extension et par un couple de commandes. Si les fonctionnalités 
apportées par cet ensemble d'outils vous donne satisfaction, vous n'avez pas besoin 
d'aller plus loin dans ce manuel. Lisez uniquement cette section et ignorez les 
suivantes. 

\subsection{Format}

Il y a trois groupes d'options contrôlant les fontes, tailles et alignements. 
Vous n'avez pas besoin de définir tous ces groupes puisque des valeurs par défaut 
sont disponibles pour chacun; cependant, vous devez au moins utiliser une option 
parmi celles possibles si vous souhaitez utiliser ce \og paramétrage simple \fg{}.

\begin{desc}
|rm sf tt md bf up it sl sc|
\end{desc}
Option sélectionnant la famille/série/forme correspondante. La valeur par défaut est |bf|.

\begin{desc}
|big medium small tiny|
\end{desc}
Option sélectionnant la taille des titres. Elle est fixée par défaut à |big|, ce qui donne 
la taille retenue dans les classes standards. Avec |tiny|, les sectionnements 
(chapitres exceptés) sont composées à la même taille que le texte. |Medium| et 
|small| sont des présentations intermédiaires entre les deux premières.

\begin{desc}
|raggedleft center raggedright|
\end{desc}

Option contrôlant l'alignement.

\subsection{Espacement}

\begin{desc}
|compact|
\end{desc}
Cette option est indépendante de celles vues ci-dessus et réduit l'espace au-dessus 
et au-dessous des titres. 

\subsection{Majuscules}

\begin{desc}
|uppercase|
\end{desc}

\fbox{2.9} Mise en majuscules des titres. Selon la classe, cela peut ne marcher avec 
\verb|\chapter| et \verb|\part|.

\subsection{Outils}

\begin{desc}
|\titlelabel{<format-de-numérotation>}|
\end{desc}
Changement du format de la numérotation des sections, sous-sections, etc. Une 
commande |\thetitle| est fournie et correspond respectivement à |\thesection|, 
|\thesubsection|, etc. La valeur par défaut des classes standards est 
\begin{verbatim}
\titlelabel{\thetitle\quad}
\end{verbatim}
et vous pouvez simplement ajouter un point après le compteur avec
\begin{verbatim}
\titlelabel{\thetitle.\quad}
\end{verbatim}
Ceci a été fait dans ce document.

\begin{desc}
|\titleformat*{<commande>}{<format>}|
\end{desc}

Cette commande permet de changer le |<format>| d'une commande de sectionnement, comme
par exemple :
\begin{verbatim}
\titleformat*{\section}{\itshape}
\end{verbatim}

\section{Interface avancée}
%~~~~~~~~~~~~~~~~~~~~~~~~~~

Deux commandes sont mises à disposition pour changer le format des titres. La première
est utilisée pour le format \og interne \fg{}, autrement dit la forme, la fonte, 
la numérotation, etc. La seconde définit le format \og externe \fg{}, autrement dit 
l'espacement avant et après, l'indentation, etc. Ce principe est pensé pour simplifier 
les définitions car, dans la plus plupart des cas, vous souhaiterez modifier soit 
l'espacement, soit le format\footnote{L'information est \og extraite \fg{} des 
commandes de sectionnement de la classe, excepté pour les chapitres et parties. Les
définitions sont supposées utiliser |\cs{@startsection}| --- si les sections ont été
définies sans cette commande, des valeurs arbitraires de format sont proposées et 
peuvent être modifiées par la suite. Malheureusement, il n'y a pas de manière de
récupérer les formats des chapitres ou parties ; un format similaire à celui des 
classes standards est alors utilisé.}. Ceci redéfinit les commandes de sectionnement
existantes mais n'en crée par de \emph{nouvelles}. De nouveaux niveaux de 
sectionnement peuvent être ajoutés avec |\titleclass|, comme décrit ci-après, et
leur format peut être fixé par les commandes décrites ici.

\subsection{Format}

Un ensemble de formes contrôlant la distribution basique des éléments d'un titre
est proposé. Les formes disponibles sont :
\begin{description}
\item[hang] est la valeur par défaut, avec une numérotation en retrait (comme avec 
|\section| des classes standards).

\item[block] compose le titre complet en un bloc (un paragraphe) sans mise en forme
additionnelle. Utile pour les titres centrés\footnote{La numérotation sera 
légèrement déplacé vers la gauche si le titre fait plus d'une ligne de long et que 
la forme \texttt{hang} est utilisée, exception faite des cas avec des |\string\\| 
explicites.} et les mises en forme spéciales (incluant des outils graphiques 
comme |picture|, |pspicture|, etc.).

\item[display] place la numérotation dans un paragraphe séparé (comme avec 
|\chapter| dans les classes standards).

\item[runin] Un titre suivi directement du texte sur la même ligne (comme avec 
|\paragraph| dans les classes standards).

\item[leftmargin] place le titre dans la marge de gauche. Les titres en bas de page
sont déplacés sur la page suivante et ne \trad{stick out} pas dans la marge du bas, ce 
qui signifie que de longs titres peuvent mener à des pages trop peu 
remplies\footnote{Cependant, les flottants placés une ou deux lignes après le 
titre interfèrent avec la découpe de page utilisée ici et le titre peut parfois 
rester placé en bas de page}. Dans ce cas, vous pouvez augmenter l'étirabilité 
des éléments de la page, utiliser |\raggedbottom| ou utiliser l'option d'extension 
|nobottomtitles| décrite ci-après. Dans la mesure où le mécanisme retenu est 
indépendant de celui des paragraphes placés dans les marges, ils peuvent se
superposer. Un synonyme obsolète à cette forme est |margin|.

\item[rightmargin] est similaire à |leftmargin| mais pour la marge de droite.

\item[drop] dispose le texte autour du titre, uniquement si le premier paragraphe
est plus que le titre (sinon, ils se superposent). Les commentaires associés à
|leftmargin| s'appliquent également ici. 

\item[wrap] est assez proche de |drop|.  La seule différence est que, tandis que
l'espace réservé dans |drop| pour le titre est fixé, il est automatiquement 
ajusté avec |wrap| à la ligne la plus longue. Les limitations expliquées 
ci-après pour |calcwidth| s'appliquent également ici.

\item[frame] Similaire à |display|, mais le titre sera encadré.
\end{description}

Notez bien, cependant, que certaines formes n'ont aucun sens dans le cas des
chapitres et des parties.

\begin{desc}
|\titleformat{<commande>}[<forme>]{<format>}{<num>}{<sep>}{<code-avant>}[<code-après>]|
\end{desc}

Ici,
\begin{itemize}
\item |<commande>| est la commande de sectionnement à redéfinir, autrement dit  
|\part|, |\chapter|, |\section|, |\subsection|, |\subsubsection|, |\paragraph| 
ou |\subparagraph|.

\item La forme du paragraphe est fixée par |<forme>|, dont les valeurs possibles sont
celles décrites ci-dessus.

\item |<format>| est le format appliqué à l'ensemble du titre --- numérotation et 
texte. Cet argument peut contenir des éléments verticaux (et horizontaux avec 
certaines formes) qui sont composés juste après l'espace au-dessus du titre.

\item La numérotation est définie dans |<num>|.  Vous pouvez le laisser vide s'il 
n'y a pas de numérotation de sectionnement à ce niveau, mais cela n'est pas 
recommandé car le nombre n'est pas supprimé dans la table des matières et dans 
les en-têtes (ou titres courants).
 
\item |<sep>| est la séparation horizontale entre la numérotation et le corps du
titre et doit être une longueur (qui ne doit pas être vide). Cet espace est 
vertical dans la forme |display| ; dans |frame|, il s'agit de la distance entre 
le texte et l'encadrement. |<num>| et |<sep>| sont tous deux ignorés dans les 
versions étoilées des commandes de sectionnement. Si vous utilisez |picture| et 
ses semblables, mettez ce paramètre à 0 pt.

\item |<code-avant>| est un code précédent le corps du titre. La toute dernière 
commande peut prendre un argument qui est le texte du titre\footnote{Rappelez-vous 
que la taille de la fonte peut être changée de façon sécurisée uniquement entre 
les paragraphes et que les changements dans le texte doivent être faits localement
avec un groupe; Sinon le \trad{leading} pourrait être faux --- trop grand ou trop 
petit.}. Toutefois, avec l'option d'extension \texttt{explicit}, le titre doit
être donné explicitement avec |#1| (voir ci-dessous).

\item |<code-après>| est le code suivant le corps du titre. Le matériel alors 
composé est en mode vertical avec |hang|, |block| et |display| tandis qu'il est 
en mode horizontal avec |runin| et |leftmargin| (\fbox{2.7} avec ce dernier au 
début du paragraphe). Sinon, le code est ignoré.
\end{itemize}

\begin{desc}
|\chaptertitlename|
\end{desc}

Elle renvoie par défaut à |\chaptername| sauf dans le cas des annexes où elle
renvoi vers |\appendixname|. Utilisez-là en lieu et place de |\chaptername| 
lorsque vous définissez un chapitre.

\subsection{Espacement}

\begin{desc}
|\titlespacing*{<commande>}{<gauche>}{<avant-sep>}{<après-sep>}[<droite-sep>]|
\end{desc}

La version étoilée supprime l'indentation du paragraphe suivant le titre, sauf
avec |drop|, |wrap| et |runin| pour lesquels cette possibilité n'a pas de 
sens. 

\begin{itemize}
\item |<gauche>| augmente la marge de gauche, sauf pour les formes |...margin| 
et |drop| où ce paramètre fixe la largeur du titre, pour |wrap|, la largeur 
maximale, et dans |runin| l'indentation juste avant le titre. Avec une 
valeur négative, le titre \trad{overhangs} \footnote{Ce paramètre n'est pas 
équivalent à |<indent>| de |\cs{@startsection}|, qui ne fonctionne pas 
correctement. Avec une valeur négative dans ce dernier et si |<indent>| est
plus grand que la largeur de la numérotation, la première ligne du titre 
commencera dans la marge extérieure, comme attendu, mais les lignes suivantes 
ne le feront pas; pire, les lignes seront raccourcis du côté de la marge 
droite.}.

\item |<sep-avant>| est l'espace vertical avant le titre.

\item |<sep-après>| est la séparation entre le titre et le texte --- verticale 
avec |hang|, |block|, et |display|, horizontale avec |runin|, |drop|, |wrap| 
and |...margin|. En retenant une valeur négative, vous pouvez définir un
espace réel plus petit que que |\parskip|\footnote{Voir  
Goossens, Mittelbach and Samarin: \textit{\LaTeX{} Companion}, 
Reading, Addison Wesley, 1993, p.~25.}.

\item Les formes |hang|, |block| et |display| disposent de la possibilité 
d'augmenter la marge |<sep-droit>| avec cet argument optionnel.
\end{itemize}

Si vous n'aimez pas saisir les valeurs complètes des espaces, incluant les
paramètres |plus| et |moins|, une abréviation |*|$n$ est disponible. Dans 
l'argument |<sep-avant>| c'est équivalent à $n$ |ex| avec une certaine 
\trad{extensibilité} et une infime \trad{compressabilité}. Dans le |<sep-après>|, une 
certaine \trad{extensibilité} (plus petite) et aucune \trad{compressabilité}\footnote{Ils
correspondent à $n$ fois |1ex plus .3ex minus .06ex| et |1ex plus .1ex|
respectivement.}. Ainsi vous pouvez écrire :
\begin{verbatim}
\titlespacing{\section}{0pt}{*4}{*1.5}
\end{verbatim}
Les longueurs |\beforetitleunit| et |\aftertitleunit| sont utilisées 
comme unités dans les paramètres |*| et vous pouvez les changer si vous
n'aimez pas les valeurs prédéfinies (ou pour de légers changements dans 
la composition, par exemple).

\textbf{Notes.} |\titlespacing| ne fonctionne pas avec |\chapter| et 
|\part| à moins que vous ne changiez leur format de titre aussi bien par
l'utilisation de |\titleformat|, les paramétrages simples ou |\titleclass|. 
Les arguments de |\titlespacing| doivent être des dimensions;  |\stretch| 
inclut une commande et ainsi génère une erreur.

\subsection{Outils liés à l'espacement}

Ces commandes sont fournies comme outils pour |\titleformat| et |\titlespacing|.

\begin{desc}
|\filright  \filcenter  \filleft  \fillast  \filinner  \filouter|
\end{desc}

Variantes des commandes |\ragged...|, avec de légères différences. En particulier,
les commandes |\ragged...| suppriment les espaces à droite et à gauche disposés par
|\titlespacing|\footnote{Rappelez-vous que l'extension \textsf{ragged2e} définit 
quelques commandes additionnelles pour l'alignement comme 
\texttt{\string\justifying}.}. |fillast| justifie le paragraphe, à l'exception 
de sa dernière ligne qui est centrée\footnote{Le nom est un petit peu étrange 
mais il est court.}. Ces commandes fonctionnent également pour la numérotation
associée à |frame|.

|\filinner| et |\filouter| correspondent à |\filleft| ou |\filright| selon la page
où elles se trouvent. Du fait du découpage asynchrones des pages par \TeX{}, ces
commandes peuvent être utilisées uniquement dans |\chapter|. Si vous souhaitez un
outil général pour définir différents formats dépendant de la page, voyez \og
\trad{Paramétrage étendu}\fg{} ci-dessous.

\begin{desc}
|\wordsep|
\end{desc}

L'espace \trad{inter-mot} pour la fonte courante.

\begin{desc}
|indentafter noindentafter| \quad (options d'extension)
\end{desc}

Contournement des paramétrages pour toutes les commandes de 
sectionnement\footnote{Anciennement nommées |indentfirst| et |nonindentfirst|, 
maintenant obsolètes.}

\begin{desc}
|rigidchapters rubberchapters| \quad (options d'extension)
\end{desc}

Avec |rigidchapters|, l'espacement pour les titres des chapitres est toujours
le même et |sep-après| dans |\titlespacing| ne représente pas l'espace entre le bas du texte du titre et le corps du texte comme décrit plus haut mais depuis le haut du texte du titre, autrement |<sep-avant>| $+$ |<sep-après>| est maintenant une distance fixe entre le haut du \trad{corps de page} et le texte principal. La valeur par défaut est |rubberchapters| où |<sep-après>| désigne la séparation
entre le titre et le texte, comme à l'accoutumée. En effet le nom est trompeur car
il ne s'applique pas qu'au chapitre par défaut mais à tout titre de \trad{classe} |top| (les classes sont développées dans la suite du document).

\begin{desc}
|bottomtitles nobottomtitles nobottomtitles*|  \quad (options d'extension)
\end{desc}

Si |nobottomtitles| est sélectionné, les titres proches de la marge du bas sont
renvoyés en page suivante et la marge sera \trad{ragged}. L'espace minimal requis pour
que la marge du bas ne déplace pas le titre est fixée (approximativement) par
\begin{verbatim}
\renewcommand{\bottomtitlespace}{<length>}
\end{verbatim}
dont la valeur par défaut est |.2\textheight|. Une simple marge \trad{ragged} sur 
la page précédente est obtenue en mettant une valeur de 0 pt. |bottomtitles| est
l'option par défaut, qui donne à |\bottomtitlespace| une valeur négative.

L'option |nobottomtitles*| fournit des calculs plus précis mais les titres des 
formes |margin|, |wrap| ou |drop| peuvent être mal placés. En temps normal, vous
devriez utiliser la version étoilée.

\begin{desc}
|aftersep largestsep|  \quad (options d'extension)
\end{desc}

Par défaut, lorsqu'il y a deux titres consécutifs, l'espace |<sep-après>| du 
premier titre est utilisé entre les deux titres. Parfois, ce comportement n'est
pas souhaité, en particulier quand l'espace |<sep-avant>| est plus grand que 
|<sep-après>| (sinon le comportement par défaut semble préférable). Avec 
|largestsep|, le plus grand espace est utilisé. La valeur par défaut est |aftersep|.

\begin{desc}
|\\  \\*|\\
|pageatnewline|  \quad (option d'extension)
\end{desc}

\fbox{2.6} Dans les versions 2.6 et suivantes, \verb|\\| ne permet pas de saut de
page et devient un équivalent de \verb|\\*|. Comme je présume que personne ne 
veux un saut de page dans un titre, ceci est le comportement par défaut. Si, pour
une raison étrange, vous souhaitez autoriser ces sauts de page dans les titres, 
utilisez l'option \verb|pageatnewline|, qui est fournie pour des questions 
de rétrocompatibilité.

\subsection{Filets}

L'extension inclut des outils pour aider à l'ajout de filets et autres éléments 
au-dessus et au-dessous du titre. Les marges des titres pouvant être modifiées, 
ces commandes prennent en compte les paramètres locaux pour placer les filets
proprement. Elles tient également compte de l'espace utilisé dans les titres 
marginaux.

\begin{desc}
|\titleline[<alignement>]{<matériel horizontal>}|\\
|\titlerule[<hauteur>]|\\
|\titlerule*[<largeur>]{<texte>}|
\end{desc}

La commande |\titleline| permet l'insertion d'une ligne, qui peut contenir
du texte et d'autres matériaux \og horizontaux \fg{}. Elle est pensée 
principalement pour des filets et des \trad{leaders} mais elle peut servir également
pour d'autres besoins. La ligne a une largeur fixée et doit être remplie, 
autrement dit |\titleline{CHAPITRE}| produit une boîte \trad{sous-remplie}. Ici 
le paramètre optionnel |<alignement>| (|l|, |r| ou |c|) peut aider, de telle sorte
que vous puissiez simplement saisir |\titleline[c]{CHAPTER}|\footnote{La valeur 
part défaut est le paramètre \texttt{s} de la commande \texttt{\cs{makebox}}.}.

L'utilisation de |\titleline| à des endroits où un matériel vertical n'est pas
attendu peut conduire à des anomalies. En d'autres termes, vous pouvez l'utiliser
dans les \trad{arguments} |<format>| (toujours) and |<code-après>|, que ce soit dans les 
formes |hang|, |display| et |block|. Pour la forme |display|, vous pouvez la placer au tout début des \trad{arguments} |<before-code>| et |<label>|. Mais vous pouvez tester cette
commande ailleurs : il y a de grandes chances qu'elle fonctionne à d'autres endroits.

La commande |\titlerule|, qui est incluse automatiquement dans |\titleline| si 
nécessaire, peut être utilisée pour construire des filets et des \trad{fillers}. La
version non étoilée trace des filets épais de 0.4 pt ou de |<height>| si ce dernier est
présent. 
Par exemple,
\begin{verbatim}
\titlerule[.8pt]%
\vspace{1pt}%
\titlerule
\end{verbatim}
traces deux filets de différents épaisseurs avec une séparation de 1 pt.

La version étoilée fait des \trad{leaders} avec le |<texte>| répété dans des boîtes
de sa largeur naturelle. Cette largeur de boîte peut être modifiée avec |<largeur>| 
mais la largeur de la première boîte reste inchangée pour que le |<texte>| soit 
aligné avec les bords gauche et droit de l'espace à remplir.
  
Par exemple, avec
\begin{verbatim}
\titleformat{\section}[leftmargin]
  {\titlerule*[1pc]{.}%
   \vspace{1ex}%
   \bfseries}
  {... définitions à la suite
\end{verbatim}
des \trad{leaders} s'étendant au-dessus du texte principal et du titre précèdent 
la section.

\begin{desc}
|calcwidth| \quad (option d'extension)
\end{desc}

La forme |wrap| a la capacité de mesurer les lignes du titre pour mettre en forme le
paragraphe. Cette capacité peut être étendue à trois autres formes --- |display|, 
|block| et |hang| --- avec cette option d'extension. La longueur de la plus longue 
ligne est restituée dans |\titlewidth|\footnote{Il existe deux paramètres plus fins 
|\string\titlewidthfirst| and |\string\titlewidthlast| qui restituent la longueur 
de la première et de la dernière ligne respectivement. Il n'y a pas de fonctions 
dédiées pour s'en servir mais vous pouvez assigner leurs valeurs à 
|\string\titlewidth| et utiliser alors |\string\titleline*|.}.

Du point de vue de \TeX{}, toute boîte est considérée comme du matériel composable.
Si une boîte a été élargie avec de l'espace ou, inversement, si un boîte avec du
texte a été réduite, la valeur de |\titlewidth| peut être fausse (du point de vue
d'un humain). La forme |hang|, par exemple, recourt en interne à de telles boîtes mais, 
dans ce cas, ce comportement est souhaité quand le titre est aligné à droite ; sinon
la forme |block| produit de meilleurs résultats. En d'autres termes, l'utilisation de
boîtes dont la largeur a été manipulée peut être source d'erreurs\footnote{Ce qui
inclut les lignes justifiées dont l'espace \trad{inter-mot} a été augmenté.}. Pour
être complet, certaines commandes peuvent embrouiller \TeX{} et interrompre l'analyse
du titre. Mais, si vous vous en tenez à du texte, |\\| et |\\[...]| (et il y a peu de 
chance que vous puissiez avoir besoin d'autre chose), vous ne devriez pas rencontrer
de problèmes.

Un autre point important est que les paramètres |<code-avant>|, |<num>|, |<sep>|, et 
|<titre>| (mais pas |<code-après>|) sont évalués deux fois au niveau local; si vous
augmentez un compteur  \emph{globalement}, vous l'augmenterez alors deux fois. Dans
la plupart des cas, placer une \trad{assignation conflictuelle} dans le |<code-après>| 
passera mais vous pouvez également passer la commande suivante.

\begin{desc}
|\iftitlemeasuring{<vrai>}{<faux>}|
\end{desc}

\fbox{2.9} Quand le titre est mesuré (première passe), l'argument |<vrai>| est
traité tandis que, quand le titre est réellement composé (seconde passe), l'argument 
|<faux>| est traité.

\begin{desc}
|\titleline*[<alignement>]{<matériel horizontal>}|
\end{desc}

Une variante de |\titleline| à utiliser uniquement avec |calcwidth|. Le texte sera
d'abord placé dans une boîte de largeur |\titlewidth|; cette boîte sera à son tour
placé dans la boîte principal avec l'alignement indiqué. Il n'y a pas d'équivalent
|\titlerule| et ceci explique pourquoi vous devez le placer explicitement dans un
|\titleline*| si vous voulez que |\titlewidth| soit pris en compte :
\begin{verbatim}
\titleline*[c]{\titlerule[.8pc]}
\end{verbatim}

\subsection{Styles de page}

\fbox{2.8} Vous pouvez assigner un style de page à des niveaux ayant la classe |top| 
ou |page| (voir \ref{classes}, page \pageref{classes}), aussi bien qu'au chapitre de 
base avec la commande suivante\footnote{Nommée dans l'éphémère version 2.7 
\texttt{\string\titlepagestyle}.} :
\begin{desc}
|\assignpagestyle{<commande>}{<style de page>}|
\end{desc}
Par exemple, pour supprimer le numéro de page avec les chapitres :
\begin{verbatim}
\assignpagestyle{\chapter}{empty}
\end{verbatim}

\subsection{Sauts de page}

\begin{desc}
|\sectionbreak    \subsectionbreak     \subsubsectionbreak|\\
|\paragraphbreak  \subparagraphbreak   \<section>break|
\end{desc}

En définissant ces commandes avec |\newcommand|, différents saut de page peuvent
être appliqués à différents niveaux hiérarchiques. Dans celles non définies, une
pénalité avec une valeur interne fournie par la classe est retenue (typiquement
$-300$). Par exemple,
\begin{verbatim}
\newcommand{\sectionbreak}{\clearpage}
\end{verbatim}
fait que les sections commencent sur une nouvelle page. Dans certaines mises en 
page, l'espace au-dessus du titre est préservé même si la section commence sur
une nouvelle page; ceci est accompli avec:
\begin{verbatim}
\newcommand{\sectionbreak}{%
  \addpenalty{-300}%
  \vspace*{0pt}}
\end{verbatim}

\fbox{2.6} \verb|\<section>break| est également disponible avec la classe 
\verb|top|. Les valeurs admises sont \verb|\cleardoublepage| (valeur par 
défaut avec \verb|openright|) et \verb|\clearpage| (valeur par défaut avec 
\verb|openany|). Ainsi, vous pouvez annuler l'effet de \verb|openright| en définissant 
\verb|\chapterbreak| comme \verb|\clearpage|, du moment que sa 
classe a été changée en \verb|top| (dans cet exemple, les parties conserveront 
le paramétrage \verb|openright|).

\begin{desc}
|\chaptertolists|
\end{desc}

\fbox{2.6} Si cette commande est définie, \trad{l'espace blanc écrit d'habitude 
dans les listes} (que sont la liste des figures et la liste des tables)
est remplacé par le code de cette commande. Si vous ne voulez pas de l'espace
quand un chapitre commence, définissez-le comme vide, autrement dit,
\begin{verbatim}
\newcommand{\chaptertolists}{}
\end{verbatim}

Cette commande n'est pas un outil général pour contrôler l'espacement dans
les listes et n'est valable que dans les titres de classe \trad{top}. Aussi,
elle ne fonctionnera pas avec les chapitres \trad{de base} sauf si vous changez
leur classe (d'un autre côté, |\...tolists| peut être utilisé dans tout
titre dans la classe est \trad{top}).

\subsection{Autres options de l'extension}

\begin{desc}
|explicit| \quad (option d'extension)
\end{desc}

\fbox{2.7} Avec cette option, le titre n'est pas implicite à la fin de |<code-avant>| 
mais doit être indiqué explicitement avec |#1| comme dans, par exemple :
\begin{verbatim} 
\titleformat{\section}
 {..}
 {\thesection}{..}{#1.}
\end{verbatim}
(Comparez ceci avec l'exemple de la section \ref{sec:dotafter}.) 

\begin{desc}
|newparttoc oldparttoc| \quad (options d'extension)
\end{desc}

Les parties standards écrivent leur numéro en table des matières de façon non
standard. Vous pouvez changer cela avec |newparttoc| de façon à ce que  
\textsf{titletoc} ou une extension similaire puisse manipuler cette entrée (ceci 
fonctionne dans le cas où |\part| a été redéfini).

\begin{desc}
|clearempty| \quad (option d'extension)
\end{desc}

Modifie le comportement de |\cleardoublepage| de sorte que le style de page 
|empty| soit utilisé dans les pages vides.

\begin{desc}
|toctitles| \quad (option d'extension)
\end{desc}

\fbox{2.6} Change le comportement de l'argument optionnel dans les 
commandes de sectionnement de telle manière qu'elles fixent uniquement le
titre en en-tête et non l'entrée en table des matières qui sera donc basée sur le titre complet.

\begin{desc}
|newlinetospace| \quad (option d'extension)
\end{desc}

\fbox{2.6} Remplace chaque occurrence de \verb|\\| ou \verb|\\*| dans les
titres par une espace dans les en-têtes et les entrées en table des 
matières. De cette façon, vous n'avez pas à répéter le titre juste pour
retrancher une commande de mise en forme. 

\subsection{Paramétrages étendus}
%~~~~~~~~~~~~~~~~~~~~~~~~~

Le premier argument de |\titleformat| et de |\titlespacing| 
dispose d'une syntaxe étendue qui permet de paramétrer différentes mises en forme
dépendant du contexte\footnote{L'extension \textsf{keyval} est requise pour pouvoir 
utiliser cette syntaxe.}. Cet argument peut être une liste de paires clé/valeur de 
la forme :
\begin{desc}
|<clé>=<valeur>, <clé>=<valeur>, <clé>, <clé>,...|
\end{desc}

Actuellement, seules les pages et les versions non numérotées sont prises en charge, 
\trad{besides} le nom de la commande de sectionnement. Ainsi, les clés disponibles sont :
\begin{itemize}
\item |name|. Les valeurs possibles sont |\chapter|, |\section|, etc.
\item |page|. Les valeurs possibles sont |odd| ou |even|.
\item |numberless|. Une clé sans valeur. Elle ne sert que si vous souhaitez disposer de 
variantes numérotées (sans cette clé) et non numérotées (avec |numberless|).
\end{itemize}
La forme basique décrite ci-dessus avec le nom de la commande de sectionnement, par exemple
\begin{verbatim}
\titleformat{\section} ...
\end{verbatim}
est en fait une abréviation pour
\begin{verbatim}
\titleformat{name=\section} ...
\end{verbatim}
Supposons que nous souhaitons une mise en page avec des titres dans la marge extérieure. 
Nous pourrions définir quelque chose comme 
\begin{verbatim}
\titleformat{name=\section,page=even}[leftmargin]
  {\filleft\scshape}{\thesection}{.5em}{}

\titleformat{name=\section,page=odd}[rightmargin]
  {\filright\scshape}{\thesection}{.5em}{}
\end{verbatim}
Dans la mesure où l'information de page est écrite dans le fichier |aux|, il faut deux 
compilations au minimum pour obtenir le résultat souhaité.


La version numérotée est généralement une base convenable pour parvenir à générer la 
version non numérotée car la suppression de la numérotation est le seul changement 
requis dans la plupart des cas. Mais, si vous avez besoin de mises en forme spéciales, 
la clé |numberless| existe et définit une version alternative des sections sans numéros 
(autrement dit celles avec un niveau sous |secnumdepth|, dans les parties préliminaires et 
annexes du document\footnote{respectivement obtenue avec |\cs{frontmatter}| et |\cs{backmatter}|.}
et, bien entendu, la version étoilée). Par exemple
\begin{verbatim}
\titleformat{name=\section}{...% La définition normale suit
\titleformat{name=\section,numberless}{...% La définition 
% non numérotée suit
\end{verbatim}
|<label>| et |<sep>| ne sont pas ignorés dans les variantes avec |numberless|.

Ces clés sont disponibles à la fois pour |\titleformat| et |\titlespacing|. 
En utilisant |page| dans l'une d'elles (ou les deux), les pages paires et impaires
seront mises en forme différemment. En effet, \og paire \fg{} et \og impaire \fg{}
sont des termes bien établis avec \LaTeX{} mais souvent source de confusion. Dans une 
impression en recto uniquement, les pages \og impaires \fg{} sont également des
pages \og paires \fg{} (cf.\@ |\oddsidemargin|).

Si vous souhaitez créer différentes versions pour les pages paires/impaires \emph{et}
avec ou sans numérotation, il est recommandé de définir quatre variantes.

Si vous retirez la clé |page| d'une commande de sectionnement, vous devez supprimer le
fichier |.aux|.

\subsection{Création de nouveaux niveaux et changement de classe} \label{classes}

Quand les formes et autres modifient le comportement des titres en lien avec le texte
voisin, les classes de titre autorisent le changement de leur comportement générique.
Avec l'aide des classes, vous pouvez insérer, par exemple, un nouveau niveau |subchapter| 
entre |chapter| et |section|, ou créer un nouveau plan de votre cru \emph{Faire un plan
cohérent et définir tous les éléments liés comme les compteurs, les commandes, les 
formats, l'espacement et, s'il y a une table des matières, le format de cette table est
laissé à la responsabilité de l'utilisateur.}. Il existe trois classes : |page| est comme
|\part| (issue de la classe book) sur une page séparée, |top| est comme |chapter| en 
commençant sur une nouvelle page et en plaçant le titre en haut de page, |straight| est
pensé pour les titres en milieu de texte\footnote{Il existe une autre classe nommée
|part| qui sert à émuler le |\cs{part}| de la classe article mais vous ne devriez pas 
l'utiliser du tout. Utiliser la classe |straight| à la place. Rappelez vous que certaines
fonctionnalités reposent sur ces classes et que ne change pas \textsf{titlesec} par défaut 
les définitions de \texttt{\string\part} et \texttt{\string\chapter}.}. 

\begin{desc}
|\titleclass{<nom>}{<classe>}|\\
|\titleclass{<nom>}{<classe>}[<commande-du-niveau-supérieur>]|
\end{desc}

Si vous n'utilisez pas l'argument optionnel, vous changez juste la |<classe>| de
|<nom>|. Par exemple:
\begin{verbatim}
\titleclass{\part}{straight}
\end{verbatim}
attribue la classe |straight| à |part|.

Quand la seconde forme est utilisée, le numéro du niveau est directement sous celui du
|<commande-du-niveau-supérieur>|. Par exemple:
\begin{verbatim}
\titleclass{\subchapter}{straight}[\chapter]
\newcounter{subchapter}
\renewcommand{\thesubchapter}{\Alph{subchapter}}
\end{verbatim}
crée un niveau sous celui du chapitre (du code additionnel est montré ici 
mais vous devez lui ajouter les paramétrages |\titleformat| et |\titlespacing| 
correspondant)\footnote{En ce qui concerne les compteurs, l'extension 
\textsf{remreset} peut être utile.}. 
Si le niveau du chapitre est zéro alors celui du sous-chapitre est 1; les
niveaux en dessous sont incrémenté de 1 (la section devient 2, la sous-section 3
et ainsi de suite).

Il existe deux commandes de sectionnement qui exécutent quelques actions 
supplémentaires selon leur nom et ignorant la classe :
\begin{itemize}
\item |\chapter| enregistre la chaîne définie dans |\chaptertitlename| et la prend
 en compte.
\item |\part| n'encapsule pas la numérotation de l'entrée en table des 
matières sauf si vous utilisez l'option |newparttoc|.
\end{itemize}

\begin{desc}
|loadonly| \quad (option d'extension)
\end{desc}

Supposons que vous voulez créer vos commandes de sectionnement à partir 
de rien. Cette option d'extension ignore tous les définitions antérieures, si elles
existent, et retire ainsi la possibilité d'utiliser les options décrites dans
\og Interface simple \fg{}. Alors, vous pouvez utiliser les outils de 
\textsf{titlesec} et construire les compteurs et numérotations correspondantes.

\begin{desc}
|\titleclass{<nom>}[<numéro-de-niveau-initial>]{<classe>}|
\end{desc}

Ici, le titre |<nom>| est considéré comme le plus haut niveau, avec un
numéro |<numéro-de-niveau-initial>| (typiquement 0 ou $-$1). Cette commande devrait
être maniée uniquement lors de la création de commande de sectionnement à partir de
rien avec l'aide de |loadonly| et il doit y avoir une unique déclaration de ce type.
Après celle-ci, le reste des niveaux est ajouté comme défini ci-dessus.

\section{Notes additionnelles}
%~~~~~~~~~~~~~~~~~~~~~~~~

Cette partie décrit brièvement quelques commandes \LaTeX{}, utiles lors de la définition
de commandes de sectionnement.

\subsection{Numérotations à largeur fixée}

La commande |\makebox|  permet d'utiliser une numérotation à largeur fixée, ce qui
fait reposer la marge gauche du titre actuel (pas la numérotation) au même endroit.
Par exemple (seul le code important est indiqué) :
\begin{verbatim}
\titleformat{\section}
  {..}
  {\makebox[2em]{\thesection}}{..}{..}
\end{verbatim}

Voir votre manuel \LaTeX{} pour plus d'information sur les commandes portant sur les boîtes.

\subsection{Versions étoilées}
\label{s:starred}

Recourir à la version étoilée dans les commandes de sectionnement est fortement
découragé. En lieu et place, vous pouvez utiliser un ensemble de commandes \trad{markup
oriented} qui sont facile à définir et modifier si nécessaire. Ainsi, vous pouvez tester
différentes mises en page avant de choisir l'une d'entre elles.

Tout d'abord, rappelez-vous que si vous écrivez
\begin{verbatim}
\setcounter{secnumdepth}{0}
\end{verbatim}
les sections ne seront pas numérotées mais seront inclues dans la table des matières
et les en-têtes.

Maintenant, supposons que vous voulez des sections avec un contenu spécial; par exemple,
une section (ou plus) avec des exercices. Nous utiliserons un environnement nommé
|exercices| tel que : 
\begin{verbatim}
\section{A section}
Texte d'une section normale.

\begin{exercices}
\section{Exercices A}
Des exercices

\section{Exercices B}
Des exercices
\end{exercices}
\end{verbatim}

La définition suivante supprime les nombres mais pas les entrées en table des 
matières et pas les impacts sur l'en-tête.
\begin{verbatim}
\newenvironment{exercices}
  {\setcounter{secnumdepth}{0}}
  {\setcounter{secnumdepth}{2}}
\end{verbatim}

La suivante ajoute une entrée en table des matières mais ne modifie pas l'en-tête.
\begin{verbatim}
\newenvironment{exercices}
 {\setcounter{secnumdepth}{0}%
  \renewcommand\sectionmark[1]{}}
 {\setcounter{secnumdepth}{2}}
\end{verbatim}

La suivante met à jour l'en-tête mais ne crée pas d'entrée en table des matières.
\begin{verbatim}
\newenvironment{exercices}
 {\setcounter{secnumdepth}{0}%
  \addtocontents{toc}{\protect\setcounter{tocdepth}{0}\ignorespaces}}
 {\setcounter{secnumdepth}{2}%
  \addtocontents{toc}{\protect\setcounter{tocdepth}{2}\ignorespaces}}
\end{verbatim}
(Je trouve ce dernier cas un peu étrange dans notre exemple; le premier et le deuxième 
cas ont bien plus de sens. Par ailleurs, les |\ignorespaces| ne sont pas très importants et 
ils ne sont nécessaires que si vous avez des espaces non souhaités dans la table des 
matières.) 

Ceci fonctionne avec les classes standards mais, si vous utilisez \textsf{fancyhdr} ou
\textsf{titlesec} pour définir les en-têtes, il faudra avoir recours à des mécaniques 
plus avancées pour supprimer les numéros de section. Dans \textsf{titlesec}, ceci 
s'obtient avec |\ifthesection| (voir ci-dessous).

Comme vous pouvez le voir, il n'y a pas de |\addcontentsline|, de |\markboth| ou de 
|\section*|, juste de la structure logique. Bien entendu, vous pouvez changer ce point
à merci; par exemple, si vous décidez que ces sections doivent être composées en
petits caractères (avec |\small|) et que vous réalisez que vous n'aimez pas cela, 
retirez-le.

Tandis que les commandes d'un \LaTeX{} standard sont plus faciles et directes 
pour les cas simples, je pense que la méthode proposée ci-dessus est de loin préférable
pour les longs documents.


\subsection{Variantes}

Supposons que vous souhaitez marquer des sections comme \og sujet avancé \fg{}
par une astérisque après la numérotation. 
Le code suivant effectue cette mise en forme :
\begin{verbatim}
\newcommand{\secmark}{}
\newenvironment{avance}
  {\renewcommand{\secmark}{*}}
  {}
\titleformat{\section}
  {..}
  {\thesection\secmark\quad}{..}{..}
\end{verbatim}

Pour marquer une section, écrivez :
\begin{verbatim}
\begin{avance}
\section{...}
...
\end{avance}
\end{verbatim}

Ceci marque les sections mais pas les sous-sections. Si vous souhaitez un peu de
redondance en marquant les sous-sections également, vous devez les définir de
façon similaire.

\subsection{Placement d'un point après un titre de section}
\label{sec:dotafter}

De nos jours, ce style n'est plus en usage mais il était relativement courant
auparavant. 
La technique de base a été décrite ci-dessus mais en voici un rappel :
\begin{verbatim}
\newcommand{\periodafter}[1]{#1.}
\titleformat{\section}
 {..}
 {\thesection}{..}{..\periodafter}
\end{verbatim}

Si vous avez à combiner ce point avec une commande (tel un soulignement), vous pouvez
saisir :
\begin{verbatim}
\newcommand{\periodafter}[2]{#1{#2.}}
\titleformat{\section}
 {..}
 {\thesection}{..}{..\periodafter{\ul}} % \ul de l'extension soul
\end{verbatim}

Cependant, vous pourriez préférer ici l'option d'extension \texttt{explicit}.

\section{L'extension \textsf{titleps} et les styles de page}
%~~~~~~~~~~~~~~~~~~~

\tradini The \textsf{titleps} package provides tools for one-stage setting of
page styles (headlines and footlines).  A higher-level interface is
used, where the mark mechanism is hidden and there is no need to deal
with |\leftmark|s and |\rightmark|s -- just use a command or variable
registered as a ``mark'' as the expected value will be returned, i.e.,
those when the mark was emitted, either by a sectioning command or
explicitly with |\chaptermark|, |\sectionmark|, etc.  A simple
example, whose meaning should be obvious, is:
\begin{verbatim}
\newpagestyle{main}{
  \sethead[\thepage][\chaptertitle][(\thesection] % even
          {\thesection)}{\sectiontitle}{\thepage}} % odd
\pagestyle{main}
\end{verbatim}

Other features are:
\begin{itemize}
\item Working top marks, compatible with floats (unlike the standard 
|\topmark|, which does not work correctly in \LaTeX{}).
\item Access to top, first and bot marks in a single headline/footline
(e.g., the first and last section numbers).
\item Marks for more than 2 sectioning levels.
\item Simple (and not so simple) headrules and footrules.
\item Headlines and footlines for pages with floats.
\item Headlines and footlines for specific floats (a sort of 
|\thispagestyle| for floats).
\item Multiple sets of marks (named here \emph{markset}s and 
\textit{extra marks}).
\end{itemize}

It can be used without \textsf{titlesec}, but you will get most of 
it when used together.  To load it as a separate package, use the
customary \verb|\usepackage{titleps}|, but with \textsf{titlesec} you
have to load it with:
\begin{verbatim}
\usepackage[pagestyles]{titlesec}
\end{verbatim}

Please, read |titleps.pdf| (or typeset |titleps.tex|) for further 
information.

\section{Contents: The \textsf{titletoc} package}
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This package is a companion to the \textsf{titlesec} package and it 
handles
toc entries. However, it is an independent package and you can use
it alone. The philosophy is similar to that of \textsf{titlesec}---instead
of hooking the commands as defined by standard \LaTeX{} and classes,
there are new commands which you can format the toc entries with
in a generic way. This means you have to learn just
two new basic command and a couple of tools, no more, and you have access 
to
new features. Paragraph format
and fonts are set with commands like |\\|, 
|\makebox|,
|\large|, |\itshape|, and so on, and entries are not shaped in any
fashion because they are pretty free form.

The behaviour of entries
defined with \textsf{titletoc} are different at some points
to those created with the standard commands. In particular:
\begin{itemize}
\item Pages are never broken between entries if the first one is
of an higher level than the second one as, for instance, between
a section and a subsection. If both of them are of the same
level, the break is allowed, and if the first is lower than
the second, it is considered a good place for a page break.

\item The symbols in the leaders are not centered but flushed
right. That is usually more convenient.
\end{itemize}

I would like to note no attempt to handle tocs can be complete
because the standard \LaTeX{} commands write directly some formatting
commands which cannot be removed.  This is particularly important in
lists of figures and tables, and in the |\part| command.\footnote{But
some of these issues are fixed by \textsf{titlesec}.}

\subsection{A ten-minute guide to \textsf{titletoc}}

Toc entries are treated as rectangular areas where the text
and probably a filler will be written. Let's draw such an
area (of course, the lines themselves are not printed):
\setlength{\unitlength}{1cm}
\begin{center}
\begin{picture}(8,2.2)
\put(1,1){\line(1,0){6}}
\put(1,2){\line(1,0){6}}
\put(1,1){\line(0,1){1}}
\put(7,1){\line(0,1){1}}
\put(0,.7){\vector(1,0){1}}
\put(8,.7){\vector(-1,0){1}}
\put(0,.2){\makebox(1,.5)[b]{\textit{left}}}
\put(7,.2){\makebox(1,.5)[b]{\textit{right}}}
\end{picture}
\end{center}

The space between the left page margin and the left edge of
the area will be named |<left>|; similarly we have |<right>|.
You are allowed to modify the beginning of the first line and
the ending of the last line. For example by ``taking up'' both
places with |\hspace*{2pc}| the area becomes:
\begin{center}
\begin{picture}(8,2.2)
\put(1,1){\line(1,0){5.5}}
\put(6.5,1){\line(0,1){.5}}
\put(6.5,1.5){\line(1,0){.5}}
\put(1.5,2){\line(1,0){5.5}}
\put(1,1.5){\line(1,0){.5}}
\put(1.5,1.5){\line(0,1){.5}}
\put(1,1){\line(0,1){.5}}
\put(7,1.5){\line(0,1){.5}}
\put(0,.7){\vector(1,0){1}}
\put(8,.7){\vector(-1,0){1}}
\put(0,.2){\makebox(1,.5)[b]{\textit{left}}}
\put(7,.2){\makebox(1,.5)[b]{\textit{right}}}
\end{picture}
\end{center}
And by ``clearing'' space in both places with |\hspace*{-2pc}|
the area becomes:
\begin{center}
\begin{picture}(8,2.2)
\put(1,1){\line(1,0){6.5}}
\put(7.5,1){\line(0,1){.5}}
\put(7.5,1.5){\line(-1,0){.5}}
\put(.5,2){\line(1,0){6.5}}
\put(1,1.5){\line(-1,0){.5}}
\put(.5,1.5){\line(0,1){.5}}
\put(1,1){\line(0,1){.5}}
\put(7,1.5){\line(0,1){.5}}
\put(0,.7){\vector(1,0){1}}
\put(8,.7){\vector(-1,0){1}}
\put(0,.2){\makebox(1,.5)[b]{\textit{left}}}
\put(7,.2){\makebox(1,.5)[b]{\textit{right}}}
\end{picture}
\end{center}

If you have seen tocs, the latter should be familiar to you--
the label at the very beginning, the page at the very end:
\begin{verbatim}
    3.2  This is an example showing that toc
         entries fits in that scheme . . . .   4
\end{verbatim}

All you need is to put these elements in the right way.  If you have 
reserved the space with |\hspace*{-2pc}|, simply put a box 2 pc 
width 
containing the section label or page so that this space will be
retrieved; this layout is used so often that two commands are provided
which does that for you:
\begin{itemize}
\item |\contentslabel{<length>}| creates the space at the beginning 
and
   prints the section number.
\item |\contentspage| creates a space at the end of length |<right>|
   and prints the page number aligned at the right.
\end{itemize}

Now, we are about to show the three basic commands:

\begin{desc}
|\dottedcontents{<section>}[<left>]{<above-code>}|\\
|                {<label width>}{<leader width>}|
\end{desc}

Here:
\begin{itemize}
\item |<section>| is the section name without backslash: |part|,
  |chapter|, |section|, etc. |figure| and |table| are allowed, too.
  (The backlash is omitted because we are dealing with the concept
   and not the |\part|, |\section|, etc. macros themselves. 
  Furthermore, |figure| and |table| are environments.)

\item |<above-code>| is code for the global formatting of the entry.
  Vertical material is allowed. At this point the value of
  |\thecontentslabel| (see below) is known which enables you to
  take decisions depending on its value (with the help of
  the \textsf{ifthen} package). You may use the \textsf{titlesec}
  |\filleft|, |\filright|, |\filcenter| and |\fillast| commands. 

\item |<left>| even if bracketed is currently mandatory and it
  sets the left margin from the left page margin.
  
\item |<label width>| is the width of the space created for the label,
  as described  above.
  
\item |<leader width>| is the width of the box containing the char to
  be used as filler, as described below.
\end{itemize}

The definitions for section and subsection entries in the \textsf{book}
class are roughly equivalent to: 
\begin{verbatim}
\contentsmargin{2.55em}
\dottedcontents{section}[3.8em]{}{2.3em}{1pc}
\dottedcontents{subsection}[6.1em]{}{3.2em}{1pc}
\end{verbatim}

\begin{desc}
|\titlecontents{<section>}[<left>]{<above-code>}|\\
|              {<numbered-entry-format>}{<numberless-entry-format>}|\\
|              {<filler-page-format>}[<below-code>]|
\end{desc}

Here |<section>|, |<left>| and |<above-code>| like above, and
\begin{itemize}
\item |<numbered-entry-format>| is in horizontal mode and it will
  be used just before the entry title. As in |\titleformat|, the
  last command can take an argument with the title.

\item |<numberless-entry-format>| is like the above if there is, well,
  no label.

\item|<filler-page-format>| is self explanatory. Fillers are created
with the |\titlerule| command which is shared by that package and
\textsf{titlesec}. However, when used in this context its behaviour
changes a little to fit the needs of toc leaders.\footnote{For
\TeX{}nicians, the default |\cs{xleaders}| becomes 
|\cs{leaders}|.} You might prefer a |\hspace| instead.

\item And finally |<below-code>| is code following the entry for, say,
  vertical space.
\end{itemize}

When defining entries, use |\addvspace| if you want to add vertical
space, and |\\*| instead of |\\| for line breaks.

This command can be used in the middle of a document to change
the format of toc/lot/lof entries at any point. The new format is
written to the toc file and hence two runs are necessary to
see the changes.

\begin{desc}
|\contentsmargin{<right>}|
\end{desc}

The value set is used in all of sections. If you are wondering
why, the answer is quite simple: in most of cases the |<right>|
margin will be constant. However, you are allowed to change
it locally in the |<before-code>| arguments. Note as well that
the default space in standard classes does not leave room to
display boldfaced page number above 100 and therefore you
might want to set a larger margin with this command.

The \textsf{book} class formats section entries
similarly (but not equally) to:
\begin{verbatim}
\titlecontents{section}
              [3.8em] % ie, 1.5em (chapter) + 2.3em 
              {}
              {\contentslabel{2.3em}}
              {\hspace*{-2.3em}}
              {\titlerule*[1pc]{.}\contentspage}
\end{verbatim}
Compare this definition with that given above and you will
understand how |\dottedcontents| is defined.

Although standard classes use font dependent units (mainly em),
it is recommended using absolute ones (pc, pt, etc.) to ensure
they entries are aligned correctly.

\subsection{And more}

Strict typographical rules state full text lines shouldn't 
surpass the last dot of the leaders; ideally they should be aligned.  
Surprisingly enough, \TeX{} lacks of a tool for doing that 
automatically---when you fill a box with leading dots, they can be 
centered in the box with the |\cleaders| primitive , ``justified'' 
with |\xleaders| or aligned with the outermost enclosing box with 
|\leaders|, but there is no way to align them with the ``current'' 
margin.

So, the only way to get a fine layout is by hand.  To do , you can 
use the an optional argument in the |\contentsmargin| command whose 
syntax in full is the following:
\begin{desc}
|\contentsmargin[<correction>]{<right>}|
\end{desc}

The |<correction>| length is added to the |<right>| one in all of lines 
except the last one, where the leaders are placed.  For instance, if 
the text lines are 6 pt longer than the last dot, you should rewrite the 
|\contentsmargin| command to add a  |<correction>| of 6 pt.%
\footnote{Usefully,  many dvi previewers allow to get the coordinates of
the pointed location.}  Unlike the standard \LaTeX{} tools, the 
|\titlerule*| command has been designed so that the |<correction>| 
will have the minimum value possible.

\begin{desc}
|\thecontentslabel  \thecontentspage|
\end{desc}

Contains the text with the label and the page with no additional
formatting, except  written by the class.

\begin{desc}
|\contentslabel[<format>]{<space>}|\\
|\contentspage[<format>]|
\end{desc}

As described above, but with different |<format>|s. The defaults are
just |\thecontentslabel| and |\thecontentspage|, respectively.

\begin{desc}
|\contentspush{<text>}|
\end{desc}

Prints the |<text>| and increases
|<left>| by the width of |<text>|. It is similar to
the hang shape of \textsf{titlesec}.

\begin{desc}
|\titlecontents*{<section>}[<left>]{<above-code>}|\\
|               {<numbered-entry-format>}{<numberless-entry-format>}|\\
|               {<filler-page-format>}[<separator>]|\\[3pt]
|            |\textit{or ...}|{<filler-page-format>}[<separator>][<end>]|\\
|            |\textit{or ...}|{<filler-page-format>}[<begin>][<separator>][<end>]|
\end{desc}

This starred version groups the entries in a single paragraph.
The |<separator>| argument is the separator between entries, and
there is a further optional argument with an ending
punctuation.  For example, this document sets:
\begin{verbatim}
\titlecontents*{subsection}[1.5em]
  {\small}
  {\thecontentslabel. }
  {}
  {, \thecontentspage}
  [.---][.]
\end{verbatim}
whose result is showed in the contents at the very beginning of
this document. Note  the paragraph format must be written in
the |<above-code>| argument.

Let us explain how the optional arguments works.  First note the number
of them determines their meaning---since there should be a separator
between entries this one is always present; on the other hand,
|<begin>| is rarely used and hence it has the lowest ``preference.''
The simplest case is when the titles are of the same level; in this
case the |<sepatator>| and the |<end>| parameters (which default to
empty) are inserted between consecutive entries and at the end of the
block, respectively.  |<before-code>| is executed just once at the
very beginning of the block and its declarations are local to the
whole set of entries.

Now suppose we want to group entries of two levels; in this 
case a nesting principle applies.  To fix ideas, we will use section 
and subsection.  When a subsection entry begins after a section one, 
|<before-code>| is executed and |<begin>| of subsection is 
inserted, which should contain text format only.  Then subsections are 
added inserting separators as explained above.  When a section 
arrives, the ending punctuation of subsection and the separator of 
section is added (except if the block is finished by a subsection, 
where the ending of section is added instead).  We said ``after a 
section'' because a subsection never begins a block.\footnote{In rare 
cases that could be necessary, yet.} The 
subsection entries are nested inside the section ones, and 
declarations are again local.

An example will illustrate that.
\begin{verbatim}
\titlecontents*{section}[0pt]
  {\small\itshape}{}{}
  {}[ \textbullet\ ][.]

\titlecontents*{subsection}[0pt]
  {\upshape}{}{}
  {, \thecontentspage}[ (][. ][)]
\end{verbatim}
produces something similar to:
$$\begin{minipage}{\textwidth}
\small\itshape The first section \textbullet\ The second one  \textbullet\ 
The third one {\upshape(A subsection in it, 1. Another, 2)} \textbullet\ A
fourth section {\upshape(A subsection in it, 1. Another, 2)}.
\end{minipage}$$

\begin{desc}
|\contentsuse{<name>}{<ext>}|
\end{desc}

Makes \textsf{titletoc} aware of the existence of a contents file with 
|<ext>| extension. Mainly, it makes sure the command 
|\contentsfinish| is added at the end of the corresponding 
contents (and which must be added at the end of tocs made by hand). 
The package performs
\begin{verbatim}
\contentsuse{figure}{lof}
\contentsuse{table}{lot}
\end{verbatim}

% \begin{desc}
% |\titlelevels{<top>}{<level-list>}|
% \end{desc}
% 
% If you are not using \textsf{titlesec}, this command modifies
% the list of level names. Only necessary if you have been devised
% your own scheme of titles.

\begin{desc}
|leftlabels  rightlabels| \quad (Package options)
\end{desc}

These package options set how the labels are aligned in 
|\contentslabel|.
Default is |rightlabels|. With |leftlabels| the default |<format>| for
|\contentslabel| becomes |\thecontenstlabel\enspace|.

\begin{desc}
|dotinlabels| \quad (Package option)
\end{desc}

With this package option, a dot is added after the label in 
|\contentslabel|.

\subsection{Partial TOC's}

\begin{desc}
|\startcontents[<name>]|
\end{desc}

At the point where this command is used, a partial toc begins (note
the document doesn't require a |\tableofcontents| for partial tocs to
work).  The |<name>| argument allows different sets of tocs and it
defaults to |default|.  These sets may be intermingled, but usually
will be nested.  For example, you may want two kinds of partial tocs:
by part and by chapter (besides the full toc, of course).  When a part
begins, write |\startcontents[parts]|, and when a chapter
|\startcontents[chapters]|.  This way a new toc is started at each
part and chapter.\footnote{\emph{All} partial tocs are stored in a
single file with extension |.ptc|.}

\begin{desc}
|\stopcontents[<name>]|\\
|\resumecontents[<name>]|
\end{desc}

Stops the partial toc of |<name>| kind, which may be resumed.
Since partial contents are stopped by |\startcontents| if necessary,
those macros will not be used very often.

\begin{desc}
|\printcontents[<name>]{<prefix>}{<start-level>}{<toc-code>}|
\end{desc}

Print the current partial toc of |<name>| kind. The format
of the main toc entries are used, except if there is a |<prefix>|.
In such a case, the format of |<prefix><level>| is used, provided
it is defined. For example, if prefix is |l| and the format of
|lsection| is defined, then this definition will be used; otherwise,
the format is that of |section|. The |<start-level>| parameter sets the
top level of the tocs---for a part toc it would be |0| (chapter), for a
chapter toc |1| (section), and so on. Finally, |<toc-code>| is
local code for the current toc; it may be used to change the
|tocdepth| value or |\contentsmargin|, for instance.

A simple usage might look like (provided you are using 
\textsf{titlesec} as well):
\begin{verbatim}
\titleformat{\chapter}[display]
  {...}{...}{...}  % Your definitions come here
  [\vspace*{4pc}%
   \startcontents
   \printcontents{l}{1}{\setcounter{tocdepth}{2}}]
   
\titlecontents*{lsection}[0pt]
  {\small\itshape}{}{}
  {}[ \textbullet\ ][.]
\end{verbatim}
The included entries are those in levels 1 to 2 inclusive (i.e., 1 
and 2).

\subsection[Partial lists]{Partial lists \normalfont\normalsize\fbox{2.6}}

You may want to create partial LOFs and LOTs. The systax is similar to
that of partial TOCs and what was said for them can be applied here.
The commands are:
\begin{desc}
|\startlist[<name>]{<list>}|\\
|\stoplist[<name>]{<list>}|\\
|\resumelist[<name>]{<list>}|\\
|\printlist[<name>]{<list>}{<prefix>}{<toc-code>}|
\end{desc}

Here |<list>| is either |lof| or |lot|.  Note as well |\printlist|
does not have the |<start-level>| argument, because figures and tables
have not levels.  Currently, only those two float lists are supported,
but in a future release support for more kinds of float lists will be
added.  Unfortunately, many classes write some formatting commands to
these lists (more precisely, \verb|\addvspace|s in chapters); I'm
still not sure how to remove these commands without removing as well
others which can be wanted, but for the time being a quick trick to
remove these spaces is to redefine \verb|\addvspace| in the
|<toc-code>| with |\renewcommand\addvspace[1]{}|.

\subsection{Examples}

\begin{verbatim}
\titlecontents{chapter}
              [0pt]
              {\addvspace{1pc}%
               \itshape}%
              {\contentsmargin{0pt}%
               \bfseries
               \makebox[0pt][r]{\huge\thecontentslabel\enspace}%
               \large}
              {\contentsmargin{0pt}%
               \large}
              {\quad\thepage}
              [\addvspace{.5pc}]
\end{verbatim}

The chapter number is out at the edge of the page margin, in a font
larger than the font of the title. If the chapter lacks of number
(because, say, it is the preface or the bibliography) it is not
boldfaced. The page number follows the title without fillers, but
after an em-space.

\begin{verbatim}
\titlecontents{chapter}
              [3pc]
              {\addvspace{1.5pc}%
               \filcenter}
              {CHAPTER \thecontentslabel\\*[.2pc]%
               \huge}
              {\huge}
              {}  % That is, without page number
              [\addvspace{.5pc}]
\end{verbatim}
              
The chapter title is centered with the chapter label on top
of it. There is no page number.

\subsection{Inserting a figure in the contents}

The |\addtocontents| command is still available and you may use
it to perform special operation, like inserting a figure just before
or after of an entry. Sadly, fragile
arguments are not allowed and writing complex code could be a mess.
The trick is to define a command to perform the required operations
which in turn is written with |\protect|.

Let's suppose we want to insert a figure before an entry.
\begin{verbatim}
\newcommand{\figureintoc}[1]{
  \begin{figure}
    \includegraphics{#1}%
  \end{figure}}
\end{verbatim}
makes the dirty work.

In the place where a figure is inserted write:
\begin{verbatim}
\addtocontents{\protect\figureintoc{myfig}}
\end{verbatim}

\subsection{Marking entries with asterisks}

Let's now resume a problem explained in relation with
\textsf{titlesec}: marking sections with asterisks to
denote an ``advanced topic'' unless the star should
be printed in the toc as well. Here is the code:
\begin{verbatim}
\newcommand{\secmark}{}
\newcommand{\marktotoc}[1]{\renewcommand{\secmark}{#1}}
\newenvironment{advanced}
  {\renewcommand{\secmark}{*}%
   \addtocontents{toc}{\protect\marktotoc{*}}}
  {\addtocontents{toc}{\protect\marktotoc{}}}
\titleformat{\section}
  {..}
  {\thesection\secmark}{..}{..}
\titlecontents{section}[..]{..}
  {\contentslabel[\thecontentslabel\secmark]{1.5pc}}{..}{..}
\end{verbatim}

\tradfin
\section{La philosophie de \textsf{titlesec}}

Une fois que vous avez lu cette documentation, il devrait être clair que cette
extension n'est pas destinée à l'utilisateur occasionnel qui aime la présentation
classique et souhaite juste y apporter quelques modifications simples. Il s'agit ici
d'un outil pour le typographe sérieux qui a une idée claire de la présentation 
souhaitée et qui n'avait auparavant pas les moyens pour l'obtenir. Rien n'est fait non
plus pour améliorer votre goût en matière de mise en forme des sectionnements.


\section{Annexes}

Les exemples suivants servent d'illustrations. Dans cette partie, |\parskip| est
fixé à 0 pt.

\begingroup

\addtocontents{toc}{\protect\setcounter{tocdepth}{-1}\ignorespaces}
\setlength{\parskip}{0pt}

\examplesep

\titleformat{\section}[block]
  {\normalfont\bfseries\filcenter}{\fbox{\itshape\thesection}}{1em}{}

\section[Annexes]{Ceci est un exemple de la commande de section définie ci-dessous et, je dirais même plus, ceci est un exemple de la commande de section définie ci-dessous}

\begin{verbatim}
\titleformat{\section}[block]
  {\normalfont\bfseries\filcenter}{\fbox{\itshape\thesection}}{1em}{}
\end{verbatim}

\examplesep

\titleformat{\section}[frame]
  {\normalfont}
  {\filright
   \footnotesize
   \enspace SECTION \thesection\enspace}
  {8pt}
  {\Large\bfseries\filcenter}

\section[Annexes]{Un titre encadré}

\begin{verbatim}
\titleformat{\section}[frame]
  {\normalfont}
  {\filright
   \footnotesize
   \enspace SECTION \thesection\enspace}
  {8pt}
  {\Large\bfseries\filcenter}
\end{verbatim}

\examplesep

\titleformat{\section}
  {\titlerule
   \vspace{.8ex}%
   \normalfont\itshape}
  {\thesection.}{.5em}{}

\section[Annexes]{Un titre avec filet horizontal}

\begin{verbatim}
\titleformat{\section}
  {\titlerule
   \vspace{.8ex}%
   \normalfont\itshape}
  {\thesection.}{.5em}{}
\end{verbatim}

\examplesep

\titleformat{\section}[block]
  {\normalfont\sffamily}
  {\thesection}{.5em}{\titlerule\\[.8ex]\bfseries}
  
\section[Annexes]{Un autre titre avec filet horizontal}

\begin{verbatim}
\titleformat{\section}[block]
  {\normalfont\sffamily}
  {\thesection}{.5em}{\titlerule\\[.8ex]\bfseries}
\end{verbatim}

\examplesep

\titleformat{\section}[block]
  {\filcenter\large
   \addtolength{\titlewidth}{2pc}%
   \titleline*[c]{\titlerule*[.6pc]{\tiny\textbullet}}%
   \addvspace{6pt}%
   \normalfont\sffamily}
  {\thesection}{1em}{}
\titlespacing{\section}
  {5pc}{*2}{*2}[5pc]

\section[Annexes]{La largeur du filet ci-dessus est celle de la
  plus longue ligne de ce titre augmentée de deux picas}

\leavevmode

\section[Annexes]{Celui-ci est plus court}

\begin{verbatim}
\titleformat{\section}[block]
  {\filcenter\large
   \addtolength{\titlewidth}{2pc}%
   \titleline*[c]{\titlerule*[.6pc]{\tiny\textbullet}}%
   \addvspace{6pt}%
   \normalfont\sffamily}
  {\thesection}{1em}{}
\titlespacing{\section}
  {5pc}{*2}{*2}[5pc]
\end{verbatim}

\examplesep

\titleformat{\section}[display]
  {\normalfont\fillast}
  {\scshape section \oldstylenums{\thesection}}
  {1ex minus .1ex}
  {\small}
\titlespacing{\section}
  {3pc}{*3}{*2}[3pc]

\section[Annexes]{Ceci est un exemple de la commande de section définie ci-dessous 
et, je dirais même plus, ceci est un exemple de la commande de section définie 
ci-dessous. Répétons-le : ceci est un exemple de la commande de section définie 
ci-dessous et, je dirais même plus, ceci est un exemple de la commande de section 
définie ci-dessous}

\begin{verbatim}
\titleformat{\section}[display]
  {\normalfont\fillast}
  {\scshape section \oldstylenums{\thesection}}
  {1ex minus .1ex}
  {\small}
\titlespacing{\section}
  {3pc}{*3}{*2}[3pc]
\end{verbatim}

\examplesep

\titleformat{\section}[runin]
  {\normalfont\scshape}
  {}{0pt}{}
\titlespacing{\section}
  {\parindent}{*2}{\wordsep}
  
\section*{Cette partie est le titre lui-même}
et cette partie est le corps du texte associé\ldots

\begin{verbatim}
\titleformat{\section}[runin]
  {\normalfont\scshape}
  {}{0pt}{}
\titlespacing{\section}
  {\parindent}{*2}{\wordsep}
\end{verbatim}

\examplesep

\titleformat{\section}[wrap]
  {\normalfont\fontseries{b}\selectfont\filright}
  {\thesection.}{.5em}{}
\titlespacing{\section}
  {12pc}{1.5ex plus .1ex minus .2ex}{1pc}

\section[Annexes]{Un exemple simple d'une forme \og wrap \fg{} sur une section}

Suivi d'un peu de texte pour montrer le résultat. Suivi d'un peu de texte pour 
montrer le résultat. Suivi d'un peu de texte pour montrer le résultat. Suivi d'un 
peu de texte pour montrer le résultat. Suivi d'un peu de texte pour montrer le
résultat. Suivi d'un peu de texte pour montrer le résultat. Suivi d'un peu de 
texte pour montrer le résultat.

\section[Annexes]{Et un autre}

Notez comment le texte enveloppe (en anglais, \og wrap \fg{}) le titre et que
l'espace qui lui est réservé est automatiquement réajustée. Et il est suivi par un 
peu de texte pour illustrer le propos. Et il est suivi par un peu de texte pour
illustrer le propos.

\begin{verbatim}
\titleformat{\section}[wrap]
  {\normalfont\fontseries{b}\selectfont\filright}
  {\thesection.}{.5em}{}
\titlespacing{\section}
  {12pc}{1.5ex plus .1ex minus .2ex}{1pc}
\end{verbatim}

\examplesep

\titleformat{\section}[runin]
  {\normalfont\bfseries}
  {\S\ \thesection.}{.5em}{}[.---]
\titlespacing{\section}
  {\parindent}{1.5ex plus .1ex minus .2ex}{0pt}

\section[Annexes]{Un titre attaché à l'ancienne}

Bien sûr, vous pourriez préférer juste un point après le titre. Dans ce cas, l'argument
optionnel devrait être |[.]| et l'espace attenante devrait avoir une valeur 
assez forte (1em, par exemple).

\begin{verbatim}
\titleformat{\section}[runin]
  {\normalfont\bfseries}
  {\S\ \thesection.}{.5em}{}[.---]
\titlespacing{\section}
  {\parindent}{1.5ex plus .1ex minus .2ex}{0pt}
\end{verbatim}

\examplesep

\titleformat{\section}[leftmargin]
  {\normalfont
   \titlerule*[.6em]{\bfseries .}%
   \vspace{6pt}%
   \sffamily\bfseries\filleft}
  {\thesection}{.5em}{}
\titlespacing{\section}
  {4pc}{1.5pc plus .1ex minus .2ex}{1pc}

\section*{Exemple de section marginale}

Suivi d'un peu de texte pour montrer le résultat. Mais ne vous arrêtez pas de lire car
l'exemple qui suit illustre comment tirer parti d'autres extensions. La dernière 
commande dans le dernier argument peut prendre un argument, à savoir le titre sans 
autre commande additionnelle incluse. Nous donnons ici juste le code mais vous pouvez
l'essayer. Donc, avec l'extension \textsf{soul}, vous pourriez écrire
\begin{verbatim}
\newcommand{\secformat}[1]{\MakeLowercase{\so{#1}}}
   % \so spaces out letters
\titleformat{\section}[block]
  {\normalfont\scshape\filcenter}
  {\thesection}
  {1em}
  {\secformat}
\end{verbatim}

Le titre marginal ci-dessus a été défini avec le code suivant :
\begin{verbatim}
\titleformat{\section}[leftmargin]
  {\normalfont
   \titlerule*[.6em]{\bfseries.}%
   \vspace{6pt}%
   \sffamily\bfseries\filleft}
  {\thesection}{.5em}{}
\titlespacing{\section}
  {4pc}{1.5ex plus .1ex minus .2ex}{1pc}
\end{verbatim}

\examplesep

Les exemples suivants sont pensés pour des chapitres. Cependant, cette documentation 
ne dispose par de la commande |\chapter| et illustre ce point en utilisant |\section|
avec quelques rares changements.  

\titlespacing{\section}{0pt}{*4}{*4}
\titleformat{\section}[display]
  {\normalfont\Large\filcenter\sffamily}
  {\titlerule[1pt]%
   \vspace{1pt}%
   \titlerule
   \vspace{1pc}%
   \LARGE\MakeUppercase{chapter} \thesection}
  {1pc}
  {\titlerule
   \vspace{1pc}%
   \Huge}

\section[Annexes]{Le titre}

\begin{verbatim}
\titleformat{\chapter}[display]
  {\normalfont\Large\filcenter\sffamily}
  {\titlerule[1pt]%
   \vspace{1pt}%
   \titlerule
   \vspace{1pc}%
   \LARGE\MakeUppercase{\chaptertitlename} \thechapter}
  {1pc}
  {\titlerule
   \vspace{1pc}%
   \Huge}
\end{verbatim}
   
\examplesep

\def\thesection{\Roman{section}}
\titleformat{\section}[display]
  {\bfseries\Large}
  {\filleft\MakeUppercase{chapter} \Huge\thesection}
  {4ex}
  {\titlerule
   \vspace{2ex}%
   \filright}
  [\vspace{2ex}%
   \titlerule]

\section[Annexes]{Le titre}

\begin{verbatim}
\renewcommand{\thechapter}{\Roman{chapter}}
\titleformat{\chapter}[display]
  {\bfseries\Large}
  {\filleft\MakeUppercase{\chaptertitlename} \Huge\thechapter}
  {4ex}
  {\titlerule
   \vspace{2ex}%
   \filright}
  [\vspace{2ex}%
   \titlerule]
\end{verbatim}

\addtocontents{toc}{\protect\setcounter{tocdepth}{2}\ignorespaces}
\setcounter{section}{9}
\endgroup

\bigskip 

\subsection{Un exemple complet}

Voici maintenant un exemple complet d'une structure de titres.

\begin{verbatim}
\documentclass[twoside]{report}
\usepackage[sf,sl,outermarks]{titlesec}

% \chapter, \subsection...: pas de code additionnel

\titleformat{\section}
  {\LARGE\sffamily\slshape}
  {\thesection}{1em}{}
\titlespacing{\section}
  {-6pc}{3.5ex plus .1ex minus .2ex}{1.5ex minus .1ex}

\titleformat{\paragraph}[leftmargin]
  {\sffamily\slshape\filright}
  {}{}{}
\titlespacing{\paragraph}
  {5pc}{1.5ex minus .1 ex}{1pc}

% 5+1=6, autrement dit, la marge négative de gauche dans 
% la section

\widenhead{6pc}{0pc}
  
\renewpagestyle{plain}{}

\newpagestyle{special}[\small\sffamily]{
   \headrule
   \sethead[\usepage][\textsl{\chaptertitle}][]
           {}{\textsl{\chaptertitle}}{\usepage}}
               
\newpagestyle{main}[\small\sffamily]{
   \headrule
   \sethead[\usepage][\textsl{\thechapter. \chaptertitle}][]
           {}{\textsl{\thesection. \sectiontitle}}{\usepage}}

\pagestyle{special}

\begin{document}

---Table des matières

\pagestyle{main}

---Corps du document

\pagestyle{special}

---Index
\end{document}
\end{verbatim}

\subsection{Classes standards}

Voici, pour votre information, comment peuvent être définies les commandes des classes
standards.
\begin{verbatim}
\titleformat{\chapter}[display]
  {\normalfont\huge\bfseries}{\chaptertitlename\ \thechapter}{20pt}{\Huge}
\titleformat{\section}
  {\normalfont\Large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}
  {\normalfont\large\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}
  {\normalfont\normalsize\bfseries}{\thesubsubsection}{1em}{}
\titleformat{\paragraph}[runin]
  {\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titleformat{\subparagraph}[runin]
  {\normalfont\normalsize\bfseries}{\thesubparagraph}{1em}{}

\titlespacing*{\chapter}      {0pt}{50pt}{40pt}
\titlespacing*{\section}      {0pt}{3.5ex plus 1ex minus .2ex}{2.3ex plus .2ex}
\titlespacing*{\subsection}   {0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}
\titlespacing*{\subsubsection}{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}
\titlespacing*{\paragraph}    {0pt}{3.25ex plus 1ex minus .2ex}{1em}
\titlespacing*{\subparagraph} {\parindent}{3.25ex plus 1ex minus .2ex}{1em}
\end{verbatim}

\subsection{Exemple de chapitre}

Un dernier exemple montre comment tirer parti de l'environnement |picture| pour
des formats de sectionnement moins courants. Même avec les outils simples fournis
par la version standard de \LaTeX{}, vous pouvez créer des titres marquants. Mais
vous pouvez en faire d'encore plus élaborés avec, par exemple, |pspicture| 
(de l'extension \textsf{PSTricks}) ou en incorporant des graphiques créés avec
l'aide de programmes externes.

\begin{verbatim}
\usepackage[dvips]{color}
\usepackage[rigidchapters,explicit]{titlesec}
    
\DeclareFixedFont{\chapterfont}{T1}{phv}{bx}{n}{11cm}

\titlespacing{\chapter}{0pt}{0pt}{210pt}
% La plupart des titres ont un peu de profondeur. L'espace total
% est un peu plus large que la boîte contenant l'image.

\titleformat{\chapter}[block]
  {\begin{picture}(330,200)}
  {\put(450,80){%
     \makebox(0,0)[rb]{%
       \chapterfont\textcolor[named]{SkyBlue}{\thechapter}}}
   \put(0,230){%
     \makebox(0,0)[lb]{%
       \Huge\sffamily\underline{Chapitre \thechapter}}}}
  {0pt}
  {\put(0,190){\parbox[t]{300pt}{%
     \Huge\sffamily\filright#1}}}
  [\end{picture}]
\end{verbatim}

(Les valeurs exaces à utiliser dépendent de la zone de texte, de la classe,
de |\unitlength|, du format du papier, etc.)

\end{document}

